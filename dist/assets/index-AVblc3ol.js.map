{"version":3,"mappings":"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AOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAGrCC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAGrCC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAGhDC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAG3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC3DC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAAOC,GAAI,OAM5CC,GAAY,CAEhB5M,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAC7DC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAC7DC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAC7DC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAAeC,GAAI,cAG7DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAC5DC,GAAI,SAGJC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WAAYC,GAAI,WACpDC,GAAI,WAGJC,GAAI,eAAgBC,GAAI,eAAgBC,GAAI,eAAgBC,GAAI,eAChEC,GAAI,eAAgBC,GAAI,eAAgBC,GAAI,eAAgBC,GAAI,eAChEC,GAAI,e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","names":["m","require$$0","createRoot","hydrateRoot","SEGMENT_THEMES","leather","id","name","slug","colors","primary","secondary","accent","background","surface","foreground","muted","border","ring","texture","overlay","card","shadows","sm","md","lg","xl","motion","duration","fast","normal","slow","easing","default","spring","smooth","borderRadius","full","spacing","section","component","electronics","furniture","SEGMENT_ACTIONS","initialState","activeSegment","theme","isLoading","error","segmentReducer","state","action","type","payload","SegmentContext","createContext","SegmentProvider","children","dispatch","useReducer","useEffect","urlSegment","window","location","pathname","split","localStorage","setItem","savedSegment","getItem","root","document","documentElement","Object","entries","forEach","key","value","style","setProperty","body","className","replace","classList","add","segments","values","setSegment","segment","newPath","history","pushState","isCurrentSegment","jsx","Provider","useSegment","context","useContext","Error","SEGMENT_ICONS","Package","Smartphone","Sofa","SEGMENT_DESCRIPTIONS","SegmentSwitcher","variant","handleSegmentChange","segmentId","map","Icon","isActive","jsxs","button","onClick","backgroundColor","whileHover","scale","whileTap","layout","size","y","AnimatePresence","div","layoutId","initial","opacity","animate","exit","transition","mode","ease","_a","find","s","FloatingSegmentSwitcher","x","LANGUAGES","en","code","nativeName","dir","flag","hi","ar","TRANSLATIONS","CURRENCY_CONFIG","INR","symbol","locale","position","SAR","USD","EUR","GBP","I18N_ACTIONS","language","currency","region","direction","i18nReducer","I18nContext","I18nProvider","savedLanguage","savedCurrency","savedRegion","lang","languages","currencies","setLanguage","setCurrency","setRegion","t","fallback","formatCurrency","amount","currencyCode","config","Intl","NumberFormat","minimumFractionDigits","format","formatNumber","number","formatDate","date","DateTimeFormat","year","month","day","Date","isRTL","useI18n","NotificationContext","NOTIFICATION_TYPES","ORDER_CONFIRMATION","ORDER_STATUS_UPDATE","PAYMENT_CONFIRMATION","SHIPPING_UPDATE","CUSTOMIZATION_UPDATE","ADMIN_ALERT","SYSTEM_NOTIFICATION","NOTIFICATION_CHANNELS","EMAIL","SMS","WHATSAPP","IN_APP","PUSH","NOTIFICATION_PRIORITIES","LOW","MEDIUM","HIGH","URGENT","NOTIFICATION_ACTIONS","notifications","preferences","email","orderUpdates","customizationUpdates","promotions","newsletter","sms","whatsapp","inApp","all","loading","notificationReducer","notification","read","readAt","toISOString","filter","NotificationProvider","savedPreferences","JSON","parse","stringify","simulateEmailNotification","async","Promise","resolve","setTimeout","simulateSMSNotification","simulateWhatsAppNotification","sendNotification","data","channels","template","templates","title","message","orderNumber","total","icon","priority","statusAr","status","trackingNumber","requestId","getNotificationTemplate","now","Math","random","toString","substr","createdAt","userId","includes","updatePreferences","newPreferences","markAsRead","notificationId","markAllAsRead","deleteNotification","clearAllNotifications","getUnreadCount","length","getNotificationsByType","shouldSendNotification","channel","prefs","useNotifications","InventoryContext","useInventory","InventoryProvider","inventory","setInventory","useState","alerts","setAlerts","settings","setSettings","lowStockThreshold","criticalStockThreshold","enableAlerts","alertChannels","autoReorderEnabled","autoReorderThreshold","setLoading","addNotification","mockInventoryData","useMemo","prod_001","stock","reserved","incoming","reorderPoint","maxStock","prod_002","prod_003","prod_004","prod_005","prod_006","prod_007","prod_008","checkInventoryAlerts","initInventory","useCallback","inventoryData","newAlerts","products","productId","product","p","productName","availableStock","push","threshold","timestamp","acknowledged","prev","alert","updateStock","newStock","updated","allAlerts","reserveStock","quantity","reject","currentStock","releaseStock","max","confirmStock","addIncomingStock","_expectedDate","receiveStock","acknowledgeAlert","alertId","clearAlerts","updateSettings","newSettings","getStockStatus","available","getInventorySummary","summary","totalProducts","keys","outOfStock","criticalStock","lowStock","inStock","totalValue","_productId","AuthContext","useAuth","AuthProvider","user","setUser","setIsLoading","storedUser","removeItem","isAuthenticated","login","credentials","password","userData","firstName","lastName","role","avatar","success","logout","register","newUser","updateProfile","updates","updatedUser","NotificationBell","isOpen","setIsOpen","setFilter","bellRef","useRef","unreadCount","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","formatTimeAgo","notificationTime","diffInMinutes","floor","hours","days","filteredNotifications","displayedNotifications","slice","ref","rotate","repeat","repeatDelay","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","span","label","tab","e","stopPropagation","SearchContext","EnhancedSearch","onResultSelect","placeholder","showFilters","query","suggestions","searchHistory","filters","performSearch","generateSuggestions","setQuery","setFilters","clearHistory","SEARCH_TYPES","useSearch","localQuery","setLocalQuery","showFiltersPanel","setShowFiltersPanel","searchRef","inputRef","debounceTimer","trim","clearTimeout","handleSearch","searchQuery","handleHistoryClick","historyQuery","handleFilterChange","filterKey","getSuggestionIcon","priceRanges","sortOptions","backdropFilter","Search","onChange","onFocus","onKeyDown","focus","X","Filter","ALL","PRODUCTS","CATEGORIES","BRANDS","priceRange","range","sortBy","option","Fragment","suggestion","index","delay","text","handleSuggestionClick","ArrowRight","Clock","TrendingUp","term","InventoryAlerts","onClose","filteredAlerts","getAlertIcon","AlertTriangle","TrendingDown","Info","getAlertColor","formatTime","toLocaleDateString","damping","stiffness","cardBackground","Bell","a","borderHover","textSecondary","Check","NAVIGATION_ITEMS","href","FloatingNavbar","isScrolled","setIsScrolled","isMobileMenuOpen","setIsMobileMenuOpen","isSearchOpen","setIsSearchOpen","isInventoryAlertsOpen","setIsInventoryAlertsOpen","showCurrencyDropdown","setShowCurrencyDropdown","showLanguageDropdown","setShowLanguageDropdown","handleScroll","scrollY","isAdmin","Globe","ChevronDown","curr","nav","item","User","ShoppingBag","Menu","result","currencyMap","SA","AE","QA","KW","BH","OM","IQ","JO","LB","SY","YE","IL","PS","TR","IR","AF","AD","AL","AT","BA","BE","BG","BY","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MC","MD","ME","MK","MT","NL","NO","PL","PT","RO","RS","RU","SE","SI","SK","SM","UA","VA","XK","US","CA","MX","AR","BR","CL","CO","PE","VE","EC","UY","PY","BO","GY","SR","FK","GF","CU","DO","HT","JM","TT","BB","BS","BZ","CR","GT","HN","NI","PA","SV","AG","DM","GD","KN","LC","VC","AI","AW","BM","BQ","CW","GL","GP","KY","MQ","MS","PM","PR","SX","TC","VG","VI","CN","JP","KR","IN","TH","VN","ID","MY","SG","PH","BD","PK","LK","NP","BT","MV","MM","KH","LA","MN","TW","HK","MO","AU","NZ","FJ","PG","VU","SB","NC","PF","WS","TO","KI","TV","NR","PW","FM","MH","CK","NU","TK","EG","ZA","NG","KE","MA","TN","DZ","LY","SD","ET","GH","CI","SN","ML","BF","NE","TG","BJ","GN","SL","LR","CM","CF","TD","CG","GA","GQ","AO","ZM","ZW","BW","NA","SZ","LS","MW","MZ","MG","MU","SC","KM","DJ","SO","ER","UG","TZ","RW","BI","regionMap","CURRENCIES","sort","b","localeCompare","REGIONS","LocationContext","useLocation","LocationProvider","setLocation","country","manualOverride","setManualOverride","detectByIP","response","fetch","json","countryCode","country_code","detectedRegion","detectedCurrency","country_name","detectLocation","navigator","geolocation","getCurrentPosition","latitude","longitude","coords","countryName","effectiveCurrency","effectiveRegion","setManualCurrency","setManualRegion","CurrencySelector","showRegion","isCurrencyOpen","setIsCurrencyOpen","isRegionOpen","setIsRegionOpen","currencyRef","regionRef","currentCurrency","c","getButtonClasses","baseClasses","getDropdownClasses","getItemClasses","Footer","socialLinks","Facebook","Instagram","Twitter","Youtube","footerLinks","shop","company","support","whileInView","viewport","once","MapPin","Phone","Mail","social","IconComponent","link","li","method","toUpperCase","CartContext","cartReducer","qty","exists","items","nextQty","n","CartProvider","updatingItems","setUpdatingItems","Set","api","itemsArr","v","count","reduce","price","remove","setQty","newSet","delete","clear","isUpdating","has","useCart","ctx","ORDER_STATUSES","PENDING","CONFIRMED","PROCESSING","SHIPPED","DELIVERED","CANCELLED","REFUNDED","STATUS_CONFIG","labelAr","color","step","ORDER_ACTIONS","orders","orderReducer","newOrder","customer","shipping","payment","totals","updatedAt","tracking","messageAr","automated","estimatedDelivery","shippingCarrier","order","orderId","OrderContext","OrderProvider","savedOrders","updateOrderStatus","options","getOrderById","statusConfig","addTrackingUpdate","notificationData","phone","_b","_c","notificationType","_d","trackingData","createOrder","orderData","getOrderByNumber","getStatusConfig","simulateOrderProgress","useOrder","AuditContext","ROLES","SUPER_ADMIN","ADMIN","MANAGER","MODERATOR","VIEWER","CUSTOMER","PERMISSIONS","PRODUCTS_VIEW","PRODUCTS_CREATE","PRODUCTS_EDIT","PRODUCTS_DELETE","PRODUCTS_BULK_IMPORT","ORDERS_VIEW","ORDERS_EDIT","ORDERS_REFUND","ORDERS_CANCEL","ORDERS_EXPORT","USERS_VIEW","USERS_CREATE","USERS_EDIT","USERS_DELETE","USERS_ASSIGN_ROLES","CUSTOMIZATION_VIEW","CUSTOMIZATION_EDIT","CUSTOMIZATION_APPROVE","CUSTOMIZATION_REJECT","THEMES_VIEW","THEMES_EDIT","THEMES_CREATE","THEMES_DELETE","ANALYTICS_VIEW","ANALYTICS_EXPORT","REPORTS_GENERATE","SETTINGS_VIEW","SETTINGS_EDIT","AUDIT_LOGS_VIEW","SECURITY_MANAGE","ROLES_MANAGE","ROLE_PERMISSIONS","AUDIT_ACTIONS","LOGIN","LOGOUT","CREATE","UPDATE","DELETE","VIEW","EXPORT","APPROVE","REJECT","REFUND","CANCEL","ROLE_CHANGE","PERMISSION_CHANGE","SETTINGS_CHANGE","THEME_CHANGE","SECURITY_EVENT","AUDIT_ACTIONS_TYPES","logs","currentUser","permissions","auditReducer","AuditProvider","savedLogs","logsToSave","hasPermission","permission","userRole","isCriticalAction","getFilteredLogs","filteredLogs","log","resource","startDate","endDate","exportLogsAsCSV","join","userName","ipAddress","details","hasAnyPermission","some","hasAllPermissions","every","hasRole","hasMinimumRole","minimumRole","roleHierarchy","indexOf","logAction","logEntry","userEmail","userAgent","sessionId","sessionStorage","severity","exportLogs","clearOldLogs","daysToKeep","cutoffDate","useAudit","ShippingContext","useShipping","ShippingProvider","shippingMethods","setShippingMethods","selectedMethod","setSelectedMethod","shippingAddress","setShippingAddress","setTrackingData","mockShippingMethods","description","provider","estimatedDays","trackingAvailable","baseRate","freeThreshold","maxWeight","supportedRegions","calculateShippingRate","cartItems","deliveryAddress","methodId","totalWeight","sum","weight","rate","originalRate","isFree","ceil","city","cityLower","toLowerCase","weightSurcharge","calculateEstimatedDelivery","parseInt","deliveryDate","setDate","getDate","getStatusDescription","pending","picked_up","in_transit","out_for_delivery","delivered","getStatusLocation","storeLocations","address","coordinates","lat","lng","getAvailableShippingMethods","rateInfo","createShipment","shipmentData","timeline","trackShipment","mockStatuses","currentStatusIndex","currentStatus","trackingInfo","lastUpdated","ThemeContext","ThemeProvider","setTheme","systemTheme","setSystemTheme","mediaQuery","matchMedia","matches","handler","savedTheme","effectiveTheme","newTheme","cspConfig","SecurityProvider","setupCSPListener","violations","setViolations","reportViolation","violation","report","directive","violatedDirective","blockedUri","blockedURI","documentUri","documentURI","lineNumber","sourceFile","handleCSPViolation","originalEvent","useCSPReporting","logSecurityEvent","securityEvents","setSecurityEvents","threatLevel","setThreatLevel","securityEvent","url","recentEvents","getTime","highSeverityCount","mediumSeverityCount","clearEvents","useSecurityMonitor","cleanup","head","cspMeta","createElement","httpEquiv","content","sources","appendChild","referrerMeta","viewportMeta","querySelector","applySecurityMeta","submissionCount","setInterval","pastedData","clipboardData","getData","test","devtools","open","outerHeight","innerHeight","outerWidth","innerWidth","monitorActivity","RateLimitProvider","rateLimiters","Map","originalFetch","limit","windowMs","limiter","get","resetTime","set","checkRateLimit","call","this","SecurityValidator","onViolation","checkForXSS","pattern","preventDefault","element","tagName","RecommendationContext","MOCK_PRODUCTS","category","subcategory","rating","tags","image","BEHAVIOR_WEIGHTS","view","quickView","addToCart","removeFromCart","purchase","wishlist","removeFromWishlist","search","categoryView","filterApply","sortApply","imageZoom","reviewRead","reviewWrite","shareProduct","compareProduct","emailInquiry","chatInquiry","timeOnProduct","scrollDepth","clickRecommendation","SESSION_STORAGE_KEY","BEHAVIOR_STORAGE_KEY","ANALYTICS_STORAGE_KEY","RecommendationProvider","userBehavior","setUserBehavior","sessionData","setSessionData","startTime","deviceInfo","platform","screenResolution","screen","width","height","isMobile","totalTimeSpent","pagesVisited","currentPage","recommendations","setRecommendations","trending","personalized","related","frequentlyBoughtTogether","categoryBased","searchBased","crossSell","upsell","analytics","setAnalytics","conversionRate","engagementScore","preferredCategories","min","timeOfDayPattern","dayOfWeekPattern","seasonalPattern","abandonmentReasons","loyaltyScore","trackBehavior","metadata","behaviorEntry","page","referrer","timeZone","resolvedOptions","localTime","toLocaleString","dayOfWeek","getDay","hourOfDay","getHours","device","productData","stored","updateAnalytics","trackTimeOnProduct","timeSpent","round","engagement","trackScrollDepth","scrollPercentage","trackCartAbandonment","reason","cartValue","itemCount","abandonmentStage","potentialLoss","trackSearch","results","resultCount","hasResults","searchType","newBehavior","hour","categoryIndex","findIndex","cat","score","storedBehavior","storedSession","newSession","storedAnalytics","handleBeforeUnload","generateTrending","generatePersonalized","categoryScores","segmentScores","tagScores","priceRangeScores","behavior","timeDiff","timeDecay","exp","weightedScore","tag","generateRelated","similarity","abs","generateFrequentlyBoughtTogether","generateCategoryBased","excludeId","generateCrossSell","cartCategories","Boolean","complementaryMap","cartCat","generateUpsell","priceIncrease","aValueScore","getAdvancedSearchRecommendations","userContext","lowerQuery","words","word","relevanceScore","userCategoryPreference","getUserAnalytics","totalInteractions","uniqueProducts","totalPurchases","totalCartAdds","averageSessionLength","engagementLevel","preferredPriceRange","topCategories","recentActivity","updateRecommendations","getSearchRecommendations","aNameMatch","bNameMatch","getRelated","getFrequentlyBoughtTogether","getCategoryBased","getCrossSell","getUpsell","getTrending","getPersonalized","getEngagementScore","getPreferredCategories","getLoyaltyScore","getProducts","getProduct","getSessionInsights","sessionDuration","deviceType","getVariantRecommendations","SkipToContent","ErrorBoundary","Component","constructor","props","super","__publicField","reload","setState","hasError","errorInfo","errorId","getDerivedStateFromError","_error","componentDidCatch","gtag","fatal","loggingError","render","showDetails","handleRetry","RefreshCw","handleReload","handleGoHome","Home","Bug","componentStack","toastConfig","boxShadow","showSuccess","toast","iconTheme","showError","showLoading","dismissToast","toastId","dismiss","ToastProvider","Toaster","toastOptions","reverseOrder","hasElementType","Element","hasMap","hasSet","hasArrayBuffer","ArrayBuffer","isView","equal","i","it","Array","isArray","next","done","RegExp","source","flags","valueOf","prototype","hasOwnProperty","$$typeof","match","condition","f","args","argIndex","framesToPop","objA","objB","compare","compareContext","ret","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB","TAG_NAMES","TAG_NAMES2","SEO_PRIORITY_TAGS","rel","charset","property","VALID_TAG_NAMES","REACT_TAG_MAP","accesskey","class","contenteditable","contextmenu","itemprop","tabindex","HTML_TAG_MAP","carry","HELMET_ATTRIBUTE","HELMET_PROPS","getInnermostProperty","propsList","getTitleFromPropsList","innermostTitle","innermostTemplate","innermostDefaultTitle","getOnChangeClientState","getAttributesFromPropsList","tagType","tagAttrs","getBaseTagFromPropsList","primaryAttributes","reverse","innermostBaseTag","lowerCaseAttributeKey","concat","getTagsFromPropsList","approvedSeenTags","console","warn","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","keys2","attributeKey","tagUnion","getAnyTrueFromPropsList","checkedTag","flattenArray","possibleArray","prioritizer","elementsList","propsToMatch","acc","elementAttrs","toMatch","checkIfPropsMatch","without","obj","SELF_CLOSING_TAGS","encodeSpecialCharacters","str","encode","String","generateElementAttributesAsString","attributes","attr","convertElementAttributesToReactProps","initProps","generateTagsAsReactComponent","mappedTag","attribute","mappedAttribute","innerHTML","cssText","dangerouslySetInnerHTML","__html","React","getMethodsForTag","toComponent","_type","generateTitleAsReactComponent","titleAttributes","attributeString","flattenedTitle","generateTitleAsString","attributeHtml","string","tagContent","isSelfClosing","generateTagsAsString","server_default","baseTag","bodyAttributes","htmlAttributes","noscriptTags","styleTags","prioritizeSeoTags","linkTags","metaTags","scriptTags","priorityMethods","meta","script","getPriorityMethods","base","noscript","instances","isDocument","HelmetData","canUseDOM","setHelmet","serverState","helmet","helmetInstances","instance","splice","Context","React2","HelmetProvider","helmetData","updateTags","headElement","tagNodes","querySelectorAll","oldTags","newTags","indexToDelete","newElement","styleSheet","createTextNode","setAttribute","existingTag","isEqualNode","parentNode","removeChild","updateAttributes","elementTag","getElementsByTagName","helmetAttributeString","getAttribute","helmetAttributes","attributesToRemove","attributeKeys","indexToSave","removeAttribute","commitTagChanges","newState","cb","onChangeClientState","updateTitle","tagUpdates","addedTags","removedTags","_helmetCallback","client_default","cancelAnimationFrame","defer","requestAnimationFrame","HelmetDispatcher","Component2","arguments","shouldComponentUpdate","nextProps","shallowEqual","componentDidUpdate","emitChange","componentWillUnmount","init","rendered","Helmet","Component3","fastCompare","mapNestedChildrenToProps","child","nestedChildren","flattenArrayTypeChildren","arrayTypeChildren","newChildProps","mapObjectTypeChildren","newProps","mapArrayTypeChildrenToProps","newFlattenedProps","arrayChildName","warnOnInvalidChildren","invariant","nestedChild","mapChildrenToProps","React3","Children","childProps","Consumer","SEOProvider","SEO","keywords","noindex","canonical","alternateLanguages","structuredData","siteName","fullTitle","finalUrl","finalDescription","finalImage","fullImageUrl","startsWith","origin","defaultKeywords","finalKeywords","hrefLang","hreflang","lazy","__vitePreload","import","__VITE_PRELOAD__","Category","Shop","Product","Cart","Checkout","Customize","About","Contact","Login","Register","Profile","OrderConfirmation","MyAccount","RequestTracking","TrackingPage","AdminPanel","NotFound","LoadingSpinner","App","metrics","setMetrics","fcp","lcp","fid","cls","ttfb","navigation","performance","getEntriesByType","responseStart","requestStart","fcpObserver","PerformanceObserver","list","getEntries","entry","lcpObserver","lastEntry","fidObserver","firstEntry","processingStart","clsObserver","clsValue","hadRecentInput","observe","entryTypes","disconnect","usePerformance","BrowserRouter","Suspense","Routes","Route","path","getElementById","StrictMode"],"ignoreList":[0,27,28,29,30],"sources":["../../node_modules/react-dom/client.js","../../src/ui/contexts/SegmentContext.jsx","../../src/ui/components/SegmentSwitcher.jsx","../../src/ui/contexts/I18nContext.jsx","../../src/ui/contexts/NotificationContext.jsx","../../src/ui/contexts/InventoryContext.jsx","../../src/ui/contexts/AuthContext.jsx","../../src/components/ui/NotificationBell.jsx","../../src/ui/contexts/SearchContext.jsx","../../src/components/search/EnhancedSearch.jsx","../../src/components/inventory/InventoryAlerts.jsx","../../src/ui/components/FloatingNavbar.jsx","../../src/ui/contexts/LocationContext.jsx","../../src/ui/components/CurrencySelector.jsx","../../src/ui/sections/Footer.jsx","../../src/ui/contexts/CartContext.jsx","../../src/ui/contexts/OrderContext.jsx","../../src/ui/contexts/AuditContext.jsx","../../src/ui/contexts/ShippingContext.jsx","../../src/contexts/ThemeContext.jsx","../../src/config/security.js","../../src/components/SecurityProvider.jsx","../../src/hooks/useSecurity.js","../../src/ui/contexts/RecommendationContext.jsx","../../src/ui/components/SkipToContent.jsx","../../src/ui/components/ErrorBoundary.jsx","../../src/ui/components/ToastProvider.tsx","../../node_modules/react-fast-compare/index.js","../../node_modules/invariant/browser.js","../../node_modules/shallowequal/index.js","../../node_modules/react-helmet-async/lib/index.esm.js","../../src/config.js","../../src/components/SEO.jsx","../../src/ui/App.jsx","../../src/hooks/usePerformance.js","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { createContext, useContext, useReducer, useEffect } from 'react'\r\n\r\n// Segment theme definitions\r\nconst SEGMENT_THEMES = {\r\n  leather: {\r\n    id: 'leather',\r\n    name: 'Leather',\r\n    slug: 'leather',\r\n    colors: {\r\n      primary: '#4E342E',        // Deep Umber\r\n      secondary: '#8D6E63',      // Saddle\r\n      accent: '#C6A15B',         // Brass Accent\r\n      background: '#F5E9DA',     // Cream\r\n      surface: '#FFFFFF',\r\n      foreground: '#2E2E2E',\r\n      muted: '#6B4423',\r\n      border: '#D4B896',\r\n      ring: '#C6A15B',\r\n    },\r\n    texture: {\r\n      background: 'linear-gradient(135deg, #F5E9DA 0%, #E8D5C1 100%)',\r\n      overlay: 'url(\"data:image/svg+xml,%3Csvg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cg fill=\"none\" fill-rule=\"evenodd\"%3E%3Cg fill=\"%234E342E\" fill-opacity=\"0.02\"%3E%3Cpath d=\"M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")',\r\n      card: 'linear-gradient(145deg, #FFFFFF 0%, #FAF7F0 100%)',\r\n    },\r\n    shadows: {\r\n      sm: '0 2px 8px rgba(78, 52, 46, 0.08)',\r\n      md: '0 4px 16px rgba(78, 52, 46, 0.12)',\r\n      lg: '0 8px 32px rgba(78, 52, 46, 0.16)',\r\n      xl: '0 16px 64px rgba(78, 52, 46, 0.20)',\r\n    },\r\n    motion: {\r\n      duration: {\r\n        fast: '200ms',\r\n        normal: '300ms',\r\n        slow: '400ms',\r\n      },\r\n      easing: {\r\n        default: 'cubic-bezier(0.25, 0.1, 0.25, 1)',\r\n        spring: 'cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n        smooth: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n      },\r\n    },\r\n    borderRadius: {\r\n      sm: '0.375rem',\r\n      md: '0.5rem',\r\n      lg: '0.75rem',\r\n      xl: '1rem',\r\n      '2xl': '1.5rem',\r\n      full: '9999px',\r\n    },\r\n    spacing: {\r\n      section: '5rem',\r\n      component: '2rem',\r\n    },\r\n  },\r\n  electronics: {\r\n    id: 'electronics',\r\n    name: 'Electronics',\r\n    slug: 'electronics',\r\n    colors: {\r\n      primary: '#2962FF',        // Electric Blue\r\n      secondary: '#212121',      // Graphite\r\n      accent: '#00E5FF',         // Cyan Accent\r\n      background: '#FFFFFF',     // White\r\n      surface: '#F8F9FA',\r\n      foreground: '#212121',\r\n      muted: '#5C6BC0',\r\n      border: '#E3F2FD',\r\n      ring: '#2962FF',\r\n    },\r\n    texture: {\r\n      background: 'linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)',\r\n      overlay: 'radial-gradient(circle at 50% 50%, rgba(41, 98, 255, 0.03) 0%, transparent 50%)',\r\n      card: 'linear-gradient(145deg, #FFFFFF 0%, #F5F7FA 100%)',\r\n    },\r\n    shadows: {\r\n      sm: '0 2px 8px rgba(41, 98, 255, 0.08)',\r\n      md: '0 4px 16px rgba(41, 98, 255, 0.12)',\r\n      lg: '0 8px 32px rgba(41, 98, 255, 0.16)',\r\n      xl: '0 16px 64px rgba(41, 98, 255, 0.20)',\r\n    },\r\n    motion: {\r\n      duration: {\r\n        fast: '150ms',\r\n        normal: '200ms',\r\n        slow: '250ms',\r\n      },\r\n      easing: {\r\n        default: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n        spring: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\r\n        smooth: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n      },\r\n    },\r\n    borderRadius: {\r\n      sm: '0.25rem',\r\n      md: '0.375rem',\r\n      lg: '0.5rem',\r\n      xl: '0.75rem',\r\n      '2xl': '1rem',\r\n      full: '9999px',\r\n    },\r\n    spacing: {\r\n      section: '4rem',\r\n      component: '1.5rem',\r\n    },\r\n  },\r\n  furniture: {\r\n    id: 'furniture',\r\n    name: 'Furniture & Interiors',\r\n    slug: 'furniture',\r\n    colors: {\r\n      primary: '#2E7D32',        // Forest\r\n      secondary: '#D7CCC8',      // Sand\r\n      accent: '#8BC34A',         // Light Green\r\n      background: '#FAF7F2',     // Linen\r\n      surface: '#FFFFFF',\r\n      foreground: '#424242',     // Charcoal\r\n      muted: '#81C784',\r\n      border: '#E8F5E8',\r\n      ring: '#2E7D32',\r\n    },\r\n    texture: {\r\n      background: 'linear-gradient(135deg, #FAF7F2 0%, #F5F2ED 100%)',\r\n      overlay: 'url(\"data:image/svg+xml,%3Csvg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cg fill=\"%232E7D32\" fill-opacity=\"0.03\" fill-rule=\"evenodd\"%3E%3Cpath d=\"M0 40L40 0H20L0 20M40 40V20L20 40\"/%3E%3C/g%3E%3C/svg%3E\")',\r\n      card: 'linear-gradient(145deg, #FFFFFF 0%, #FDFCF8 100%)',\r\n    },\r\n    shadows: {\r\n      sm: '0 2px 8px rgba(46, 125, 50, 0.08)',\r\n      md: '0 4px 16px rgba(46, 125, 50, 0.12)',\r\n      lg: '0 8px 32px rgba(46, 125, 50, 0.16)',\r\n      xl: '0 16px 64px rgba(46, 125, 50, 0.20)',\r\n    },\r\n    motion: {\r\n      duration: {\r\n        fast: '180ms',\r\n        normal: '280ms',\r\n        slow: '350ms',\r\n      },\r\n      easing: {\r\n        default: 'cubic-bezier(0.25, 0.1, 0.25, 1)',\r\n        spring: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\r\n        smooth: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n      },\r\n    },\r\n    borderRadius: {\r\n      sm: '0.5rem',\r\n      md: '0.75rem',\r\n      lg: '1rem',\r\n      xl: '1.25rem',\r\n      '2xl': '1.75rem',\r\n      full: '9999px',\r\n    },\r\n    spacing: {\r\n      section: '6rem',\r\n      component: '2.5rem',\r\n    },\r\n  },\r\n}\r\n\r\n// Action types\r\nconst SEGMENT_ACTIONS = {\r\n  SET_SEGMENT: 'SET_SEGMENT',\r\n  SET_LOADING: 'SET_LOADING',\r\n  SET_ERROR: 'SET_ERROR',\r\n}\r\n\r\n// Initial state\r\nconst initialState = {\r\n  activeSegment: 'leather',\r\n  theme: SEGMENT_THEMES.leather,\r\n  isLoading: false,\r\n  error: null,\r\n}\r\n\r\n// Reducer\r\nfunction segmentReducer(state, action) {\r\n  switch (action.type) {\r\n    case SEGMENT_ACTIONS.SET_SEGMENT:\r\n      return {\r\n        ...state,\r\n        activeSegment: action.payload,\r\n        theme: SEGMENT_THEMES[action.payload],\r\n        error: null,\r\n      }\r\n    case SEGMENT_ACTIONS.SET_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: action.payload,\r\n      }\r\n    case SEGMENT_ACTIONS.SET_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        isLoading: false,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// Context\r\nconst SegmentContext = createContext()\r\n\r\n// Provider component\r\nexport function SegmentProvider({ children }) {\r\n  const [state, dispatch] = useReducer(segmentReducer, initialState)\r\n\r\n  // Load segment from URL or localStorage on mount\r\n  useEffect(() => {\r\n    const currentPath = window.location.pathname\r\n    const urlSegment = currentPath.split('/')[1]\r\n    \r\n    if (SEGMENT_THEMES[urlSegment]) {\r\n      dispatch({ type: SEGMENT_ACTIONS.SET_SEGMENT, payload: urlSegment })\r\n      localStorage.setItem('ivolex_segment', urlSegment)\r\n    } else {\r\n      const savedSegment = localStorage.getItem('ivolex_segment')\r\n      if (savedSegment && SEGMENT_THEMES[savedSegment]) {\r\n        dispatch({ type: SEGMENT_ACTIONS.SET_SEGMENT, payload: savedSegment })\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Apply CSS custom properties when theme changes\r\n  useEffect(() => {\r\n    const root = document.documentElement\r\n    const theme = state.theme\r\n\r\n    if (theme) {\r\n      // Apply color variables\r\n      Object.entries(theme.colors).forEach(([key, value]) => {\r\n        root.style.setProperty(`--color-${key}`, value)\r\n      })\r\n\r\n      // Apply shadow variables\r\n      Object.entries(theme.shadows).forEach(([key, value]) => {\r\n        root.style.setProperty(`--shadow-${key}`, value)\r\n      })\r\n\r\n      // Apply motion variables\r\n      Object.entries(theme.motion.duration).forEach(([key, value]) => {\r\n        root.style.setProperty(`--duration-${key}`, value)\r\n      })\r\n\r\n      Object.entries(theme.motion.easing).forEach(([key, value]) => {\r\n        root.style.setProperty(`--easing-${key}`, value)\r\n      })\r\n\r\n      // Apply border radius variables\r\n      Object.entries(theme.borderRadius).forEach(([key, value]) => {\r\n        root.style.setProperty(`--radius-${key}`, value)\r\n      })\r\n\r\n      // Apply spacing variables\r\n      Object.entries(theme.spacing).forEach(([key, value]) => {\r\n        root.style.setProperty(`--spacing-${key}`, value)\r\n      })\r\n\r\n      // Apply texture backgrounds\r\n      root.style.setProperty('--bg-texture', theme.texture.background)\r\n      root.style.setProperty('--bg-overlay', theme.texture.overlay)\r\n      root.style.setProperty('--bg-card', theme.texture.card)\r\n\r\n      // Update body class for segment-specific styling\r\n      document.body.className = document.body.className.replace(/segment-\\w+/g, '')\r\n      document.body.classList.add(`segment-${state.activeSegment}`)\r\n    }\r\n  }, [state.theme, state.activeSegment])\r\n\r\n  const setSegment = (segment) => {\r\n    if (SEGMENT_THEMES[segment]) {\r\n      dispatch({ type: SEGMENT_ACTIONS.SET_SEGMENT, payload: segment })\r\n      localStorage.setItem('ivolex_segment', segment)\r\n      \r\n      // Update URL without page reload\r\n      const newPath = `/${segment}`\r\n      if (window.location.pathname !== newPath) {\r\n        window.history.pushState({}, '', newPath)\r\n      }\r\n    }\r\n  }\r\n\r\n  const value = {\r\n    ...state,\r\n    segments: Object.values(SEGMENT_THEMES),\r\n    setSegment,\r\n    isCurrentSegment: (segment) => state.activeSegment === segment,\r\n  }\r\n\r\n  return (\r\n    <SegmentContext.Provider value={value}>\r\n      {children}\r\n    </SegmentContext.Provider>\r\n  )\r\n}\r\n\r\n// Hook to use segment context\r\nexport function useSegment() {\r\n  const context = useContext(SegmentContext)\r\n  if (!context) {\r\n    throw new Error('useSegment must be used within a SegmentProvider')\r\n  }\r\n  return context\r\n}\r\n\r\n// Export theme definitions for use in other components\r\nexport { SEGMENT_THEMES }","import { motion, AnimatePresence } from 'framer-motion'\r\nimport { useSegment } from '../contexts/SegmentContext.jsx'\r\nimport { Package, Smartphone, Sofa } from 'lucide-react'\r\n\r\nconst SEGMENT_ICONS = {\r\n  leather: Package,\r\n  electronics: Smartphone,\r\n  furniture: Sofa,\r\n}\r\n\r\nconst SEGMENT_DESCRIPTIONS = {\r\n  leather: 'Premium leather goods & accessories',\r\n  electronics: 'Cutting-edge electronic devices',\r\n  furniture: 'Elegant furniture & interior design',\r\n}\r\n\r\nexport default function SegmentSwitcher({ variant = 'default', className = '' }) {\r\n  const { activeSegment, segments, setSegment, theme } = useSegment()\r\n\r\n  const handleSegmentChange = (segmentId) => {\r\n    if (segmentId !== activeSegment) {\r\n      setSegment(segmentId)\r\n    }\r\n  }\r\n\r\n  if (variant === 'pills') {\r\n    return (\r\n      <div className={`flex items-center gap-2 ${className}`}>\r\n        {segments.map((segment) => {\r\n          const Icon = SEGMENT_ICONS[segment.id]\r\n          const isActive = segment.id === activeSegment\r\n          \r\n          return (\r\n            <motion.button\r\n              key={segment.id}\r\n              onClick={() => handleSegmentChange(segment.id)}\r\n              className={`relative flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ${\r\n                isActive \r\n                  ? 'text-white shadow-segment-md' \r\n                  : 'text-foreground/60 hover:text-foreground hover:bg-surface'\r\n              }`}\r\n              style={{\r\n                backgroundColor: isActive ? theme.colors.primary : 'transparent',\r\n              }}\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n              layout\r\n            >\r\n              <Icon size={16} />\r\n              <span>{segment.name}</span>\r\n            </motion.button>\r\n          )\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={`w-full ${className}`}>\r\n      <div className=\"flex border-b border-border\">\r\n        {segments.map((segment) => {\r\n          const Icon = SEGMENT_ICONS[segment.id]\r\n          const isActive = segment.id === activeSegment\r\n          \r\n          return (\r\n            <motion.button\r\n              key={segment.id}\r\n              onClick={() => handleSegmentChange(segment.id)}\r\n              className={`relative flex items-center gap-3 px-6 py-4 text-sm font-medium transition-all duration-200 border-b-2 ${\r\n                isActive \r\n                  ? 'text-primary border-primary' \r\n                  : 'text-foreground/60 border-transparent hover:text-foreground hover:border-foreground/20'\r\n              }`}\r\n              whileHover={{ y: -1 }}\r\n              whileTap={{ y: 0 }}\r\n            >\r\n              <Icon size={18} />\r\n              <div className=\"text-left\">\r\n                <div>{segment.name}</div>\r\n                <div className=\"text-xs text-foreground/40 mt-0.5\">\r\n                  {SEGMENT_DESCRIPTIONS[segment.id]}\r\n                </div>\r\n              </div>\r\n              \r\n              <AnimatePresence>\r\n                {isActive && (\r\n                  <motion.div\r\n                    className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-primary\"\r\n                    layoutId=\"activeTab\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    transition={{ duration: 0.2 }}\r\n                  />\r\n                )}\r\n              </AnimatePresence>\r\n            </motion.button>\r\n          )\r\n        })}\r\n      </div>\r\n      \r\n      <AnimatePresence mode=\"wait\">\r\n        <motion.div\r\n          key={activeSegment}\r\n          initial={{ opacity: 0, y: 10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -10 }}\r\n          transition={{ duration: 0.3, ease: 'easeInOut' }}\r\n          className=\"py-6\"\r\n        >\r\n          <div className=\"text-center\">\r\n            <h3 className=\"text-2xl font-bold text-foreground mb-2\">\r\n              {segments.find(s => s.id === activeSegment)?.name}\r\n            </h3>\r\n            <p className=\"text-foreground/60\">\r\n              {SEGMENT_DESCRIPTIONS[activeSegment]}\r\n            </p>\r\n          </div>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function FloatingSegmentSwitcher({ className = '' }) {\r\n  const { activeSegment, segments, setSegment, theme } = useSegment()\r\n\r\n  return (\r\n    <div className={`flex items-center bg-surface/80 backdrop-blur-md rounded-full p-1 shadow-segment-md ${className}`}>\r\n      {segments.map((segment) => {\r\n        const Icon = SEGMENT_ICONS[segment.id]\r\n        const isActive = segment.id === activeSegment\r\n        \r\n        return (\r\n          <motion.button\r\n            key={segment.id}\r\n            onClick={() => setSegment(segment.id)}\r\n            className={`relative flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ${\r\n              isActive \r\n                ? 'text-white shadow-sm' \r\n                : 'text-foreground/60 hover:text-foreground'\r\n            }`}\r\n            style={{\r\n              backgroundColor: isActive ? theme.colors.primary : 'transparent',\r\n            }}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            layout\r\n          >\r\n            <Icon size={14} />\r\n            <span className=\"hidden sm:inline\">{segment.name}</span>\r\n            \r\n            {isActive && (\r\n              <motion.div\r\n                className=\"absolute -bottom-1 left-1/2 w-1 h-1 bg-white rounded-full sm:hidden\"\r\n                layoutId=\"mobileIndicator\"\r\n                style={{ x: '-50%' }}\r\n              />\r\n            )}\r\n          </motion.button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function SegmentIndicator({ showLabel = true, className = '' }) {\r\n  const { activeSegment, theme } = useSegment()\r\n  const Icon = SEGMENT_ICONS[activeSegment]\r\n  const segment = { leather: 'Leather', electronics: 'Electronics', furniture: 'Furniture' }[activeSegment]\r\n  \r\n  return (\r\n    <div className={`flex items-center gap-2 ${className}`}>\r\n      <div \r\n        className=\"flex items-center justify-center w-8 h-8 rounded-full shadow-segment-sm\"\r\n        style={{ backgroundColor: theme.colors.primary }}\r\n      >\r\n        <Icon size={16} className=\"text-white\" />\r\n      </div>\r\n      {showLabel && (\r\n        <span className=\"text-sm font-medium text-foreground\">\r\n          {segment}\r\n        </span>\r\n      )}\r\n    </div>\r\n  )\r\n}","import { createContext, useContext, useReducer, useEffect } from 'react'\n\n// Language definitions\nconst LANGUAGES = {\n  en: {\n    code: 'en',\n    name: 'English',\n    nativeName: 'English',\n    dir: 'ltr',\n    flag: '🇺🇸'\n  },\n  hi: {\n    code: 'hi',\n    name: 'Hindi',\n    nativeName: 'हिन्दी',\n    dir: 'ltr',\n    flag: '🇮🇳'\n  },\n  ar: {\n    code: 'ar',\n    name: 'Arabic',\n    nativeName: 'العربية',\n    dir: 'rtl',\n    flag: '🇸🇦'\n  }\n}\n\n// Translation keys and content\nconst TRANSLATIONS = {\n  en: {\n    // Navigation\n    'nav.home': 'Home',\n    'nav.products': 'Products',\n    'nav.categories': 'Categories',\n    'nav.customize': 'Customize',\n    'nav.about': 'About',\n    'nav.contact': 'Contact',\n    'nav.cart': 'Cart',\n    'nav.search': 'Search',\n    \n    // Common\n    'common.loading': 'Loading...',\n    'common.error': 'Error',\n    'common.success': 'Success',\n    'common.cancel': 'Cancel',\n    'common.save': 'Save',\n    'common.delete': 'Delete',\n    'common.edit': 'Edit',\n    'common.view': 'View',\n    'common.close': 'Close',\n    'common.submit': 'Submit',\n    'common.continue': 'Continue',\n    'common.back': 'Back',\n    'common.next': 'Next',\n    'common.previous': 'Previous',\n    'common.finish': 'Finish',\n    'common.price': 'Price',\n    'common.quantity': 'Quantity',\n    'common.total': 'Total',\n    'common.subtotal': 'Subtotal',\n    'common.shipping': 'Shipping',\n    'common.tax': 'Tax',\n    'common.discount': 'Discount',\n    \n    // Hero Section\n    'hero.leather.headline': 'Timeless Leather Craftsmanship',\n    'hero.leather.subheadline': 'Experience the finest handcrafted leather goods, where tradition meets modern elegance',\n    'hero.electronics.headline': 'Cutting-Edge Technology',\n    'hero.electronics.subheadline': 'Discover the future of electronics with innovative devices that enhance your digital lifestyle',\n    'hero.furniture.headline': 'Elegant Interior Design',\n    'hero.furniture.subheadline': 'Transform your space with premium furniture and décor that reflects your unique style',\n    'hero.cta': 'Explore Collection',\n    'hero.video': 'Watch Our Story',\n    'hero.scroll': 'Scroll to explore',\n    \n    // Products\n    'products.featured': 'Featured Products',\n    'products.trending': 'Trending Products',\n    'products.new': 'New Arrivals',\n    'products.bestsellers': 'Best Sellers',\n    'products.sale': 'On Sale',\n    'products.outOfStock': 'Out of Stock',\n    'products.inStock': 'In Stock',\n    'products.addToCart': 'Add to Cart',\n    'products.buyNow': 'Buy Now',\n    'products.quickView': 'Quick View',\n    'products.addToWishlist': 'Add to Wishlist',\n    'products.viewDetails': 'View Details',\n    'products.specifications': 'Specifications',\n    'products.features': 'Features',\n    'products.reviews': 'Reviews',\n    'products.rating': 'Rating',\n    'products.noProducts': 'No products found',\n    \n    // Categories\n    'categories.leather.bags': 'Bags',\n    'categories.leather.wallets': 'Wallets',\n    'categories.leather.belts': 'Belts',\n    'categories.leather.accessories': 'Accessories',\n    'categories.electronics.audio': 'Audio',\n    'categories.electronics.wearables': 'Wearables',\n    'categories.electronics.accessories': 'Accessories',\n    'categories.furniture.office': 'Office',\n    'categories.furniture.seating': 'Seating',\n    'categories.furniture.storage': 'Storage',\n    \n    // Cart\n    'cart.title': 'Shopping Cart',\n    'cart.empty': 'Your cart is empty',\n    'cart.continueShopping': 'Continue Shopping',\n    'cart.checkout': 'Proceed to Checkout',\n    'cart.remove': 'Remove',\n    'cart.update': 'Update',\n    'cart.itemAdded': 'Item added to cart',\n    'cart.itemRemoved': 'Item removed from cart',\n    \n    // Customization\n    'customize.title': 'Custom Request',\n    'customize.subtitle': 'Tell us about your vision, and our experts will bring it to life',\n    'customize.contact.title': 'Contact Information',\n    'customize.project.title': 'Project Details',\n    'customize.requirements.title': 'Requirements & Specifications',\n    'customize.files.title': 'Files & References',\n    'customize.timeline.title': 'Timeline & Budget',\n    'customize.review.title': 'Review & Submit',\n    'customize.success': 'Request submitted successfully!',\n    'customize.error': 'Failed to submit request',\n    \n    // Footer\n    'footer.quickLinks': 'Quick Links',\n    'footer.customerService': 'Customer Service',\n    'footer.followUs': 'Follow Us',\n    'footer.newsletter': 'Newsletter',\n    'footer.newsletterText': 'Subscribe to get updates on new products and offers',\n    'footer.subscribe': 'Subscribe',\n    'footer.copyright': '© 2024 IVOLEX. All rights reserved.',\n    \n    // Admin\n    'admin.dashboard': 'Dashboard',\n    'admin.shop': 'Shop Management',\n    'admin.advancedAnalytics': 'Advanced Analytics',\n    'admin.products': 'Products',\n    'admin.orders': 'Orders',\n    'admin.payments': 'Payments',\n    'admin.customers': 'Customers',\n    'admin.profile': 'Profile',\n    'admin.analytics': 'Analytics',\n    'admin.indiaAnalytics': 'India Analytics',\n    'admin.recommendations': 'Recommendations',\n    'admin.security': 'Security Center',\n    'admin.settings': 'Settings',\n    'admin.revenue': 'Revenue',\n    'admin.totalOrders': 'Total Orders',\n    'admin.totalCustomers': 'Total Customers',\n    'admin.conversionRate': 'Conversion Rate',\n  },\n  ar: {\n    // Navigation\n    'nav.home': 'الرئيسية',\n    'nav.products': 'المنتجات',\n    'nav.categories': 'الفئات',\n    'nav.customize': 'تخصيص',\n    'nav.about': 'حول',\n    'nav.contact': 'اتصل',\n    'nav.cart': 'العربة',\n    'nav.search': 'بحث',\n    \n    // Common\n    'common.loading': 'جاري التحميل...',\n    'common.error': 'خطأ',\n    'common.success': 'نجح',\n    'common.cancel': 'إلغاء',\n    'common.save': 'حفظ',\n    'common.delete': 'حذف',\n    'common.edit': 'تعديل',\n    'common.view': 'عرض',\n    'common.close': 'إغلاق',\n    'common.submit': 'إرسال',\n    'common.continue': 'متابعة',\n    'common.back': 'رجوع',\n    'common.next': 'التالي',\n    'common.previous': 'السابق',\n    'common.finish': 'إنهاء',\n    'common.price': 'السعر',\n    'common.quantity': 'الكمية',\n    'common.total': 'المجموع',\n    'common.subtotal': 'المجموع الفرعي',\n    'common.shipping': 'الشحن',\n    'common.tax': 'الضريبة',\n    'common.discount': 'الخصم',\n    \n    // Hero Section\n    'hero.leather.headline': 'صناعة الجلود الخالدة',\n    'hero.leather.subheadline': 'اكتشف أجود المنتجات الجلدية المصنوعة يدوياً، حيث تلتقي التقاليد بالأناقة العصرية',\n    'hero.electronics.headline': 'التكنولوجيا المتطورة',\n    'hero.electronics.subheadline': 'اكتشف مستقبل الإلكترونيات مع الأجهزة المبتكرة التي تعزز نمط حياتك الرقمي',\n    'hero.furniture.headline': 'التصميم الداخلي الأنيق',\n    'hero.furniture.subheadline': 'حول مساحتك بأثاث وديكور فاخر يعكس أسلوبك الفريد',\n    'hero.cta': 'استكشف المجموعة',\n    'hero.video': 'شاهد قصتنا',\n    'hero.scroll': 'مرر للاستكشاف',\n    \n    // Products\n    'products.featured': 'المنتجات المميزة',\n    'products.trending': 'المنتجات الرائجة',\n    'products.new': 'الوافدات الجديدة',\n    'products.bestsellers': 'الأكثر مبيعاً',\n    'products.sale': 'في التخفيضات',\n    'products.outOfStock': 'نفد المخزون',\n    'products.inStock': 'متوفر',\n    'products.addToCart': 'أضف للعربة',\n    'products.buyNow': 'اشتر الآن',\n    'products.quickView': 'عرض سريع',\n    'products.addToWishlist': 'أضف للمفضلة',\n    'products.viewDetails': 'عرض التفاصيل',\n    'products.specifications': 'المواصفات',\n    'products.features': 'الميزات',\n    'products.reviews': 'التقييمات',\n    'products.rating': 'التقييم',\n    'products.noProducts': 'لم يتم العثور على منتجات',\n    \n    // Categories\n    'categories.leather.bags': 'الحقائب',\n    'categories.leather.wallets': 'المحافظ',\n    'categories.leather.belts': 'الأحزمة',\n    'categories.leather.accessories': 'الإكسسوارات',\n    'categories.electronics.audio': 'الصوتيات',\n    'categories.electronics.wearables': 'الأجهزة القابلة للارتداء',\n    'categories.electronics.accessories': 'الإكسسوارات',\n    'categories.furniture.office': 'المكتب',\n    'categories.furniture.seating': 'الجلوس',\n    'categories.furniture.storage': 'التخزين',\n    \n    // Cart\n    'cart.title': 'عربة التسوق',\n    'cart.empty': 'عربة التسوق فارغة',\n    'cart.continueShopping': 'متابعة التسوق',\n    'cart.checkout': 'الدفع',\n    'cart.remove': 'إزالة',\n    'cart.update': 'تحديث',\n    'cart.itemAdded': 'تم إضافة العنصر للعربة',\n    'cart.itemRemoved': 'تم إزالة العنصر من العربة',\n    \n    // Customization\n    'customize.title': 'طلب مخصص',\n    'customize.subtitle': 'أخبرنا عن رؤيتك، وسيقوم خبراؤنا بتحقيقها',\n    'customize.contact.title': 'معلومات الاتصال',\n    'customize.project.title': 'تفاصيل المشروع',\n    'customize.requirements.title': 'المتطلبات والمواصفات',\n    'customize.files.title': 'الملفات والمراجع',\n    'customize.timeline.title': 'الجدول الزمني والميزانية',\n    'customize.review.title': 'المراجعة والإرسال',\n    'customize.success': 'تم إرسال الطلب بنجاح!',\n    'customize.error': 'فشل في إرسال الطلب',\n    \n    // Footer\n    'footer.quickLinks': 'روابط سريعة',\n    'footer.customerService': 'خدمة العملاء',\n    'footer.followUs': 'تابعنا',\n    'footer.newsletter': 'النشرة الإخبارية',\n    'footer.newsletterText': 'اشترك للحصول على تحديثات المنتجات والعروض الجديدة',\n    'footer.subscribe': 'اشترك',\n    'footer.copyright': '© 2024 إيفوليكس. جميع الحقوق محفوظة.',\n    \n    // Admin\n    'admin.dashboard': 'लोचे का पैनल',\n    'admin.products': 'उत्पाद',\n    'admin.orders': 'ऑर्डर',\n    'admin.customers': 'ग्राहक',\n    'admin.analytics': 'विश्लेषण',\n    'admin.settings': 'सेटिंग्स',\n    'admin.revenue': 'आय',\n    'admin.totalOrders': 'कुल ऑर्डर',\n    'admin.totalCustomers': 'कुल ग्राहक',\n    'admin.conversionRate': 'रूपांतरण दर',\n  },\n  hi: {\n    // Navigation\n    'nav.home': 'मुख्य पृष्ठ',\n    'nav.products': 'उत्पाद',\n    'nav.categories': 'श्रेणियाँ',\n    'nav.customize': 'अनुकूलित करें',\n    'nav.about': 'हमारे बारे में',\n    'nav.contact': 'संपर्क',\n    'nav.cart': 'कार्ट',\n    'nav.search': 'खोजें',\n    \n    // Common\n    'common.loading': 'लोड हो रहा है...',\n    'common.error': 'त्रुटि',\n    'common.success': 'सफल',\n    'common.cancel': 'रद्द करें',\n    'common.save': 'सेव करें',\n    'common.delete': 'हटाएं',\n    'common.edit': 'संपादित करें',\n    'common.view': 'देखें',\n    'common.close': 'बंद करें',\n    'common.submit': 'जमा करें',\n    'common.continue': 'जारी रखें',\n    'common.back': 'वापस',\n    'common.next': 'अगला',\n    'common.previous': 'पिछला',\n    'common.finish': 'समाप्त',\n    'common.price': 'कीमत',\n    'common.quantity': 'मात्रा',\n    'common.total': 'कुल',\n    'common.subtotal': 'उप-योग',\n    'common.shipping': 'शिपिंग',\n    'common.tax': 'कर',\n    'common.discount': 'छूट',\n    \n    // Hero Section\n    'hero.leather.headline': 'शाश्वत चमड़े का शिल्प',\n    'hero.leather.subheadline': 'बेहतरीन हस्तनिर्मित चमड़े के सामान का अनुभव करें, जहां परंपरा आधुनिक लालित्य से मिलती है',\n    'hero.electronics.headline': 'अत्याधुनिक तकनीक',\n    'hero.electronics.subheadline': 'नवाचार भरे उपकरणों के साथ इलेक्ट्रॉनिक्स का भविष्य खोजें जो आपकी डिजिटल जीवनशैली को बेहतर बनाते हैं',\n    'hero.furniture.headline': 'सुरुचिपूर्ण इंटीरियर डिज़ाइन',\n    'hero.furniture.subheadline': 'प्रीमियम फर्नीचर और सजावट के साथ अपने स्थान को रूपांतरित करें जो आपकी अनूठी शैली को दर्शाता है',\n    'hero.cta': 'संग्रह देखें',\n    'hero.video': 'हमारी कहानी देखें',\n    'hero.scroll': 'खोजने के लिए स्क्रॉल करें',\n    \n    // Products\n    'products.featured': 'विशेष उत्पाद',\n    'products.trending': 'ट्रेंडिंग उत्पाद',\n    'products.new': 'नई आवक',\n    'products.bestsellers': 'सबसे ज्यादा बिकने वाले',\n    'products.sale': 'सेल में',\n    'products.outOfStock': 'स्टॉक समाप्त',\n    'products.inStock': 'स्टॉक में',\n    'products.addToCart': 'कार्ट में जोड़ें',\n    'products.buyNow': 'अभी खरीदें',\n    'products.quickView': 'त्वरित दृश्य',\n    'products.addToWishlist': 'विशलिस्ट में जोड़ें',\n    'products.viewDetails': 'विवरण देखें',\n    'products.specifications': 'विशिष्टताएं',\n    'products.features': 'सुविधाएं',\n    'products.reviews': 'समीक्षाएं',\n    'products.rating': 'रेटिंग',\n    'products.noProducts': 'कोई उत्पाद नहीं मिला',\n    \n    // Categories\n    'categories.leather.bags': 'बैग',\n    'categories.leather.wallets': 'वॉलेट',\n    'categories.leather.belts': 'बेल्ट',\n    'categories.leather.accessories': 'एक्सेसरीज',\n    'categories.electronics.audio': 'ऑडियो',\n    'categories.electronics.wearables': 'पहनने योग्य',\n    'categories.electronics.accessories': 'एक्सेसरीज',\n    'categories.furniture.office': 'ऑफिस',\n    'categories.furniture.seating': 'बैठने की जगह',\n    'categories.furniture.storage': 'भंडारण',\n    \n    // Cart\n    'cart.title': 'शॉपिंग कार्ट',\n    'cart.empty': 'आपका कार्ट खाली है',\n    'cart.continueShopping': 'खरीदारी जारी रखें',\n    'cart.checkout': 'चेकआउट पर जाएं',\n    'cart.remove': 'हटाएं',\n    'cart.update': 'अपडेट करें',\n    'cart.itemAdded': 'आइटम कार्ट में जोड़ा गया',\n    'cart.itemRemoved': 'आइटम कार्ट से हटाया गया',\n    \n    // Customization\n    'customize.title': 'कस्टम अनुरोध',\n    'customize.subtitle': 'हमें अपने विज़न के बारे में बताएं, और हमारे विशेषज्ञ इसे जीवंत बना देंगे',\n    'customize.contact.title': 'संपर्क जानकारी',\n    'customize.project.title': 'प्रोजेक्ट विवरण',\n    'customize.requirements.title': 'आवश्यकताएं और विशिष्टताएं',\n    'customize.files.title': 'फाइलें और संदर्भ',\n    'customize.timeline.title': 'समयसीमा और बजट',\n    'customize.review.title': 'समीक्षा और जमा करें',\n    'customize.success': 'अनुरोध सफलतापूर्वक जमा किया गया!',\n    'customize.error': 'अनुरोध जमा करने में विफल',\n    \n    // Footer\n    'footer.quickLinks': 'त्वरित लिंक',\n    'footer.customerService': 'ग्राहक सेवा',\n    'footer.followUs': 'हमें फॉलो करें',\n    'footer.newsletter': 'न्यूज़लेटर',\n    'footer.newsletterText': 'नए उत्पादों और ऑफर्स की अपडेट पाने के लिए सब्स्क्राइब करें',\n    'footer.subscribe': 'सब्स्क्राइब करें',\n    'footer.copyright': '© 2024 IVOLEX. सभी अधिकार सुरक्षित।',\n    \n    // Admin\n    'admin.dashboard': 'डैशबोर्ड',\n    'admin.products': 'उत्पाद',\n    'admin.orders': 'ऑर्डर',\n    'admin.customers': 'ग्राहक',\n    'admin.analytics': 'विश्लेषण',\n    'admin.settings': 'सेटिंग्स',\n    'admin.revenue': 'आय',\n    'admin.totalOrders': 'कुल ऑर्डर',\n    'admin.totalCustomers': 'कुल ग्राहक',\n    'admin.conversionRate': 'रूपांतरण दर',\n  }\n}\n\n// Currency formatting\nconst CURRENCY_CONFIG = {\n  INR: {\n    code: 'INR',\n    symbol: '₹',\n    name: 'Indian Rupee',\n    locale: 'en-IN',\n    position: 'before'\n  },\n  SAR: {\n    code: 'SAR',\n    symbol: 'ر.س',\n    name: 'Saudi Riyal',\n    locale: 'ar-SA',\n    position: 'after'\n  },\n  USD: {\n    code: 'USD',\n    symbol: '$',\n    name: 'US Dollar',\n    locale: 'en-US',\n    position: 'before'\n  },\n  EUR: {\n    code: 'EUR',\n    symbol: '€',\n    name: 'Euro',\n    locale: 'en-EU',\n    position: 'after'\n  },\n  GBP: {\n    code: 'GBP',\n    symbol: '£',\n    name: 'British Pound',\n    locale: 'en-GB',\n    position: 'before'\n  }\n}\n\n// Actions\nconst I18N_ACTIONS = {\n  SET_LANGUAGE: 'SET_LANGUAGE',\n  SET_CURRENCY: 'SET_CURRENCY',\n  SET_REGION: 'SET_REGION'\n}\n\n// Initial state\nconst initialState = {\n  language: 'en',\n  currency: 'INR', // Default to INR for India launch\n  region: 'IN',\n  direction: 'ltr'\n}\n\n// Reducer\nfunction i18nReducer(state, action) {\n  switch (action.type) {\n    case I18N_ACTIONS.SET_LANGUAGE:\n      return {\n        ...state,\n        language: action.payload,\n        direction: LANGUAGES[action.payload]?.dir || 'ltr'\n      }\n    case I18N_ACTIONS.SET_CURRENCY:\n      return {\n        ...state,\n        currency: action.payload\n      }\n    case I18N_ACTIONS.SET_REGION:\n      return {\n        ...state,\n        region: action.payload\n      }\n    default:\n      return state\n  }\n}\n\n// Context\nconst I18nContext = createContext()\n\n// Provider component\nexport function I18nProvider({ children }) {\n  const [state, dispatch] = useReducer(i18nReducer, initialState)\n  \n  // Load saved preferences on mount\n  useEffect(() => {\n    const savedLanguage = localStorage.getItem('ivolex_language')\n    const savedCurrency = localStorage.getItem('ivolex_currency')\n    const savedRegion = localStorage.getItem('ivolex_region')\n    \n    if (savedLanguage && LANGUAGES[savedLanguage]) {\n      dispatch({ type: I18N_ACTIONS.SET_LANGUAGE, payload: savedLanguage })\n    }\n    if (savedCurrency && CURRENCY_CONFIG[savedCurrency]) {\n      dispatch({ type: I18N_ACTIONS.SET_CURRENCY, payload: savedCurrency })\n    }\n    if (savedRegion) {\n      dispatch({ type: I18N_ACTIONS.SET_REGION, payload: savedRegion })\n    }\n  }, [])\n  \n  // Update document direction when language changes\n  useEffect(() => {\n    document.documentElement.dir = state.direction\n    document.documentElement.lang = state.language\n    \n    // Update CSS custom property for RTL support\n    document.documentElement.style.setProperty('--text-align-start', state.direction === 'rtl' ? 'right' : 'left')\n    document.documentElement.style.setProperty('--text-align-end', state.direction === 'rtl' ? 'left' : 'right')\n    document.documentElement.style.setProperty('--margin-start', state.direction === 'rtl' ? 'margin-right' : 'margin-left')\n    document.documentElement.style.setProperty('--margin-end', state.direction === 'rtl' ? 'margin-left' : 'margin-right')\n    document.documentElement.style.setProperty('--padding-start', state.direction === 'rtl' ? 'padding-right' : 'padding-left')\n    document.documentElement.style.setProperty('--padding-end', state.direction === 'rtl' ? 'padding-left' : 'padding-right')\n  }, [state.direction, state.language])\n  \n  const setLanguage = (language) => {\n    if (LANGUAGES[language]) {\n      dispatch({ type: I18N_ACTIONS.SET_LANGUAGE, payload: language })\n      localStorage.setItem('ivolex_language', language)\n    }\n  }\n  \n  const setCurrency = (currency) => {\n    if (CURRENCY_CONFIG[currency]) {\n      dispatch({ type: I18N_ACTIONS.SET_CURRENCY, payload: currency })\n      localStorage.setItem('ivolex_currency', currency)\n    }\n  }\n  \n  const setRegion = (region) => {\n    dispatch({ type: I18N_ACTIONS.SET_REGION, payload: region })\n    localStorage.setItem('ivolex_region', region)\n  }\n  \n  const t = (key, fallback = key) => {\n    return TRANSLATIONS[state.language]?.[key] || fallback\n  }\n  \n  const formatCurrency = (amount, currencyCode = state.currency) => {\n    const config = CURRENCY_CONFIG[currencyCode]\n    if (!config) return `${amount}`\n    \n    const formatted = new Intl.NumberFormat(config.locale, {\n      style: 'currency',\n      currency: currencyCode,\n      minimumFractionDigits: 2\n    }).format(amount)\n    \n    return formatted\n  }\n  \n  const formatNumber = (number) => {\n    const locale = state.language === 'ar' ? 'ar-SA' : 'en-US'\n    return new Intl.NumberFormat(locale).format(number)\n  }\n  \n  const formatDate = (date) => {\n    const locale = state.language === 'ar' ? 'ar-SA' : 'en-US'\n    return new Intl.DateTimeFormat(locale, {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    }).format(new Date(date))\n  }\n  \n  const value = {\n    ...state,\n    languages: LANGUAGES,\n    currencies: CURRENCY_CONFIG,\n    setLanguage,\n    setCurrency,\n    setRegion,\n    t,\n    formatCurrency,\n    formatNumber,\n    formatDate,\n    isRTL: state.direction === 'rtl'\n  }\n  \n  return (\n    <I18nContext.Provider value={value}>\n      {children}\n    </I18nContext.Provider>\n  )\n}\n\n// Hook to use i18n context\nexport function useI18n() {\n  const context = useContext(I18nContext)\n  if (!context) {\n    throw new Error('useI18n must be used within an I18nProvider')\n  }\n  return context\n}\n\n// Export translations for external use\nexport { TRANSLATIONS, LANGUAGES, CURRENCY_CONFIG }","import { createContext, useContext, useReducer, useEffect } from 'react'\r\nimport { useI18n } from './I18nContext'\r\n\r\nconst NotificationContext = createContext()\r\n\r\n// Notification types\r\nexport const NOTIFICATION_TYPES = {\r\n  ORDER_CONFIRMATION: 'order_confirmation',\r\n  ORDER_STATUS_UPDATE: 'order_status_update',\r\n  PAYMENT_CONFIRMATION: 'payment_confirmation',\r\n  SHIPPING_UPDATE: 'shipping_update',\r\n  CUSTOMIZATION_UPDATE: 'customization_update',\r\n  ADMIN_ALERT: 'admin_alert',\r\n  SYSTEM_NOTIFICATION: 'system_notification'\r\n}\r\n\r\n// Notification channels\r\nexport const NOTIFICATION_CHANNELS = {\r\n  EMAIL: 'email',\r\n  SMS: 'sms',\r\n  WHATSAPP: 'whatsapp',\r\n  IN_APP: 'in_app',\r\n  PUSH: 'push'\r\n}\r\n\r\n// Notification priorities\r\nexport const NOTIFICATION_PRIORITIES = {\r\n  LOW: 'low',\r\n  MEDIUM: 'medium',\r\n  HIGH: 'high',\r\n  URGENT: 'urgent'\r\n}\r\n\r\nconst NOTIFICATION_ACTIONS = {\r\n  SET_PREFERENCES: 'SET_PREFERENCES',\r\n  ADD_NOTIFICATION: 'ADD_NOTIFICATION',\r\n  MARK_AS_READ: 'MARK_AS_READ',\r\n  MARK_ALL_AS_READ: 'MARK_ALL_AS_READ',\r\n  DELETE_NOTIFICATION: 'DELETE_NOTIFICATION',\r\n  CLEAR_ALL: 'CLEAR_ALL',\r\n  SET_LOADING: 'SET_LOADING',\r\n  SET_ERROR: 'SET_ERROR'\r\n}\r\n\r\nconst initialState = {\r\n  notifications: [],\r\n  preferences: {\r\n    email: {\r\n      orderUpdates: true,\r\n      customizationUpdates: true,\r\n      promotions: false,\r\n      newsletter: false\r\n    },\r\n    sms: {\r\n      orderUpdates: true,\r\n      customizationUpdates: false,\r\n      promotions: false\r\n    },\r\n    whatsapp: {\r\n      orderUpdates: false,\r\n      customizationUpdates: true,\r\n      promotions: false\r\n    },\r\n    inApp: {\r\n      all: true\r\n    }\r\n  },\r\n  loading: false,\r\n  error: null\r\n}\r\n\r\nconst notificationReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case NOTIFICATION_ACTIONS.SET_PREFERENCES:\r\n      return {\r\n        ...state,\r\n        preferences: { ...state.preferences, ...action.payload }\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.ADD_NOTIFICATION:\r\n      return {\r\n        ...state,\r\n        notifications: [action.payload, ...state.notifications],\r\n        loading: false\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.MARK_AS_READ:\r\n      return {\r\n        ...state,\r\n        notifications: state.notifications.map(notification =>\r\n          notification.id === action.payload\r\n            ? { ...notification, read: true, readAt: new Date().toISOString() }\r\n            : notification\r\n        )\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.MARK_ALL_AS_READ:\r\n      return {\r\n        ...state,\r\n        notifications: state.notifications.map(notification => ({\r\n          ...notification,\r\n          read: true,\r\n          readAt: new Date().toISOString()\r\n        }))\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.DELETE_NOTIFICATION:\r\n      return {\r\n        ...state,\r\n        notifications: state.notifications.filter(notification => notification.id !== action.payload)\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.CLEAR_ALL:\r\n      return {\r\n        ...state,\r\n        notifications: []\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      }\r\n\r\n    case NOTIFICATION_ACTIONS.SET_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        loading: false\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const NotificationProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(notificationReducer, initialState)\r\n  const { language } = useI18n()\r\n\r\n  // Load preferences from localStorage on mount\r\n  useEffect(() => {\r\n    const savedPreferences = localStorage.getItem('ivolex_notification_preferences')\r\n    if (savedPreferences) {\r\n      try {\r\n        const preferences = JSON.parse(savedPreferences)\r\n        dispatch({ type: NOTIFICATION_ACTIONS.SET_PREFERENCES, payload: preferences })\r\n      } catch (error) {\r\n        console.error('Failed to load notification preferences:', error)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Save preferences to localStorage when they change\r\n  useEffect(() => {\r\n    localStorage.setItem('ivolex_notification_preferences', JSON.stringify(state.preferences))\r\n  }, [state.preferences])\r\n\r\n  // Notification templates\r\n  const getNotificationTemplate = (type, data) => {\r\n    const templates = {\r\n      [NOTIFICATION_TYPES.ORDER_CONFIRMATION]: {\r\n        title: language === 'ar' ? 'تأكيد الطلب' : 'Order Confirmed',\r\n        message: language === 'ar' \r\n          ? `تم تأكيد طلبك #${data.orderNumber} بنجاح. المبلغ الإجمالي: ${data.total}`\r\n          : `Your order #${data.orderNumber} has been confirmed. Total: ${data.total}`,\r\n        icon: '✅',\r\n        priority: NOTIFICATION_PRIORITIES.HIGH\r\n      },\r\n      [NOTIFICATION_TYPES.ORDER_STATUS_UPDATE]: {\r\n        title: language === 'ar' ? 'تحديث حالة الطلب' : 'Order Status Update',\r\n        message: language === 'ar'\r\n          ? `طلبك #${data.orderNumber} الآن: ${data.statusAr || data.status}`\r\n          : `Your order #${data.orderNumber} is now: ${data.status}`,\r\n        icon: '📦',\r\n        priority: NOTIFICATION_PRIORITIES.MEDIUM\r\n      },\r\n      [NOTIFICATION_TYPES.PAYMENT_CONFIRMATION]: {\r\n        title: language === 'ar' ? 'تأكيد الدفع' : 'Payment Confirmed',\r\n        message: language === 'ar'\r\n          ? `تم استلام دفعتك بمبلغ ${data.amount} بنجاح`\r\n          : `Your payment of ${data.amount} has been successfully processed`,\r\n        icon: '💳',\r\n        priority: NOTIFICATION_PRIORITIES.HIGH\r\n      },\r\n      [NOTIFICATION_TYPES.SHIPPING_UPDATE]: {\r\n        title: language === 'ar' ? 'تحديث الشحن' : 'Shipping Update',\r\n        message: language === 'ar'\r\n          ? `طلبك في الطريق. رقم التتبع: ${data.trackingNumber}`\r\n          : `Your order is on the way. Tracking: ${data.trackingNumber}`,\r\n        icon: '🚚',\r\n        priority: NOTIFICATION_PRIORITIES.MEDIUM\r\n      },\r\n      [NOTIFICATION_TYPES.CUSTOMIZATION_UPDATE]: {\r\n        title: language === 'ar' ? 'تحديث طلب التخصيص' : 'Customization Update',\r\n        message: language === 'ar'\r\n          ? `طلب التخصيص #${data.requestId} - ${data.statusAr || data.status}`\r\n          : `Customization request #${data.requestId} - ${data.status}`,\r\n        icon: '🎨',\r\n        priority: NOTIFICATION_PRIORITIES.MEDIUM\r\n      },\r\n      [NOTIFICATION_TYPES.ADMIN_ALERT]: {\r\n        title: language === 'ar' ? 'تنبيه إداري' : 'Admin Alert',\r\n        message: data.message || (language === 'ar' ? 'تنبيه جديد' : 'New admin alert'),\r\n        icon: '⚠️',\r\n        priority: NOTIFICATION_PRIORITIES.URGENT\r\n      },\r\n      [NOTIFICATION_TYPES.SYSTEM_NOTIFICATION]: {\r\n        title: language === 'ar' ? 'إشعار النظام' : 'System Notification',\r\n        message: data.message || (language === 'ar' ? 'إشعار جديد' : 'New system notification'),\r\n        icon: '🔔',\r\n        priority: NOTIFICATION_PRIORITIES.LOW\r\n      }\r\n    }\r\n\r\n    return templates[type] || templates[NOTIFICATION_TYPES.SYSTEM_NOTIFICATION]\r\n  }\r\n\r\n  // Send notification function\r\n  const sendNotification = async (type, data, channels = [NOTIFICATION_CHANNELS.IN_APP]) => {\r\n    dispatch({ type: NOTIFICATION_ACTIONS.SET_LOADING, payload: true })\r\n\r\n    try {\r\n      const template = getNotificationTemplate(type, data)\r\n      const notification = {\r\n        id: `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        type,\r\n        ...template,\r\n        data,\r\n        channels,\r\n        read: false,\r\n        createdAt: new Date().toISOString(),\r\n        userId: data.userId || 'current_user'\r\n      }\r\n\r\n      // Add to in-app notifications\r\n      if (channels.includes(NOTIFICATION_CHANNELS.IN_APP)) {\r\n        dispatch({ type: NOTIFICATION_ACTIONS.ADD_NOTIFICATION, payload: notification })\r\n      }\r\n\r\n      // Simulate external notifications (would integrate with real services)\r\n      if (channels.includes(NOTIFICATION_CHANNELS.EMAIL)) {\r\n        await simulateEmailNotification(notification)\r\n      }\r\n\r\n      if (channels.includes(NOTIFICATION_CHANNELS.SMS)) {\r\n        await simulateSMSNotification(notification)\r\n      }\r\n\r\n      if (channels.includes(NOTIFICATION_CHANNELS.WHATSAPP)) {\r\n        await simulateWhatsAppNotification(notification)\r\n      }\r\n\r\n      return notification\r\n    } catch (error) {\r\n      console.error('Failed to send notification:', error)\r\n      dispatch({ type: NOTIFICATION_ACTIONS.SET_ERROR, payload: error.message })\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // Simulate external notification services\r\n  const simulateEmailNotification = async (notification) => {\r\n    console.log('📧 Email sent:', {\r\n      to: notification.data.email || 'user@example.com',\r\n      subject: notification.title,\r\n      body: notification.message,\r\n      template: notification.type\r\n    })\r\n    \r\n    // Simulate API delay\r\n    await new Promise(resolve => setTimeout(resolve, 500))\r\n    return true\r\n  }\r\n\r\n  const simulateSMSNotification = async (notification) => {\r\n    console.log('📱 SMS sent:', {\r\n      to: notification.data.phone || '+1234567890',\r\n      message: `${notification.title}: ${notification.message}`,\r\n      provider: 'Twilio'\r\n    })\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 300))\r\n    return true\r\n  }\r\n\r\n  const simulateWhatsAppNotification = async (notification) => {\r\n    console.log('💬 WhatsApp sent:', {\r\n      to: notification.data.whatsapp || '+1234567890',\r\n      message: `${notification.icon} ${notification.title}\\n${notification.message}`,\r\n      provider: 'WhatsApp Business API'\r\n    })\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 400))\r\n    return true\r\n  }\r\n\r\n  // Update preferences\r\n  const updatePreferences = (newPreferences) => {\r\n    dispatch({ type: NOTIFICATION_ACTIONS.SET_PREFERENCES, payload: newPreferences })\r\n  }\r\n\r\n  // Mark notifications as read\r\n  const markAsRead = (notificationId) => {\r\n    dispatch({ type: NOTIFICATION_ACTIONS.MARK_AS_READ, payload: notificationId })\r\n  }\r\n\r\n  const markAllAsRead = () => {\r\n    dispatch({ type: NOTIFICATION_ACTIONS.MARK_ALL_AS_READ })\r\n  }\r\n\r\n  // Delete notifications\r\n  const deleteNotification = (notificationId) => {\r\n    dispatch({ type: NOTIFICATION_ACTIONS.DELETE_NOTIFICATION, payload: notificationId })\r\n  }\r\n\r\n  const clearAllNotifications = () => {\r\n    dispatch({ type: NOTIFICATION_ACTIONS.CLEAR_ALL })\r\n  }\r\n\r\n  // Get unread count\r\n  const getUnreadCount = () => {\r\n    return state.notifications.filter(notification => !notification.read).length\r\n  }\r\n\r\n  // Get notifications by type\r\n  const getNotificationsByType = (type) => {\r\n    return state.notifications.filter(notification => notification.type === type)\r\n  }\r\n\r\n  // Check if user should receive notification based on preferences\r\n  const shouldSendNotification = (type, channel) => {\r\n    const prefs = state.preferences[channel]\r\n    if (!prefs) return false\r\n\r\n    switch (type) {\r\n      case NOTIFICATION_TYPES.ORDER_CONFIRMATION:\r\n      case NOTIFICATION_TYPES.ORDER_STATUS_UPDATE:\r\n      case NOTIFICATION_TYPES.PAYMENT_CONFIRMATION:\r\n      case NOTIFICATION_TYPES.SHIPPING_UPDATE:\r\n        return prefs.orderUpdates\r\n      \r\n      case NOTIFICATION_TYPES.CUSTOMIZATION_UPDATE:\r\n        return prefs.customizationUpdates\r\n      \r\n      case NOTIFICATION_TYPES.ADMIN_ALERT:\r\n        return true // Always send admin alerts\r\n      \r\n      case NOTIFICATION_TYPES.SYSTEM_NOTIFICATION:\r\n        return prefs.all !== false\r\n      \r\n      default:\r\n        return false\r\n    }\r\n  }\r\n\r\n  const value = {\r\n    ...state,\r\n    sendNotification,\r\n    updatePreferences,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n    clearAllNotifications,\r\n    getUnreadCount,\r\n    getNotificationsByType,\r\n    shouldSendNotification,\r\n    NOTIFICATION_TYPES,\r\n    NOTIFICATION_CHANNELS,\r\n    NOTIFICATION_PRIORITIES\r\n  }\r\n\r\n  return (\r\n    <NotificationContext.Provider value={value}>\r\n      {children}\r\n    </NotificationContext.Provider>\r\n  )\r\n}\r\n\r\nexport const useNotifications = () => {\r\n  const context = useContext(NotificationContext)\r\n  if (!context) {\r\n    throw new Error('useNotifications must be used within a NotificationProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport default NotificationContext","import { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { useNotifications } from './NotificationContext'\r\n\r\nconst InventoryContext = createContext()\r\n\r\nexport const useInventory = () => {\r\n  const context = useContext(InventoryContext)\r\n  if (!context) {\r\n    throw new Error('useInventory must be used within an InventoryProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport const InventoryProvider = ({ children }) => {\r\n  const [inventory, setInventory] = useState({})\r\n  const [alerts, setAlerts] = useState([])\r\n  const [settings, setSettings] = useState({\r\n    lowStockThreshold: 10,\r\n    criticalStockThreshold: 5,\r\n    enableAlerts: true,\r\n    alertChannels: ['app', 'email'],\r\n    autoReorderEnabled: false,\r\n    autoReorderThreshold: 5\r\n  })\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const { addNotification } = useNotifications()\r\n\r\n  // Mock inventory data - in real app, this would come from API\r\n  const mockInventoryData = useMemo(() => ({\r\n    'prod_001': { stock: 15, reserved: 2, incoming: 0, reorderPoint: 10, maxStock: 100 },\r\n    'prod_002': { stock: 3, reserved: 1, incoming: 20, reorderPoint: 8, maxStock: 50 },\r\n    'prod_003': { stock: 0, reserved: 0, incoming: 10, reorderPoint: 5, maxStock: 30 },\r\n    'prod_004': { stock: 25, reserved: 5, incoming: 0, reorderPoint: 15, maxStock: 80 },\r\n    'prod_005': { stock: 8, reserved: 3, incoming: 0, reorderPoint: 12, maxStock: 60 },\r\n    'prod_006': { stock: 45, reserved: 0, incoming: 0, reorderPoint: 20, maxStock: 100 },\r\n    'prod_007': { stock: 2, reserved: 0, incoming: 25, reorderPoint: 10, maxStock: 40 },\r\n    'prod_008': { stock: 12, reserved: 8, incoming: 0, reorderPoint: 15, maxStock: 75 }\r\n  }), [])\r\n\r\n  // Initialize inventory data\r\n  useEffect(() => {\r\n    const initInventory = async () => {\r\n      setLoading(true)\r\n      try {\r\n        // Simulate API call\r\n        await new Promise(resolve => setTimeout(resolve, 1000))\r\n        setInventory(mockInventoryData)\r\n        checkInventoryAlerts(mockInventoryData)\r\n      } catch (error) {\r\n        console.error('Failed to load inventory:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    initInventory()\r\n  }, [checkInventoryAlerts, mockInventoryData]);\r\n\r\n  // Check for inventory alerts\r\n  const checkInventoryAlerts = useCallback((inventoryData = inventory) => {\r\n    if (!settings.enableAlerts) return\r\n\r\n    const newAlerts = []\r\n    const products = JSON.parse(localStorage.getItem('products') || '[]')\r\n\r\n    Object.entries(inventoryData).forEach(([productId, stock]) => {\r\n      const product = products.find(p => p.id === productId)\r\n      const productName = product?.name || `Product ${productId}`\r\n      const availableStock = stock.stock - stock.reserved\r\n\r\n      // Critical stock alert (out of stock)\r\n      if (availableStock === 0) {\r\n        newAlerts.push({\r\n          id: `critical_${productId}_${Date.now()}`,\r\n          type: 'critical',\r\n          productId,\r\n          productName,\r\n          message: `${productName} is out of stock!`,\r\n          availableStock,\r\n          threshold: settings.criticalStockThreshold,\r\n          timestamp: new Date().toISOString(),\r\n          acknowledged: false\r\n        })\r\n      }\r\n      // Critical stock alert (below critical threshold)\r\n      else if (availableStock <= settings.criticalStockThreshold) {\r\n        newAlerts.push({\r\n          id: `critical_${productId}_${Date.now()}`,\r\n          type: 'critical',\r\n          productId,\r\n          productName,\r\n          message: `${productName} has critically low stock (${availableStock} remaining)`,\r\n          availableStock,\r\n          threshold: settings.criticalStockThreshold,\r\n          timestamp: new Date().toISOString(),\r\n          acknowledged: false\r\n        })\r\n      }\r\n      // Low stock alert\r\n      else if (availableStock <= settings.lowStockThreshold) {\r\n        newAlerts.push({\r\n          id: `low_${productId}_${Date.now()}`,\r\n          type: 'low',\r\n          productId,\r\n          productName,\r\n          message: `${productName} is running low (${availableStock} remaining)`,\r\n          availableStock,\r\n          threshold: settings.lowStockThreshold,\r\n          timestamp: new Date().toISOString(),\r\n          acknowledged: false\r\n        })\r\n      }\r\n\r\n      // Auto-reorder alert\r\n      if (settings.autoReorderEnabled && availableStock <= settings.autoReorderThreshold) {\r\n        newAlerts.push({\r\n          id: `reorder_${productId}_${Date.now()}`,\r\n          type: 'reorder',\r\n          productId,\r\n          productName,\r\n          message: `Auto-reorder triggered for ${productName}`,\r\n          availableStock,\r\n          threshold: settings.autoReorderThreshold,\r\n          timestamp: new Date().toISOString(),\r\n          acknowledged: false\r\n        })\r\n      }\r\n    })\r\n\r\n    setAlerts(prev => [...prev, ...newAlerts])\r\n\r\n    // Send notifications for new alerts\r\n    newAlerts.forEach(alert => {\r\n      if (settings.alertChannels.includes('app')) {\r\n        addNotification({\r\n          title: `Inventory Alert`,\r\n          message: alert.message,\r\n          type: alert.type === 'critical' ? 'error' : 'warning',\r\n          duration: alert.type === 'critical' ? 0 : 5000\r\n        })\r\n      }\r\n    })\r\n  }, [inventory, settings, addNotification])\r\n\r\n  // Update stock levels\r\n  const updateStock = (productId, newStock) => {\r\n    setInventory(prev => {\r\n      const updated = {\r\n        ...prev,\r\n        [productId]: {\r\n          ...prev[productId],\r\n          ...newStock\r\n        }\r\n      }\r\n      \r\n      // Check for new alerts after stock update\r\n      setTimeout(() => checkInventoryAlerts(updated), 100)\r\n      \r\n      return updated\r\n    })\r\n  }\r\n\r\n  // Reserve stock (when order is placed)\r\n  const reserveStock = (productId, quantity) => {\r\n    return new Promise((resolve, reject) => {\r\n      const currentStock = inventory[productId]\r\n      if (!currentStock) {\r\n        reject(new Error('Product not found'))\r\n        return\r\n      }\r\n\r\n      const availableStock = currentStock.stock - currentStock.reserved\r\n      if (availableStock < quantity) {\r\n        reject(new Error('Insufficient stock'))\r\n        return\r\n      }\r\n\r\n      updateStock(productId, {\r\n        reserved: currentStock.reserved + quantity\r\n      })\r\n\r\n      resolve(true)\r\n    })\r\n  }\r\n\r\n  // Release reserved stock (when order is cancelled)\r\n  const releaseStock = (productId, quantity) => {\r\n    const currentStock = inventory[productId]\r\n    if (currentStock) {\r\n      updateStock(productId, {\r\n        reserved: Math.max(0, currentStock.reserved - quantity)\r\n      })\r\n    }\r\n  }\r\n\r\n  // Confirm stock (when order is shipped)\r\n  const confirmStock = (productId, quantity) => {\r\n    const currentStock = inventory[productId]\r\n    if (currentStock) {\r\n      updateStock(productId, {\r\n        stock: currentStock.stock - quantity,\r\n        reserved: Math.max(0, currentStock.reserved - quantity)\r\n      })\r\n    }\r\n  }\r\n\r\n  // Add incoming stock\r\n  const addIncomingStock = (productId, quantity, _expectedDate) => {\r\n    const currentStock = inventory[productId]\r\n    if (currentStock) {\r\n      updateStock(productId, {\r\n        incoming: currentStock.incoming + quantity\r\n      })\r\n\r\n      addNotification({\r\n        title: 'Incoming Stock Added',\r\n        message: `${quantity} units added to incoming stock for product ${productId}`,\r\n        type: 'success'\r\n      })\r\n    }\r\n  }\r\n\r\n  // Receive incoming stock\r\n  const receiveStock = (productId, quantity) => {\r\n    const currentStock = inventory[productId]\r\n    if (currentStock) {\r\n      updateStock(productId, {\r\n        stock: currentStock.stock + quantity,\r\n        incoming: Math.max(0, currentStock.incoming - quantity)\r\n      })\r\n\r\n      addNotification({\r\n        title: 'Stock Received',\r\n        message: `${quantity} units received for product ${productId}`,\r\n        type: 'success'\r\n      })\r\n    }\r\n  }\r\n\r\n  // Acknowledge alert\r\n  const acknowledgeAlert = (alertId) => {\r\n    setAlerts(prev => prev.map(alert => \r\n      alert.id === alertId ? { ...alert, acknowledged: true } : alert\r\n    ))\r\n  }\r\n\r\n  // Clear all alerts\r\n  const clearAlerts = () => {\r\n    setAlerts([])\r\n  }\r\n\r\n  // Update settings\r\n  const updateSettings = (newSettings) => {\r\n    setSettings(prev => ({ ...prev, ...newSettings }))\r\n    \r\n    // Re-check alerts with new settings\r\n    setTimeout(() => checkInventoryAlerts(), 100)\r\n  }\r\n\r\n  // Get stock status for a product\r\n  const getStockStatus = (productId) => {\r\n    const stock = inventory[productId]\r\n    if (!stock) return { status: 'unknown', available: 0 }\r\n\r\n    const available = stock.stock - stock.reserved\r\n\r\n    if (available === 0) return { status: 'out_of_stock', available }\r\n    if (available <= settings.criticalStockThreshold) return { status: 'critical', available }\r\n    if (available <= settings.lowStockThreshold) return { status: 'low', available }\r\n    return { status: 'in_stock', available }\r\n  }\r\n\r\n  // Get inventory summary\r\n  const getInventorySummary = () => {\r\n    const summary = {\r\n      totalProducts: Object.keys(inventory).length,\r\n      outOfStock: 0,\r\n      criticalStock: 0,\r\n      lowStock: 0,\r\n      inStock: 0,\r\n      totalValue: 0\r\n    }\r\n\r\n    Object.entries(inventory).forEach(([_productId, stock]) => {\r\n      const available = stock.stock - stock.reserved\r\n      \r\n      if (available === 0) summary.outOfStock++\r\n      else if (available <= settings.criticalStockThreshold) summary.criticalStock++\r\n      else if (available <= settings.lowStockThreshold) summary.lowStock++\r\n      else summary.inStock++\r\n    })\r\n\r\n    return summary\r\n  }\r\n\r\n  const value = {\r\n    inventory,\r\n    alerts: alerts.filter(alert => !alert.acknowledged),\r\n    allAlerts: alerts,\r\n    settings,\r\n    loading,\r\n    updateStock,\r\n    reserveStock,\r\n    releaseStock,\r\n    confirmStock,\r\n    addIncomingStock,\r\n    receiveStock,\r\n    acknowledgeAlert,\r\n    clearAlerts,\r\n    updateSettings,\r\n    getStockStatus,\r\n    getInventorySummary,\r\n    checkInventoryAlerts\r\n  }\r\n\r\n  return (\r\n    <InventoryContext.Provider value={value}>\r\n      {children}\r\n    </InventoryContext.Provider>\r\n  )\r\n}\r\n\r\nexport default InventoryContext","import { createContext, useContext, useState, useEffect } from 'react'\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext)\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  // Check for existing session on mount\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user')\r\n    if (storedUser) {\r\n      try {\r\n        setUser(JSON.parse(storedUser))\r\n      } catch (error) {\r\n        console.error('Error parsing stored user:', error)\r\n        localStorage.removeItem('user')\r\n      }\r\n    }\r\n    setIsLoading(false)\r\n  }, [])\r\n\r\n  const login = async (credentials) => {\r\n    // Super admin authentication\r\n    if (credentials.email === 'faisal@limitlessinfotech.com' && credentials.password === 'SuperAdmin2024!') {\r\n      const userData = {\r\n        id: '1',\r\n        email: 'faisal@limitlessinfotech.com',\r\n        firstName: 'Faisal',\r\n        lastName: 'Khan',\r\n        role: 'super_admin',\r\n        avatar: null\r\n      }\r\n      setUser(userData)\r\n      localStorage.setItem('user', JSON.stringify(userData))\r\n      return { success: true, user: userData }\r\n    }\r\n    // Demo user for testing\r\n    if (credentials.email === 'demo@ivolex.com' && credentials.password === 'password') {\r\n      const userData = {\r\n        id: '2',\r\n        email: 'demo@ivolex.com',\r\n        firstName: 'Demo',\r\n        lastName: 'User',\r\n        role: 'customer',\r\n        avatar: null\r\n      }\r\n      setUser(userData)\r\n      localStorage.setItem('user', JSON.stringify(userData))\r\n      return { success: true, user: userData }\r\n    }\r\n    return { success: false, error: 'Invalid credentials' }\r\n  }\r\n\r\n  const logout = () => {\r\n    setUser(null)\r\n    localStorage.removeItem('user')\r\n  }\r\n\r\n  const register = async (userData) => {\r\n    // Simulate API call\r\n    const newUser = {\r\n      id: Date.now().toString(),\r\n      ...userData,\r\n      avatar: null\r\n    }\r\n    setUser(newUser)\r\n    localStorage.setItem('user', JSON.stringify(newUser))\r\n    return { success: true, user: newUser }\r\n  }\r\n\r\n  const updateProfile = async (updates) => {\r\n    if (!user) return { success: false, error: 'Not authenticated' }\r\n    \r\n    const updatedUser = { ...user, ...updates }\r\n    setUser(updatedUser)\r\n    localStorage.setItem('user', JSON.stringify(updatedUser))\r\n    return { success: true, user: updatedUser }\r\n  }\r\n\r\n  const isAuthenticated = !!user\r\n\r\n  const value = {\r\n    user,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login,\r\n    logout,\r\n    register,\r\n    updateProfile\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}","import { useState, useRef, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { useNotifications } from '../../ui/contexts/NotificationContext'\r\nimport { useI18n } from '../../ui/contexts/I18nContext'\r\n\r\nconst NotificationBell = () => {\r\n  const { notifications, getUnreadCount, markAsRead, markAllAsRead, deleteNotification } = useNotifications()\r\n  const { t, language, isRTL } = useI18n()\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [filter, setFilter] = useState('all')\r\n  const bellRef = useRef(null)\r\n\r\n  const unreadCount = getUnreadCount()\r\n  const maxDisplayNotifications = 5\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (bellRef.current && !bellRef.current.contains(event.target)) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [isOpen])\r\n\r\n  const formatTimeAgo = (timestamp) => {\r\n    const now = new Date()\r\n    const notificationTime = new Date(timestamp)\r\n    const diffInMinutes = Math.floor((now - notificationTime) / (1000 * 60))\r\n\r\n    if (diffInMinutes < 1) {\r\n      return language === 'ar' ? 'الآن' : 'now'\r\n    } else if (diffInMinutes < 60) {\r\n      return language === 'ar' ? `منذ ${diffInMinutes} دقيقة` : `${diffInMinutes}m ago`\r\n    } else if (diffInMinutes < 1440) {\r\n      const hours = Math.floor(diffInMinutes / 60)\r\n      return language === 'ar' ? `منذ ${hours} ساعة` : `${hours}h ago`\r\n    } else {\r\n      const days = Math.floor(diffInMinutes / 1440)\r\n      return language === 'ar' ? `منذ ${days} يوم` : `${days}d ago`\r\n    }\r\n  }\r\n\r\n  const filteredNotifications = notifications.filter(notification => {\r\n    if (filter === 'unread') return !notification.read\r\n    if (filter === 'orders') return notification.type.includes('order') || notification.type.includes('payment') || notification.type.includes('shipping')\r\n    if (filter === 'customization') return notification.type.includes('customization')\r\n    return true\r\n  })\r\n\r\n  const displayedNotifications = filteredNotifications.slice(0, maxDisplayNotifications)\r\n\r\n  return (\r\n    <div className=\"relative\" ref={bellRef}>\r\n      {/* Bell Icon */}\r\n      <motion.button\r\n        whileHover={{ scale: 1.05 }}\r\n        whileTap={{ scale: 0.95 }}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-foreground/70 hover:text-foreground transition-colors rounded-full hover:bg-surface/50\"\r\n      >\r\n        <motion.div\r\n          animate={unreadCount > 0 ? { rotate: [0, -10, 10, -10, 0] } : {}}\r\n          transition={{ duration: 0.5, repeat: unreadCount > 0 ? 2 : 0, repeatDelay: 3 }}\r\n        >\r\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-5 5v-5zM4 19v-7a6 6 0 0112 0v7\" />\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 21c0 .6.4 1 1 1h4c.6 0 1-.4 1-1\" />\r\n          </svg>\r\n        </motion.div>\r\n\r\n        {/* Unread Badge */}\r\n        {unreadCount > 0 && (\r\n          <motion.span\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold\"\r\n          >\r\n            {unreadCount > 9 ? '9+' : unreadCount}\r\n          </motion.span>\r\n        )}\r\n      </motion.button>\r\n\r\n      {/* Dropdown */}\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: 10 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 10 }}\r\n            className={`absolute ${isRTL ? 'left-0' : 'right-0'} mt-2 w-96 bg-surface border border-border rounded-xl shadow-lg z-50 max-h-[500px] overflow-hidden`}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"p-4 border-b border-border\">\r\n              <div className={`flex items-center justify-between mb-3 ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                <h3 className=\"font-semibold text-foreground\">\r\n                  {t('notifications.title', 'Notifications')}\r\n                </h3>\r\n                {unreadCount > 0 && (\r\n                  <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    onClick={markAllAsRead}\r\n                    className=\"text-sm text-primary hover:text-primary/80 font-medium\"\r\n                  >\r\n                    {t('notifications.markAllRead', 'Mark all read')}\r\n                  </motion.button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Filter Tabs */}\r\n              <div className={`flex gap-1 bg-background/50 p-1 rounded-lg ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                {[\r\n                  { key: 'all', label: t('notifications.all', 'All') },\r\n                  { key: 'unread', label: t('notifications.unread', 'Unread') },\r\n                  { key: 'orders', label: t('notifications.orders', 'Orders') },\r\n                  { key: 'customization', label: t('notifications.customization', 'Custom') }\r\n                ].map((tab) => (\r\n                  <button\r\n                    key={tab.key}\r\n                    onClick={() => setFilter(tab.key)}\r\n                    className={`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${\r\n                      filter === tab.key\r\n                        ? 'bg-primary text-primary-foreground'\r\n                        : 'text-foreground/60 hover:text-foreground hover:bg-surface/50'\r\n                    }`}\r\n                  >\r\n                    {tab.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notifications List */}\r\n            <div className=\"overflow-y-auto max-h-80\">\r\n              {displayedNotifications.length === 0 ? (\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"text-4xl mb-2\">🔔</div>\r\n                  <p className=\"text-foreground/60\">\r\n                    {filter === 'unread' \r\n                      ? t('notifications.noUnread', 'No unread notifications')\r\n                      : t('notifications.noNotifications', 'No notifications yet')\r\n                    }\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"divide-y divide-border\">\r\n                  {displayedNotifications.map((notification) => (\r\n                    <motion.div\r\n                      key={notification.id}\r\n                      initial={{ opacity: 0, x: isRTL ? 20 : -20 }}\r\n                      animate={{ opacity: 1, x: 0 }}\r\n                      className={`p-4 hover:bg-background/50 transition-colors cursor-pointer ${\r\n                        !notification.read ? 'bg-primary/5' : ''\r\n                      }`}\r\n                      onClick={() => !notification.read && markAsRead(notification.id)}\r\n                    >\r\n                      <div className={`flex gap-3 ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                        <div className=\"flex-shrink-0\">\r\n                          <span className=\"text-xl\">{notification.icon}</span>\r\n                          {!notification.read && (\r\n                            <div className=\"w-2 h-2 bg-primary rounded-full mt-1 mx-auto\"></div>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className={`flex-1 min-w-0 ${isRTL ? 'text-right' : 'text-left'}`}>\r\n                          <div className={`flex items-start justify-between gap-2 ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                            <h4 className={`font-medium text-foreground truncate ${!notification.read ? 'font-semibold' : ''}`}>\r\n                              {notification.title}\r\n                            </h4>\r\n                            <div className={`flex items-center gap-2 flex-shrink-0 ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                              <span className=\"text-xs text-foreground/50\">\r\n                                {formatTimeAgo(notification.createdAt)}\r\n                              </span>\r\n                              <motion.button\r\n                                whileHover={{ scale: 1.1 }}\r\n                                whileTap={{ scale: 0.9 }}\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation()\r\n                                  deleteNotification(notification.id)\r\n                                }}\r\n                                className=\"text-foreground/40 hover:text-red-500 transition-colors\"\r\n                              >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                                </svg>\r\n                              </motion.button>\r\n                            </div>\r\n                          </div>\r\n                          <p className=\"text-sm text-foreground/70 mt-1 line-clamp-2\">\r\n                            {notification.message}\r\n                          </p>\r\n                          {notification.priority === 'urgent' && (\r\n                            <span className=\"inline-block mt-2 px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full font-medium\">\r\n                              {t('notifications.urgent', 'Urgent')}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </motion.div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            {filteredNotifications.length > maxDisplayNotifications && (\r\n              <div className=\"p-3 border-t border-border text-center\">\r\n                <button className=\"text-sm text-primary hover:text-primary/80 font-medium\">\r\n                  {t('notifications.viewAll', 'View all notifications')}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotificationBell","import React, { createContext, useContext, useReducer, useCallback } from 'react'\r\n\r\n// Search context\r\nconst SearchContext = createContext()\r\nexport const SEARCH_TYPES = {\r\n  PRODUCTS: 'products',\r\n  CATEGORIES: 'categories',\r\n  BRANDS: 'brands',\r\n  COLLECTIONS: 'collections',\r\n  ALL: 'all'\r\n}\r\n\r\n// Search result types\r\nexport const RESULT_TYPES = {\r\n  PRODUCT: 'product',\r\n  CATEGORY: 'category',\r\n  BRAND: 'brand',\r\n  COLLECTION: 'collection',\r\n  SUGGESTION: 'suggestion'\r\n}\r\n\r\n// Search actions\r\nconst SEARCH_ACTIONS = {\r\n  SET_QUERY: 'SET_QUERY',\r\n  SET_RESULTS: 'SET_RESULTS',\r\n  SET_SUGGESTIONS: 'SET_SUGGESTIONS',\r\n  SET_LOADING: 'SET_LOADING',\r\n  SET_FILTERS: 'SET_FILTERS',\r\n  ADD_TO_HISTORY: 'ADD_TO_HISTORY',\r\n  CLEAR_HISTORY: 'CLEAR_HISTORY',\r\n  SET_POPULAR_SEARCHES: 'SET_POPULAR_SEARCHES'\r\n}\r\n\r\nconst initialState = {\r\n  query: '',\r\n  results: [],\r\n  suggestions: [],\r\n  loading: false,\r\n  filters: {\r\n    type: SEARCH_TYPES.ALL,\r\n    segment: null,\r\n    priceRange: null,\r\n    sortBy: 'relevance'\r\n  },\r\n  searchHistory: [],\r\n  popularSearches: [],\r\n  totalResults: 0\r\n}\r\n\r\n// Mock data for demonstration\r\nconst MOCK_PRODUCTS = [\r\n  // Leather products\r\n  { id: 1, name: 'Premium Leather Wallet', nameAr: 'محفظة جلدية فاخرة', category: 'Wallets', categoryAr: 'محافظ', segment: 'leather', price: 299, brand: 'IVOLEX', keywords: ['wallet', 'leather', 'premium', 'men', 'brown'] },\r\n  { id: 2, name: 'Handcrafted Leather Bag', nameAr: 'حقيبة جلدية مصنوعة يدوياً', category: 'Bags', categoryAr: 'حقائب', segment: 'leather', price: 899, brand: 'IVOLEX', keywords: ['bag', 'leather', 'handcrafted', 'women', 'black'] },\r\n  { id: 3, name: 'Executive Leather Briefcase', nameAr: 'حقيبة أعمال جلدية تنفيذية', category: 'Business', categoryAr: 'أعمال', segment: 'leather', price: 1299, brand: 'IVOLEX', keywords: ['briefcase', 'leather', 'executive', 'business', 'professional'] },\r\n  { id: 4, name: 'Vintage Leather Jacket', nameAr: 'جاكيت جلدي عتيق', category: 'Clothing', categoryAr: 'ملابس', segment: 'leather', price: 1899, brand: 'IVOLEX', keywords: ['jacket', 'leather', 'vintage', 'clothing', 'style'] },\r\n  \r\n  // Electronics products\r\n  { id: 5, name: 'Smart Wireless Headphones', nameAr: 'سماعات لاسلكية ذكية', category: 'Audio', categoryAr: 'صوتيات', segment: 'electronics', price: 599, brand: 'TechPro', keywords: ['headphones', 'wireless', 'smart', 'audio', 'bluetooth'] },\r\n  { id: 6, name: '4K Ultra HD Monitor', nameAr: 'شاشة عالية الوضوح 4K', category: 'Displays', categoryAr: 'شاشات', segment: 'electronics', price: 1499, brand: 'ViewMaster', keywords: ['monitor', '4k', 'display', 'uhd', 'gaming'] },\r\n  { id: 7, name: 'Gaming Mechanical Keyboard', nameAr: 'لوحة مفاتيح ميكانيكية للألعاب', category: 'Gaming', categoryAr: 'ألعاب', segment: 'electronics', price: 399, brand: 'GameTech', keywords: ['keyboard', 'mechanical', 'gaming', 'rgb', 'switches'] },\r\n  { id: 8, name: 'Professional Drone Camera', nameAr: 'طائرة درون احترافية بكاميرا', category: 'Cameras', categoryAr: 'كاميرات', segment: 'electronics', price: 2299, brand: 'SkyTech', keywords: ['drone', 'camera', 'professional', 'aerial', 'photography'] },\r\n  \r\n  // Furniture products\r\n  { id: 9, name: 'Modern Executive Desk', nameAr: 'مكتب تنفيذي حديث', category: 'Office', categoryAr: 'مكتب', segment: 'furniture', price: 1899, brand: 'ModernSpace', keywords: ['desk', 'executive', 'modern', 'office', 'workspace'] },\r\n  { id: 10, name: 'Luxury Dining Table Set', nameAr: 'طقم طاولة طعام فاخر', category: 'Dining', categoryAr: 'طعام', segment: 'furniture', price: 3499, brand: 'LuxeHome', keywords: ['dining', 'table', 'luxury', 'set', 'wooden'] },\r\n  { id: 11, name: 'Ergonomic Office Chair', nameAr: 'كرسي مكتب مريح', category: 'Seating', categoryAr: 'جلوس', segment: 'furniture', price: 899, brand: 'ComfortPlus', keywords: ['chair', 'office', 'ergonomic', 'comfortable', 'adjustable'] },\r\n  { id: 12, name: 'Contemporary Sofa Set', nameAr: 'طقم أريكة معاصر', category: 'Living Room', categoryAr: 'غرفة معيشة', segment: 'furniture', price: 2799, brand: 'StyleHome', keywords: ['sofa', 'contemporary', 'living room', 'comfort', 'fabric'] }\r\n]\r\n\r\nconst MOCK_CATEGORIES = [\r\n  { id: 'wallets', name: 'Wallets', nameAr: 'محافظ', segment: 'leather' },\r\n  { id: 'bags', name: 'Bags', nameAr: 'حقائب', segment: 'leather' },\r\n  { id: 'audio', name: 'Audio', nameAr: 'صوتيات', segment: 'electronics' },\r\n  { id: 'displays', name: 'Displays', nameAr: 'شاشات', segment: 'electronics' },\r\n  { id: 'office', name: 'Office Furniture', nameAr: 'أثاث مكتبي', segment: 'furniture' },\r\n  { id: 'living', name: 'Living Room', nameAr: 'غرفة معيشة', segment: 'furniture' }\r\n]\r\n\r\nconst MOCK_BRANDS = [\r\n  { id: 'ivolex', name: 'IVOLEX', segment: 'leather' },\r\n  { id: 'techpro', name: 'TechPro', segment: 'electronics' },\r\n  { id: 'modernspace', name: 'ModernSpace', segment: 'furniture' }\r\n]\r\n\r\n// Fuzzy matching algorithm\r\nconst fuzzyMatch = (query, target, threshold = 0.6) => {\r\n  if (!query || !target) return { match: false, score: 0 }\r\n  \r\n  const queryLower = query.toLowerCase()\r\n  const targetLower = target.toLowerCase()\r\n  \r\n  // Exact match\r\n  if (targetLower.includes(queryLower)) {\r\n    return { match: true, score: 1 }\r\n  }\r\n  \r\n  // Levenshtein distance-based fuzzy matching\r\n  const distance = levenshteinDistance(queryLower, targetLower)\r\n  const maxLength = Math.max(queryLower.length, targetLower.length)\r\n  const similarity = 1 - (distance / maxLength)\r\n  \r\n  return {\r\n    match: similarity >= threshold,\r\n    score: similarity\r\n  }\r\n}\r\n\r\nconst levenshteinDistance = (str1, str2) => {\r\n  const matrix = []\r\n  \r\n  for (let i = 0; i <= str2.length; i++) {\r\n    matrix[i] = [i]\r\n  }\r\n  \r\n  for (let j = 0; j <= str1.length; j++) {\r\n    matrix[0][j] = j\r\n  }\r\n  \r\n  for (let i = 1; i <= str2.length; i++) {\r\n    for (let j = 1; j <= str1.length; j++) {\r\n      if (str2.charAt(i - 1) === str1.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1]\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1] + 1, // substitution\r\n          matrix[i][j - 1] + 1,     // insertion\r\n          matrix[i - 1][j] + 1      // deletion\r\n        )\r\n      }\r\n    }\r\n  }\r\n  \r\n  return matrix[str2.length][str1.length]\r\n}\r\n\r\n// Search reducer\r\nconst searchReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SEARCH_ACTIONS.SET_QUERY:\r\n      return { ...state, query: action.payload }\r\n    \r\n    case SEARCH_ACTIONS.SET_RESULTS:\r\n      return { \r\n        ...state, \r\n        results: action.payload.results,\r\n        totalResults: action.payload.total,\r\n        loading: false \r\n      }\r\n    \r\n    case SEARCH_ACTIONS.SET_SUGGESTIONS:\r\n      return { ...state, suggestions: action.payload }\r\n    \r\n    case SEARCH_ACTIONS.SET_LOADING:\r\n      return { ...state, loading: action.payload }\r\n    \r\n    case SEARCH_ACTIONS.SET_FILTERS:\r\n      return { \r\n        ...state, \r\n        filters: { ...state.filters, ...action.payload } \r\n      }\r\n    \r\n    case SEARCH_ACTIONS.ADD_TO_HISTORY: {\r\n      const newHistory = [\r\n        action.payload,\r\n        ...state.searchHistory.filter(item => item !== action.payload)\r\n      ].slice(0, 10) // Keep only last 10 searches\r\n      \r\n      return { ...state, searchHistory: newHistory }\r\n    }\r\n    \r\n    case SEARCH_ACTIONS.CLEAR_HISTORY:\r\n      return { ...state, searchHistory: [] }\r\n    \r\n    case SEARCH_ACTIONS.SET_POPULAR_SEARCHES:\r\n      return { ...state, popularSearches: action.payload }\r\n    \r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const SearchProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(searchReducer, initialState)\r\n  // const { language } = useI18n() // Disabled temporarily\r\n  // const { activeSegment } = useSegment() // Disabled temporarily\r\n  const language = 'en' // Default language\r\n\r\n  // Load search history from localStorage\r\n  React.useEffect(() => {\r\n    const savedHistory = localStorage.getItem('ivolex_search_history')\r\n    if (savedHistory) {\r\n      try {\r\n        const history = JSON.parse(savedHistory)\r\n        history.forEach(query => {\r\n          dispatch({ type: SEARCH_ACTIONS.ADD_TO_HISTORY, payload: query })\r\n        })\r\n      } catch (error) {\r\n        console.error('Failed to load search history:', error)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Save search history to localStorage\r\n  React.useEffect(() => {\r\n    localStorage.setItem('ivolex_search_history', JSON.stringify(state.searchHistory))\r\n  }, [state.searchHistory])\r\n\r\n  // Perform search with fuzzy matching\r\n  const performSearch = useCallback(async (query, filters = {}) => {\r\n    if (!query.trim()) {\r\n      dispatch({ type: SEARCH_ACTIONS.SET_RESULTS, payload: { results: [], total: 0 } })\r\n      return\r\n    }\r\n\r\n    dispatch({ type: SEARCH_ACTIONS.SET_LOADING, payload: true })\r\n\r\n    // Simulate API delay\r\n    await new Promise(resolve => setTimeout(resolve, 300))\r\n\r\n    const searchQuery = query.toLowerCase().trim()\r\n    const mergedFilters = { ...state.filters, ...filters }\r\n    \r\n    let searchResults = []\r\n\r\n    // Search products\r\n    if (mergedFilters.type === SEARCH_TYPES.ALL || mergedFilters.type === SEARCH_TYPES.PRODUCTS) {\r\n      const productResults = MOCK_PRODUCTS.filter(product => {\r\n        // Segment filter\r\n        if (mergedFilters.segment && product.segment !== mergedFilters.segment) {\r\n          return false\r\n        }\r\n\r\n        // Text matching\r\n        const nameMatch = fuzzyMatch(searchQuery, language === 'ar' ? product.nameAr : product.name)\r\n        const categoryMatch = fuzzyMatch(searchQuery, language === 'ar' ? product.categoryAr : product.category)\r\n        const brandMatch = fuzzyMatch(searchQuery, product.brand)\r\n        const keywordMatch = product.keywords.some(keyword => \r\n          fuzzyMatch(searchQuery, keyword).match\r\n        )\r\n\r\n        return nameMatch.match || categoryMatch.match || brandMatch.match || keywordMatch\r\n      }).map(product => ({\r\n        ...product,\r\n        type: RESULT_TYPES.PRODUCT,\r\n        relevanceScore: calculateRelevanceScore(searchQuery, product)\r\n      }))\r\n\r\n      searchResults.push(...productResults)\r\n    }\r\n\r\n    // Search categories\r\n    if (mergedFilters.type === SEARCH_TYPES.ALL || mergedFilters.type === SEARCH_TYPES.CATEGORIES) {\r\n      const categoryResults = MOCK_CATEGORIES.filter(category => {\r\n        if (mergedFilters.segment && category.segment !== mergedFilters.segment) {\r\n          return false\r\n        }\r\n        \r\n        const nameMatch = fuzzyMatch(searchQuery, language === 'ar' ? category.nameAr : category.name)\r\n        return nameMatch.match\r\n      }).map(category => ({\r\n        ...category,\r\n        type: RESULT_TYPES.CATEGORY,\r\n        relevanceScore: fuzzyMatch(searchQuery, language === 'ar' ? category.nameAr : category.name).score\r\n      }))\r\n\r\n      searchResults.push(...categoryResults)\r\n    }\r\n\r\n    // Search brands\r\n    if (mergedFilters.type === SEARCH_TYPES.ALL || mergedFilters.type === SEARCH_TYPES.BRANDS) {\r\n      const brandResults = MOCK_BRANDS.filter(brand => {\r\n        if (mergedFilters.segment && brand.segment !== mergedFilters.segment) {\r\n          return false\r\n        }\r\n        \r\n        const nameMatch = fuzzyMatch(searchQuery, brand.name)\r\n        return nameMatch.match\r\n      }).map(brand => ({\r\n        ...brand,\r\n        type: RESULT_TYPES.BRAND,\r\n        relevanceScore: fuzzyMatch(searchQuery, brand.name).score\r\n      }))\r\n\r\n      searchResults.push(...brandResults)\r\n    }\r\n\r\n    // Sort by relevance score\r\n    searchResults.sort((a, b) => b.relevanceScore - a.relevanceScore)\r\n\r\n    // Apply price filter if specified\r\n    if (mergedFilters.priceRange) {\r\n      searchResults = searchResults.filter(result => {\r\n        if (result.type !== RESULT_TYPES.PRODUCT || !result.price) return true\r\n        \r\n        const [min, max] = mergedFilters.priceRange.split('-').map(Number)\r\n        return result.price >= min && (max ? result.price <= max : true)\r\n      })\r\n    }\r\n\r\n    dispatch({ \r\n      type: SEARCH_ACTIONS.SET_RESULTS, \r\n      payload: { results: searchResults, total: searchResults.length }\r\n    })\r\n\r\n    // Add to search history\r\n    dispatch({ type: SEARCH_ACTIONS.ADD_TO_HISTORY, payload: query })\r\n  }, [state.filters, language])\r\n\r\n  // Calculate relevance score for products\r\n  const calculateRelevanceScore = (query, product) => {\r\n    const queryLower = query.toLowerCase()\r\n    let score = 0\r\n\r\n    // Name match (highest weight)\r\n    const nameMatch = fuzzyMatch(queryLower, language === 'ar' ? product.nameAr : product.name)\r\n    if (nameMatch.match) score += nameMatch.score * 3\r\n\r\n    // Category match\r\n    const categoryMatch = fuzzyMatch(queryLower, language === 'ar' ? product.categoryAr : product.category)\r\n    if (categoryMatch.match) score += categoryMatch.score * 2\r\n\r\n    // Brand match\r\n    const brandMatch = fuzzyMatch(queryLower, product.brand)\r\n    if (brandMatch.match) score += brandMatch.score * 1.5\r\n\r\n    // Keyword matches\r\n    product.keywords.forEach(keyword => {\r\n      const keywordMatch = fuzzyMatch(queryLower, keyword)\r\n      if (keywordMatch.match) score += keywordMatch.score * 1\r\n    })\r\n\r\n    return score\r\n  }\r\n\r\n  // Generate search suggestions\r\n  const generateSuggestions = useCallback(async (query) => {\r\n    if (!query.trim() || query.length < 2) {\r\n      dispatch({ type: SEARCH_ACTIONS.SET_SUGGESTIONS, payload: [] })\r\n      return\r\n    }\r\n\r\n    const queryLower = query.toLowerCase()\r\n    const suggestions = []\r\n\r\n    // Product name suggestions\r\n    MOCK_PRODUCTS.forEach(product => {\r\n      const name = language === 'ar' ? product.nameAr : product.name\r\n      if (name.toLowerCase().includes(queryLower)) {\r\n        suggestions.push({\r\n          text: name,\r\n          type: 'product',\r\n          id: product.id,\r\n          segment: product.segment\r\n        })\r\n      }\r\n    })\r\n\r\n    // Category suggestions\r\n    MOCK_CATEGORIES.forEach(category => {\r\n      const name = language === 'ar' ? category.nameAr : category.name\r\n      if (name.toLowerCase().includes(queryLower)) {\r\n        suggestions.push({\r\n          text: name,\r\n          type: 'category',\r\n          id: category.id,\r\n          segment: category.segment\r\n        })\r\n      }\r\n    })\r\n\r\n    // Brand suggestions\r\n    MOCK_BRANDS.forEach(brand => {\r\n      if (brand.name.toLowerCase().includes(queryLower)) {\r\n        suggestions.push({\r\n          text: brand.name,\r\n          type: 'brand',\r\n          id: brand.id,\r\n          segment: brand.segment\r\n        })\r\n      }\r\n    })\r\n\r\n    // Remove duplicates and limit results\r\n    const uniqueSuggestions = suggestions\r\n      .filter((suggestion, index, self) => \r\n        index === self.findIndex(s => s.text === suggestion.text)\r\n      )\r\n      .slice(0, 8)\r\n\r\n    dispatch({ type: SEARCH_ACTIONS.SET_SUGGESTIONS, payload: uniqueSuggestions })\r\n  }, [language])\r\n\r\n  const setQuery = (query) => {\r\n    dispatch({ type: SEARCH_ACTIONS.SET_QUERY, payload: query })\r\n  }\r\n\r\n  const setFilters = (filters) => {\r\n    dispatch({ type: SEARCH_ACTIONS.SET_FILTERS, payload: filters })\r\n  }\r\n\r\n  const clearHistory = () => {\r\n    dispatch({ type: SEARCH_ACTIONS.CLEAR_HISTORY })\r\n    localStorage.removeItem('ivolex_search_history')\r\n  }\r\n\r\n  const value = {\r\n    ...state,\r\n    performSearch,\r\n    generateSuggestions,\r\n    setQuery,\r\n    setFilters,\r\n    clearHistory,\r\n    SEARCH_TYPES,\r\n    RESULT_TYPES\r\n  }\r\n\r\n  return (\r\n    <SearchContext.Provider value={value}>\r\n      {children}\r\n    </SearchContext.Provider>\r\n  )\r\n}\r\n\r\nexport const useSearch = () => {\r\n  const context = useContext(SearchContext)\r\n  if (!context) {\r\n    throw new Error('useSearch must be used within a SearchProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport default SearchContext","import { useState, useRef, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { Search, X, Clock, TrendingUp, Filter, ArrowRight } from 'lucide-react'\r\nimport { useSearch } from '../../ui/contexts/SearchContext'\r\nimport { useI18n } from '../../ui/contexts/I18nContext'\r\nimport { useSegment } from '../../ui/contexts/SegmentContext'\r\n\r\nconst EnhancedSearch = ({ onResultSelect, placeholder, showFilters = true, className = '' }) => {\r\n  const {\r\n    query,\r\n    suggestions,\r\n    searchHistory,\r\n    loading,\r\n    filters,\r\n    performSearch,\r\n    generateSuggestions,\r\n    setQuery,\r\n    setFilters,\r\n    clearHistory,\r\n    SEARCH_TYPES\r\n  } = useSearch()\r\n\r\n  const { t, isRTL } = useI18n()\r\n  const { theme } = useSegment()\r\n  \r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [localQuery, setLocalQuery] = useState(query)\r\n  const [showFiltersPanel, setShowFiltersPanel] = useState(false)\r\n  const searchRef = useRef(null)\r\n  const inputRef = useRef(null)\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n        setIsOpen(false)\r\n        setShowFiltersPanel(false)\r\n      }\r\n    }\r\n\r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => document.removeEventListener('mousedown', handleClickOutside)\r\n  }, [])\r\n\r\n  // Generate suggestions when query changes\r\n  useEffect(() => {\r\n    const debounceTimer = setTimeout(() => {\r\n      if (localQuery.trim() && isOpen) {\r\n        generateSuggestions(localQuery)\r\n      }\r\n    }, 300)\r\n\r\n    return () => clearTimeout(debounceTimer)\r\n  }, [localQuery, generateSuggestions, isOpen])\r\n\r\n  const handleInputChange = (e) => {\r\n    const value = e.target.value\r\n    setLocalQuery(value)\r\n    setQuery(value)\r\n    \r\n    if (value.trim()) {\r\n      setIsOpen(true)\r\n    }\r\n  }\r\n\r\n  const handleSearch = (searchQuery = localQuery) => {\r\n    if (searchQuery.trim()) {\r\n      performSearch(searchQuery)\r\n      setIsOpen(false)\r\n      onResultSelect && onResultSelect({ type: 'search', query: searchQuery })\r\n    }\r\n  }\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    setLocalQuery(suggestion.text)\r\n    setQuery(suggestion.text)\r\n    handleSearch(suggestion.text)\r\n    onResultSelect && onResultSelect(suggestion)\r\n  }\r\n\r\n  const handleHistoryClick = (historyQuery) => {\r\n    setLocalQuery(historyQuery)\r\n    setQuery(historyQuery)\r\n    handleSearch(historyQuery)\r\n  }\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearch()\r\n    } else if (e.key === 'Escape') {\r\n      setIsOpen(false)\r\n    }\r\n  }\r\n\r\n  const clearInput = () => {\r\n    setLocalQuery('')\r\n    setQuery('')\r\n    inputRef.current?.focus()\r\n  }\r\n\r\n  const handleFilterChange = (filterKey, value) => {\r\n    setFilters({ [filterKey]: value })\r\n    if (localQuery.trim()) {\r\n      handleSearch()\r\n    }\r\n  }\r\n\r\n  const getSuggestionIcon = (type) => {\r\n    switch (type) {\r\n      case 'product':\r\n        return '📦'\r\n      case 'category':\r\n        return '📂'\r\n      case 'brand':\r\n        return '🏷️'\r\n      default:\r\n        return '🔍'\r\n    }\r\n  }\r\n\r\n  const priceRanges = [\r\n    { label: t('search.allPrices', 'All Prices'), value: null },\r\n    { label: t('search.under500', 'Under 500 SAR'), value: '0-500' },\r\n    { label: t('search.500to1000', '500 - 1,000 SAR'), value: '500-1000' },\r\n    { label: t('search.1000to2000', '1,000 - 2,000 SAR'), value: '1000-2000' },\r\n    { label: t('search.over2000', 'Over 2,000 SAR'), value: '2000-' }\r\n  ]\r\n\r\n  const sortOptions = [\r\n    { label: t('search.relevance', 'Relevance'), value: 'relevance' },\r\n    { label: t('search.priceLowHigh', 'Price: Low to High'), value: 'price_asc' },\r\n    { label: t('search.priceHighLow', 'Price: High to Low'), value: 'price_desc' },\r\n    { label: t('search.newest', 'Newest First'), value: 'newest' },\r\n    { label: t('search.popular', 'Most Popular'), value: 'popular' }\r\n  ]\r\n\r\n  return (\r\n    <div className={`relative ${className}`} ref={searchRef}>\r\n      {/* Main Search Input */}\r\n      <div className=\"relative\">\r\n        <div \r\n          className=\"relative flex items-center bg-surface border border-border rounded-xl overflow-hidden transition-all duration-200 focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary\"\r\n          style={{ \r\n            background: `linear-gradient(135deg, ${theme.colors.surface}E6 0%, ${theme.colors.background}CC 100%)`,\r\n            backdropFilter: 'blur(10px)'\r\n          }}\r\n        >\r\n          <Search \r\n            className={`absolute top-1/2 transform -translate-y-1/2 text-foreground/40 ${\r\n              isRTL ? 'right-4' : 'left-4'\r\n            }`} \r\n            size={20} \r\n          />\r\n          \r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={localQuery}\r\n            onChange={handleInputChange}\r\n            onFocus={() => setIsOpen(true)}\r\n            onKeyDown={handleKeyPress}\r\n            placeholder={placeholder || t('search.placeholder', 'Search products, categories, brands...')}\r\n            className={`w-full py-3 bg-transparent text-foreground placeholder-foreground/40 focus:outline-none ${\r\n              isRTL ? 'pr-12 pl-16 text-right' : 'pl-12 pr-16 text-left'\r\n            }`}\r\n            dir={isRTL ? 'rtl' : 'ltr'}\r\n          />\r\n\r\n          <div className={`absolute top-1/2 transform -translate-y-1/2 flex items-center gap-2 ${\r\n            isRTL ? 'left-4' : 'right-4'\r\n          }`}>\r\n            {localQuery && (\r\n              <motion.button\r\n                initial={{ scale: 0 }}\r\n                animate={{ scale: 1 }}\r\n                exit={{ scale: 0 }}\r\n                onClick={clearInput}\r\n                className=\"p-1 text-foreground/40 hover:text-foreground transition-colors rounded-full hover:bg-background/50\"\r\n              >\r\n                <X size={16} />\r\n              </motion.button>\r\n            )}\r\n            \r\n            {showFilters && (\r\n              <motion.button\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                onClick={() => setShowFiltersPanel(!showFiltersPanel)}\r\n                className={`p-2 text-foreground/60 hover:text-primary transition-colors rounded-lg hover:bg-background/50 ${\r\n                  showFiltersPanel ? 'text-primary bg-primary/10' : ''\r\n                }`}\r\n              >\r\n                <Filter size={16} />\r\n              </motion.button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Loading Indicator */}\r\n        {loading && (\r\n          <div className={`absolute top-full mt-1 ${isRTL ? 'right-4' : 'left-4'}`}>\r\n            <div className=\"flex items-center gap-2 text-sm text-foreground/60\">\r\n              <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent\"></div>\r\n              {t('search.searching', 'Searching...')}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Filters Panel */}\r\n      <AnimatePresence>\r\n        {showFiltersPanel && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className={`absolute top-full mt-2 w-full bg-surface border border-border rounded-xl shadow-lg p-4 z-50 ${\r\n              isRTL ? 'right-0' : 'left-0'\r\n            }`}\r\n          >\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {/* Search Type Filter */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  {t('search.searchIn', 'Search in')}\r\n                </label>\r\n                <select\r\n                  value={filters.type}\r\n                  onChange={(e) => handleFilterChange('type', e.target.value)}\r\n                  className=\"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                >\r\n                  <option value={SEARCH_TYPES.ALL}>{t('search.all', 'All')}</option>\r\n                  <option value={SEARCH_TYPES.PRODUCTS}>{t('search.products', 'Products')}</option>\r\n                  <option value={SEARCH_TYPES.CATEGORIES}>{t('search.categories', 'Categories')}</option>\r\n                  <option value={SEARCH_TYPES.BRANDS}>{t('search.brands', 'Brands')}</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Price Range Filter */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  {t('search.priceRange', 'Price Range')}\r\n                </label>\r\n                <select\r\n                  value={filters.priceRange || ''}\r\n                  onChange={(e) => handleFilterChange('priceRange', e.target.value || null)}\r\n                  className=\"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                >\r\n                  {priceRanges.map((range) => (\r\n                    <option key={range.value || 'all'} value={range.value || ''}>\r\n                      {range.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* Sort By Filter */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  {t('search.sortBy', 'Sort by')}\r\n                </label>\r\n                <select\r\n                  value={filters.sortBy}\r\n                  onChange={(e) => handleFilterChange('sortBy', e.target.value)}\r\n                  className=\"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                >\r\n                  {sortOptions.map((option) => (\r\n                    <option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Search Dropdown - Make responsive for mobile */}\r\n      <AnimatePresence>\r\n        {isOpen && !showFiltersPanel && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className={`absolute top-full mt-2 w-full bg-surface border border-border rounded-xl shadow-lg overflow-hidden z-50 max-h-96 ${\r\n              isRTL ? 'right-0' : 'left-0'\r\n            }`}\r\n          >\r\n            {localQuery.trim() ? (\r\n              // Show suggestions when there's a query\r\n              <div>\r\n                {suggestions.length > 0 ? (\r\n                  <>\r\n                    <div className=\"px-4 py-2 bg-background/50 border-b border-border\">\r\n                      <span className=\"text-sm font-medium text-foreground/60\">\r\n                        {t('search.suggestions', 'Suggestions')}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"max-h-64 overflow-y-auto\">\r\n                      {suggestions.map((suggestion, index) => (\r\n                        <motion.button\r\n                          key={`${suggestion.type}-${suggestion.id}-${index}`}\r\n                          initial={{ opacity: 0, x: isRTL ? 20 : -20 }}\r\n                          animate={{ opacity: 1, x: 0 }}\r\n                          transition={{ delay: index * 0.05 }}\r\n                          onClick={() => handleSuggestionClick(suggestion)}\r\n                          className={`w-full px-4 py-3 text-left hover:bg-background/50 transition-colors flex items-center gap-3 ${\r\n                            isRTL ? 'flex-row-reverse text-right' : ''\r\n                          }`}\r\n                        >\r\n                          <span className=\"text-lg\">{getSuggestionIcon(suggestion.type)}</span>\r\n                          <div className=\"flex-1\">\r\n                            <span className=\"text-foreground\">{suggestion.text}</span>\r\n                            <span className=\"text-xs text-foreground/50 block capitalize\">\r\n                              {t(`search.${suggestion.type}`, suggestion.type)}\r\n                            </span>\r\n                          </div>\r\n                          <ArrowRight \r\n                            size={16} \r\n                            className={`text-foreground/30 ${isRTL ? 'rotate-180' : ''}`} \r\n                          />\r\n                        </motion.button>\r\n                      ))}\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"px-4 py-8 text-center\">\r\n                    <Search className=\"mx-auto h-8 w-8 text-foreground/30 mb-2\" />\r\n                    <p className=\"text-foreground/60\">\r\n                      {t('search.noSuggestions', 'No suggestions found')}\r\n                    </p>\r\n                    <button\r\n                      onClick={() => handleSearch()}\r\n                      className=\"mt-2 text-primary hover:text-primary/80 font-medium text-sm\"\r\n                    >\r\n                      {t('search.searchAnyway', 'Search anyway')}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              // Show search history and popular searches when no query\r\n              <div>\r\n                {searchHistory.length > 0 && (\r\n                  <>\r\n                    <div className=\"px-4 py-2 bg-background/50 border-b border-border flex items-center justify-between\">\r\n                      <span className=\"text-sm font-medium text-foreground/60 flex items-center gap-2\">\r\n                        <Clock size={14} />\r\n                        {t('search.recentSearches', 'Recent Searches')}\r\n                      </span>\r\n                      <button\r\n                        onClick={clearHistory}\r\n                        className=\"text-xs text-foreground/40 hover:text-foreground transition-colors\"\r\n                      >\r\n                        {t('search.clear', 'Clear')}\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"max-h-48 overflow-y-auto\">\r\n                      {searchHistory.slice(0, 5).map((historyQuery, index) => (\r\n                        <motion.button\r\n                          key={`history-${index}`}\r\n                          initial={{ opacity: 0, x: isRTL ? 20 : -20 }}\r\n                          animate={{ opacity: 1, x: 0 }}\r\n                          transition={{ delay: index * 0.05 }}\r\n                          onClick={() => handleHistoryClick(historyQuery)}\r\n                          className={`w-full px-4 py-3 text-left hover:bg-background/50 transition-colors flex items-center gap-3 ${\r\n                            isRTL ? 'flex-row-reverse text-right' : ''\r\n                          }`}\r\n                        >\r\n                          <Clock size={16} className=\"text-foreground/30\" />\r\n                          <span className=\"text-foreground flex-1\">{historyQuery}</span>\r\n                          <ArrowRight \r\n                            size={14} \r\n                            className={`text-foreground/30 ${isRTL ? 'rotate-180' : ''}`} \r\n                          />\r\n                        </motion.button>\r\n                      ))}\r\n                    </div>\r\n                  </>\r\n                )}\r\n\r\n                {/* Popular/Trending Searches */}\r\n                <div className=\"px-4 py-2 border-t border-border\">\r\n                  <span className=\"text-sm font-medium text-foreground/60 flex items-center gap-2\">\r\n                    <TrendingUp size={14} />\r\n                    {t('search.popularSearches', 'Popular Searches')}\r\n                  </span>\r\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                    {[\r\n                      'leather wallet',\r\n                      'gaming setup',\r\n                      'office chair',\r\n                      'headphones',\r\n                      'dining table'\r\n                    ].map((term, index) => (\r\n                      <motion.button\r\n                        key={term}\r\n                        initial={{ opacity: 0, scale: 0.8 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        transition={{ delay: index * 0.1 }}\r\n                        onClick={() => handleHistoryClick(term)}\r\n                        className=\"px-3 py-1 bg-background hover:bg-primary/10 text-foreground/70 hover:text-primary text-sm rounded-full border border-border transition-colors\"\r\n                      >\r\n                        {term}\r\n                      </motion.button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EnhancedSearch","import { useState } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { \r\n  Bell, \r\n  AlertTriangle, \r\n  Package, \r\n  X, \r\n  Check,\r\n  Clock,\r\n  TrendingDown,\r\n  Info\r\n} from 'lucide-react'\r\nimport { useInventory } from '../../ui/contexts/InventoryContext'\r\nimport { useSegment } from '../../ui/contexts/SegmentContext'\r\n\r\nconst InventoryAlerts = ({ isOpen, onClose }) => {\r\n  const { alerts, allAlerts, acknowledgeAlert, clearAlerts } = useInventory()\r\n  const { theme } = useSegment()\r\n  const [filter, setFilter] = useState('active') // active, all, acknowledged\r\n\r\n  const filteredAlerts = (() => {\r\n    switch (filter) {\r\n      case 'active':\r\n        return alerts\r\n      case 'all':\r\n        return allAlerts\r\n      case 'acknowledged':\r\n        return allAlerts.filter(alert => alert.acknowledged)\r\n      default:\r\n        return alerts\r\n    }\r\n  })()\r\n\r\n  const getAlertIcon = (type) => {\r\n    switch (type) {\r\n      case 'critical':\r\n        return <AlertTriangle className=\"w-5 h-5 text-red-500\" />\r\n      case 'low':\r\n        return <TrendingDown className=\"w-5 h-5 text-yellow-500\" />\r\n      case 'reorder':\r\n        return <Package className=\"w-5 h-5 text-blue-500\" />\r\n      default:\r\n        return <Info className=\"w-5 h-5 text-gray-500\" />\r\n    }\r\n  }\r\n\r\n  const getAlertColor = (type) => {\r\n    switch (type) {\r\n      case 'critical':\r\n        return 'border-red-200 bg-red-50'\r\n      case 'low':\r\n        return 'border-yellow-200 bg-yellow-50'\r\n      case 'reorder':\r\n        return 'border-blue-200 bg-blue-50'\r\n      default:\r\n        return 'border-gray-200 bg-gray-50'\r\n    }\r\n  }\r\n\r\n  const formatTime = (timestamp) => {\r\n    const date = new Date(timestamp)\r\n    const now = new Date()\r\n    const diffInMinutes = Math.floor((now - date) / (1000 * 60))\r\n    \r\n    if (diffInMinutes < 1) return 'Just now'\r\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`\r\n    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`\r\n    return date.toLocaleDateString()\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\r\n            onClick={onClose}\r\n          />\r\n\r\n          {/* Alert Panel */}\r\n          <motion.div\r\n            initial={{ x: '100%' }}\r\n            animate={{ x: 0 }}\r\n            exit={{ x: '100%' }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\r\n            className={`fixed right-0 top-0 h-full w-full max-w-md ${theme.cardBackground} ${theme.border} border-l z-50 flex flex-col shadow-2xl`}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-4 border-b\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Bell className=\"w-5 h-5 text-blue-500\" />\r\n                <h2 className={`text-lg font-semibold ${theme.text}`}>\r\n                  Inventory Alerts\r\n                </h2>\r\n                {alerts.length > 0 && (\r\n                  <span className=\"bg-red-500 text-white text-xs px-2 py-1 rounded-full\">\r\n                    {alerts.length}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <button\r\n                onClick={onClose}\r\n                className={`p-2 rounded-lg hover:bg-gray-100 transition-colors`}\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Filter Tabs */}\r\n            <div className=\"flex border-b\">\r\n              <button\r\n                onClick={() => setFilter('active')}\r\n                className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${\r\n                  filter === 'active'\r\n                    ? `${theme.accent} text-white`\r\n                    : `${theme.text} hover:bg-gray-50`\r\n                }`}\r\n              >\r\n                Active ({alerts.length})\r\n              </button>\r\n              <button\r\n                onClick={() => setFilter('all')}\r\n                className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${\r\n                  filter === 'all'\r\n                    ? `${theme.accent} text-white`\r\n                    : `${theme.text} hover:bg-gray-50`\r\n                }`}\r\n              >\r\n                All ({allAlerts.length})\r\n              </button>\r\n              <button\r\n                onClick={() => setFilter('acknowledged')}\r\n                className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${\r\n                  filter === 'acknowledged'\r\n                    ? `${theme.accent} text-white`\r\n                    : `${theme.text} hover:bg-gray-50`\r\n                }`}\r\n              >\r\n                Read ({allAlerts.filter(a => a.acknowledged).length})\r\n              </button>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            {filter === 'active' && alerts.length > 0 && (\r\n              <div className=\"p-4 border-b\">\r\n                <button\r\n                  onClick={clearAlerts}\r\n                  className={`w-full px-4 py-2 text-sm rounded-lg ${theme.cardBackground} ${theme.border} hover:${theme.borderHover} transition-colors`}\r\n                >\r\n                  Clear All Alerts\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Alerts List */}\r\n            <div className=\"flex-1 overflow-y-auto\">\r\n              {filteredAlerts.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center h-full p-8 text-center\">\r\n                  <Bell className=\"w-16 h-16 text-gray-300 mb-4\" />\r\n                  <h3 className={`text-lg font-medium ${theme.text} mb-2`}>\r\n                    No alerts\r\n                  </h3>\r\n                  <p className={`text-sm ${theme.textSecondary}`}>\r\n                    {filter === 'active' \r\n                      ? 'All your inventory levels are healthy!'\r\n                      : filter === 'acknowledged'\r\n                      ? 'No acknowledged alerts yet'\r\n                      : 'No alerts have been generated'\r\n                    }\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"p-4 space-y-3\">\r\n                  {filteredAlerts.map((alert) => (\r\n                    <motion.div\r\n                      key={alert.id}\r\n                      initial={{ opacity: 0, y: 10 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      className={`p-4 rounded-lg border ${getAlertColor(alert.type)} ${\r\n                        alert.acknowledged ? 'opacity-60' : ''\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <div className=\"flex-shrink-0 mt-0.5\">\r\n                          {getAlertIcon(alert.type)}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-start justify-between gap-2\">\r\n                            <div className=\"flex-1\">\r\n                              <p className=\"text-sm font-medium text-gray-900\">\r\n                                {alert.productName}\r\n                              </p>\r\n                              <p className=\"text-sm text-gray-600 mt-1\">\r\n                                {alert.message}\r\n                              </p>\r\n                              <div className=\"flex items-center gap-4 mt-2 text-xs text-gray-500\">\r\n                                <div className=\"flex items-center gap-1\">\r\n                                  <Clock className=\"w-3 h-3\" />\r\n                                  {formatTime(alert.timestamp)}\r\n                                </div>\r\n                                <div>\r\n                                  Available: {alert.availableStock}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {!alert.acknowledged && (\r\n                              <button\r\n                                onClick={() => acknowledgeAlert(alert.id)}\r\n                                className=\"flex-shrink-0 p-1 text-gray-400 hover:text-green-500 transition-colors\"\r\n                                title=\"Mark as read\"\r\n                              >\r\n                                <Check className=\"w-4 h-4\" />\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </motion.div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className={`p-4 border-t ${theme.cardBackground}`}>\r\n              <div className=\"text-center\">\r\n                <p className={`text-xs ${theme.textSecondary}`}>\r\n                  Inventory alerts help you maintain optimal stock levels\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n\r\nexport default InventoryAlerts","import { useState, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { Search, ShoppingBag, Menu, X, Globe, ChevronDown, Package, User } from 'lucide-react'\r\nimport { FloatingSegmentSwitcher } from './SegmentSwitcher.jsx'\r\nimport { useSegment } from '../contexts/SegmentContext.jsx'\r\nimport { useI18n } from '../contexts/I18nContext.jsx'\r\nimport { useInventory } from '../contexts/InventoryContext.jsx'\r\nimport { useAuth } from '../contexts/AuthContext.jsx'\r\nimport NotificationBell from '../../components/ui/NotificationBell.jsx'\r\nimport EnhancedSearch from '../../components/search/EnhancedSearch.jsx'\r\nimport InventoryAlerts from '../../components/inventory/InventoryAlerts.jsx'\r\n\r\nconst NAVIGATION_ITEMS = [\r\n  { label: 'nav.home', href: '/', segment: 'all' },\r\n  { label: 'nav.shop', href: '/shop', segment: 'all' },\r\n  { label: 'nav.categories', href: '/categories', segment: 'all' },\r\n  { label: 'nav.customize', href: '/customize', segment: 'all' },\r\n  { label: 'nav.about', href: '/about', segment: 'all' },\r\n  { label: 'nav.contact', href: '/contact', segment: 'all' },\r\n]\r\n\r\nexport default function FloatingNavbar() {\r\n  const [isScrolled, setIsScrolled] = useState(false)\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\r\n  const [isSearchOpen, setIsSearchOpen] = useState(false)\r\n  const [isInventoryAlertsOpen, setIsInventoryAlertsOpen] = useState(false)\r\n  const [showCurrencyDropdown, setShowCurrencyDropdown] = useState(false)\r\n  const [showLanguageDropdown, setShowLanguageDropdown] = useState(false)\r\n  \r\n  const { theme } = useSegment()\r\n  const { alerts } = useInventory()\r\n  const { user, isAuthenticated } = useAuth()\r\n  const { \r\n    language, \r\n    currency, \r\n    languages, \r\n    currencies, \r\n    setLanguage, \r\n    setCurrency, \r\n    t, \r\n    isRTL\r\n  } = useI18n()\r\n\r\n  // Handle scroll effect\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setIsScrolled(window.scrollY > 100)\r\n    }\r\n    \r\n    window.addEventListener('scroll', handleScroll)\r\n    return () => window.removeEventListener('scroll', handleScroll)\r\n  }, [])\r\n\r\n  // Close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      setShowCurrencyDropdown(false)\r\n      setShowLanguageDropdown(false)\r\n    }\r\n    \r\n    document.addEventListener('click', handleClickOutside)\r\n    return () => document.removeEventListener('click', handleClickOutside)\r\n  }, [])\r\n\r\n  const cartItemsCount = 3\r\n\r\n  // Check if user is admin/super_admin\r\n  const isAdmin = user?.role === 'admin' || user?.role === 'super_admin'\r\n\r\n  return (\r\n    <>\r\n      {/* Top Header */}\r\n      <div className=\"bg-foreground text-background py-2 px-4\">\r\n        <div className=\"max-w-7xl mx-auto flex items-center justify-between text-sm\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span>{t('header.freeShipping', 'Free shipping on orders over 500 SAR')}</span>\r\n            <span className=\"hidden md:inline\">|</span>\r\n            <span className=\"hidden md:inline\">{t('header.support', '24/7 Customer Support')}</span>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-4\">\r\n            {/* Language Selector */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation()\r\n                  setShowLanguageDropdown(!showLanguageDropdown)\r\n                  setShowCurrencyDropdown(false)\r\n                }}\r\n                className=\"flex items-center gap-1 hover:opacity-80 transition-opacity\"\r\n              >\r\n                <Globe size={14} />\r\n                <span>{languages[language]?.nativeName}</span>\r\n                <ChevronDown size={12} className={`transform transition-transform ${showLanguageDropdown ? 'rotate-180' : ''}`} />\r\n              </button>\r\n              \r\n              <AnimatePresence>\r\n                {showLanguageDropdown && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: -10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -10 }}\r\n                    className={`absolute top-full mt-2 bg-surface border border-border rounded-segment-md shadow-segment-lg py-2 min-w-[120px] z-50 ${\r\n                      isRTL ? 'left-0' : 'right-0'\r\n                    }`}\r\n                  >\r\n                    {Object.values(languages).map((lang) => (\r\n                      <button\r\n                        key={lang.code}\r\n                        onClick={() => {\r\n                          setLanguage(lang.code)\r\n                          setShowLanguageDropdown(false)\r\n                        }}\r\n                        className={`w-full px-3 py-2 text-foreground hover:bg-background/50 transition-colors flex items-center gap-2 ${\r\n                          isRTL ? 'text-right' : 'text-left'\r\n                        } ${language === lang.code ? 'bg-background/30' : ''}`}\r\n                      >\r\n                        <span>{lang.flag}</span>\r\n                        <span>{lang.nativeName}</span>\r\n                      </button>\r\n                    ))}\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n            \r\n            {/* Currency Selector */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation()\r\n                  setShowCurrencyDropdown(!showCurrencyDropdown)\r\n                  setShowLanguageDropdown(false)\r\n                }}\r\n                className=\"flex items-center gap-1 hover:opacity-80 transition-opacity\"\r\n              >\r\n                <span>{currency}</span>\r\n                <ChevronDown size={12} className={`transform transition-transform ${showCurrencyDropdown ? 'rotate-180' : ''}`} />\r\n              </button>\r\n              \r\n              <AnimatePresence>\r\n                {showCurrencyDropdown && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: -10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -10 }}\r\n                    className={`absolute top-full mt-2 bg-surface border border-border rounded-segment-md shadow-segment-lg py-2 min-w-[140px] z-50 ${\r\n                      isRTL ? 'left-0' : 'right-0'\r\n                    }`}\r\n                  >\r\n                    {Object.values(currencies).map((curr) => (\r\n                      <button\r\n                        key={curr.code}\r\n                        onClick={() => {\r\n                          setCurrency(curr.code)\r\n                          setShowCurrencyDropdown(false)\r\n                        }}\r\n                        className={`w-full px-3 py-2 text-foreground hover:bg-background/50 transition-colors ${\r\n                          isRTL ? 'text-right' : 'text-left'\r\n                        } ${currency === curr.code ? 'bg-background/30' : ''}`}\r\n                      >\r\n                        <span className=\"font-medium\">{curr.code}</span>\r\n                        <span className={`text-foreground/60 ${isRTL ? 'mr-2' : 'ml-2'}`}>({curr.symbol})</span>\r\n                      </button>\r\n                    ))}\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Floating Navbar */}\r\n      <motion.nav\r\n        className={`fixed top-12 z-40 transition-all duration-300 ${\r\n          isScrolled ? 'top-4' : 'top-12'\r\n        } ${isRTL ? 'right-4 left-4' : 'left-4 right-4'}`}\r\n        initial={{ y: -100, opacity: 0 }}\r\n        animate={{ y: 0, opacity: 1 }}\r\n        transition={{ duration: 0.6, ease: 'easeOut' }}\r\n      >\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div \r\n            className=\"backdrop-blur-xl bg-surface/80 border border-border/50 rounded-2xl shadow-segment-xl px-6 py-4\"\r\n            style={{\r\n              background: `linear-gradient(135deg, ${theme.colors.surface}CC 0%, ${theme.colors.background}E6 100%)`,\r\n              backdropFilter: 'blur(20px)',\r\n            }}\r\n          >\r\n            <div className={`flex items-center justify-between ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n              {/* Logo */}\r\n              <motion.div\r\n                className={`flex items-center gap-3 ${isRTL ? 'flex-row-reverse' : ''}`}\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n              >\r\n                <div \r\n                  className=\"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-segment-md\"\r\n                  style={{ backgroundColor: theme.colors.primary }}\r\n                >\r\n                  I\r\n                </div>\r\n                <span className=\"text-xl font-bold text-foreground\">IVOLEX</span>\r\n              </motion.div>\r\n\r\n              {/* Desktop Navigation */}\r\n              <div className={`hidden lg:flex items-center gap-8 ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                {NAVIGATION_ITEMS.map((item) => (\r\n                  <motion.a\r\n                    key={item.label}\r\n                    href={item.href}\r\n                    className=\"text-foreground/70 hover:text-primary transition-colors font-medium\"\r\n                    whileHover={{ y: -2 }}\r\n                    whileTap={{ y: 0 }}\r\n                  >\r\n                    {t(item.label)}\r\n                  </motion.a>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Segment Switcher */}\r\n              <div className=\"hidden md:block\">\r\n                <FloatingSegmentSwitcher />\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className={`flex items-center gap-3 ${isRTL ? 'flex-row-reverse' : ''}`}>\r\n                {/* Notifications */}\r\n                <NotificationBell />\r\n\r\n                {/* Inventory Alerts - Only show for admin users */}\r\n                {isAdmin && (\r\n                  <motion.button\r\n                    onClick={() => setIsInventoryAlertsOpen(true)}\r\n                    className=\"relative p-2 text-foreground/70 hover:text-primary hover:bg-background/50 rounded-full transition-all\"\r\n                    whileHover={{ scale: 1.1 }}\r\n                    whileTap={{ scale: 0.9 }}\r\n                    aria-label=\"Inventory Alerts\"\r\n                  >\r\n                    <Package size={20} />\r\n                    {alerts.length > 0 && (\r\n                      <motion.span\r\n                        className={`absolute w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium ${\r\n                          isRTL ? 'bottom-1 left-1' : '-top-1 -right-1'\r\n                        }`}\r\n                        initial={{ scale: 0 }}\r\n                        animate={{ scale: 1 }}\r\n                        transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n                      >\r\n                        {alerts.length}\r\n                      </motion.span>\r\n                    )}\r\n                  </motion.button>\r\n                )}\r\n\r\n                {/* Search */}\r\n                <motion.button\r\n                  onClick={() => setIsSearchOpen(!isSearchOpen)}\r\n                  className=\"p-2 text-foreground/70 hover:text-primary hover:bg-background/50 rounded-full transition-all\"\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                  aria-label={t('nav.search')}\r\n                >\r\n                  <Search size={20} />\r\n                </motion.button>\r\n\r\n                {/* Profile Icon */}\r\n                {isAuthenticated ? (\r\n                  <motion.a\r\n                    href=\"/profile\"\r\n                    className=\"p-2 text-foreground/70 hover:text-primary hover:bg-background/50 rounded-full transition-all\"\r\n                    whileHover={{ scale: 1.1 }}\r\n                    whileTap={{ scale: 0.9 }}\r\n                    aria-label={t('nav.profile')}\r\n                  >\r\n                    <User size={20} />\r\n                  </motion.a>\r\n                ) : (\r\n                  <motion.a\r\n                    href=\"/login\"\r\n                    className=\"p-2 text-foreground/70 hover:text-primary hover:bg-background/50 rounded-full transition-all\"\r\n                    whileHover={{ scale: 1.1 }}\r\n                    whileTap={{ scale: 0.9 }}\r\n                    aria-label={t('nav.login')}\r\n                  >\r\n                    <User size={20} />\r\n                  </motion.a>\r\n                )}\r\n\r\n                {/* Cart */}\r\n                <motion.button\r\n                  className=\"relative p-2 text-foreground/70 hover:text-primary hover:bg-background/50 rounded-full transition-all\"\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                  aria-label={t('nav.cart')}\r\n                >\r\n                  <ShoppingBag size={20} />\r\n                  {cartItemsCount > 0 && (\r\n                    <motion.span\r\n                      className={`absolute w-5 h-5 bg-accent text-white text-xs rounded-full flex items-center justify-center font-medium ${\r\n                        isRTL ? 'bottom-1 left-1' : '-top-1 -right-1'\r\n                      }`}\r\n                      initial={{ scale: 0 }}\r\n                      animate={{ scale: 1 }}\r\n                      transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n                    >\r\n                      {cartItemsCount}\r\n                    </motion.span>\r\n                  )}\r\n                </motion.button>\r\n\r\n                {/* Mobile Menu Toggle */}\r\n                <motion.button\r\n                  onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n                  className=\"lg:hidden p-2 text-foreground/70 hover:text-primary hover:bg-background/50 rounded-full transition-all\"\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                  aria-label=\"Menu\"\r\n                >\r\n                  {isMobileMenuOpen ? <X size={20} /> : <Menu size={20} />}\r\n                </motion.button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.nav>\r\n\r\n      {/* Search Overlay */}\r\n      <AnimatePresence>\r\n        {isSearchOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-start justify-center pt-32\"\r\n            onClick={() => setIsSearchOpen(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ y: -50, opacity: 0 }}\r\n              animate={{ y: 0, opacity: 1 }}\r\n              exit={{ y: -50, opacity: 0 }}\r\n              className=\"w-full max-w-2xl mx-4\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <div className=\"bg-surface border border-border rounded-2xl shadow-segment-xl p-6\">\r\n                <EnhancedSearch \r\n                  placeholder={t('search.placeholder', 'Search products, categories, or brands...')}\r\n                  onResultSelect={(result) => {\r\n                    console.log('Selected:', result)\r\n                    setIsSearchOpen(false)\r\n                  }}\r\n                  showFilters={true}\r\n                />\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Mobile Menu */}\r\n      <AnimatePresence>\r\n        {isMobileMenuOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -20 }}\r\n            className={`fixed top-28 z-30 lg:hidden ${isRTL ? 'right-4 left-4' : 'left-4 right-4'}`}\r\n          >\r\n            <div \r\n              className=\"backdrop-blur-xl border border-border/50 rounded-2xl shadow-segment-xl p-6\"\r\n              style={{\r\n                background: `linear-gradient(135deg, ${theme.colors.surface}CC 0%, ${theme.colors.background}E6 100%)`,\r\n                backdropFilter: 'blur(20px)',\r\n              }}\r\n            >\r\n              {/* Mobile Segment Switcher */}\r\n              <div className=\"mb-6\">\r\n                <FloatingSegmentSwitcher className=\"justify-center\" />\r\n              </div>\r\n              \r\n              {/* Mobile Navigation */}\r\n              <div className=\"space-y-4\">\r\n                {NAVIGATION_ITEMS.map((item) => (\r\n                  <motion.a\r\n                    key={item.label}\r\n                    href={item.href}\r\n                    className={`block py-3 px-4 text-foreground hover:text-primary hover:bg-background/50 rounded-xl transition-colors font-medium ${\r\n                      isRTL ? 'text-right' : 'text-left'\r\n                    }`}\r\n                    whileHover={{ x: isRTL ? -4 : 4 }}\r\n                    onClick={() => setIsMobileMenuOpen(false)}\r\n                  >\r\n                    {t(item.label)}\r\n                  </motion.a>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Mobile Profile/Login */}\r\n              <div className=\"mt-6 pt-4 border-t border-border\">\r\n                {isAuthenticated ? (\r\n                  <motion.a\r\n                    href=\"/profile\"\r\n                    className={`block py-3 px-4 text-foreground hover:text-primary hover:bg-background/50 rounded-xl transition-colors font-medium ${\r\n                      isRTL ? 'text-right' : 'text-left'\r\n                    }`}\r\n                    whileHover={{ x: isRTL ? -4 : 4 }}\r\n                    onClick={() => setIsMobileMenuOpen(false)}\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <User size={20} />\r\n                      {t('nav.profile')}\r\n                    </div>\r\n                  </motion.a>\r\n                ) : (\r\n                  <motion.a\r\n                    href=\"/login\"\r\n                    className={`block py-3 px-4 text-foreground hover:text-primary hover:bg-background/50 rounded-xl transition-colors font-medium ${\r\n                      isRTL ? 'text-right' : 'text-left'\r\n                    }`}\r\n                    whileHover={{ x: isRTL ? -4 : 4 }}\r\n                    onClick={() => setIsMobileMenuOpen(false)}\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <User size={20} />\r\n                      {t('nav.login')}\r\n                    </div>\r\n                  </motion.a>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Inventory Alerts - Only show for admin users */}\r\n      {isAdmin && (\r\n        <InventoryAlerts \r\n          isOpen={isInventoryAlertsOpen}\r\n          onClose={() => setIsInventoryAlertsOpen(false)}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}","import {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  useCallback,\n} from 'react'\n\n// Comprehensive currency mapping by country\nconst currencyMap = {\n  // Middle East\n  SA: 'SAR', AE: 'AED', QA: 'QAR', KW: 'KWD', BH: 'BHD', OM: 'OMR',\n  IQ: 'IQD', JO: 'JOD', LB: 'LBP', SY: 'SYP', YE: 'YER', IL: 'ILS',\n  PS: 'ILS', TR: 'TRY', IR: 'IRR', AF: 'AFN',\n  \n  // Europe\n  AD: 'EUR', AL: 'ALL', AT: 'EUR', BA: 'BAM', BE: 'EUR', BG: 'BGN',\n  BY: 'BYN', CH: 'CHF', CY: 'EUR', CZ: 'CZK', DE: 'EUR', DK: 'DKK',\n  EE: 'EUR', ES: 'EUR', FI: 'EUR', FR: 'EUR', GB: 'GBP', GR: 'EUR',\n  HR: 'EUR', HU: 'HUF', IE: 'EUR', IS: 'ISK', IT: 'EUR', LI: 'CHF',\n  LT: 'EUR', LU: 'EUR', LV: 'EUR', MC: 'EUR', MD: 'MDL', ME: 'EUR',\n  MK: 'MKD', MT: 'EUR', NL: 'EUR', NO: 'NOK', PL: 'PLN', PT: 'EUR',\n  RO: 'RON', RS: 'RSD', RU: 'RUB', SE: 'SEK', SI: 'EUR', SK: 'EUR',\n  SM: 'EUR', UA: 'UAH', VA: 'EUR', XK: 'EUR',\n  \n  // Americas\n  US: 'USD', CA: 'CAD', MX: 'MXN', AR: 'ARS', BR: 'BRL', CL: 'CLP',\n  CO: 'COP', PE: 'PEN', VE: 'VES', EC: 'USD', UY: 'UYU', PY: 'PYG',\n  BO: 'BOB', GY: 'GYD', SR: 'SRD', FK: 'FKP', GF: 'EUR', CU: 'CUP',\n  DO: 'DOP', HT: 'HTG', JM: 'JMD', TT: 'TTD', BB: 'BBD', BS: 'BSD',\n  BZ: 'BZD', CR: 'CRC', GT: 'GTQ', HN: 'HNL', NI: 'NIO', PA: 'PAB',\n  SV: 'USD', AG: 'XCD', DM: 'XCD', GD: 'XCD', KN: 'XCD', LC: 'XCD',\n  VC: 'XCD', AI: 'XCD', AW: 'AWG', BM: 'BMD', BQ: 'USD', CW: 'ANG',\n  GL: 'DKK', GP: 'EUR', KY: 'KYD', MQ: 'EUR', MS: 'XCD', PM: 'EUR',\n  PR: 'USD', SX: 'ANG', TC: 'USD', VG: 'USD', VI: 'USD',\n  \n  // Asia Pacific\n  CN: 'CNY', JP: 'JPY', KR: 'KRW', IN: 'INR', TH: 'THB', VN: 'VND',\n  ID: 'IDR', MY: 'MYR', SG: 'SGD', PH: 'PHP', BD: 'BDT', PK: 'PKR',\n  LK: 'LKR', NP: 'NPR', BT: 'BTN', MV: 'MVR', MM: 'MMK', KH: 'KHR',\n  LA: 'LAK', MN: 'MNT', TW: 'TWD', HK: 'HKD', MO: 'MOP', AU: 'AUD',\n  NZ: 'NZD', FJ: 'FJD', PG: 'PGK', VU: 'VUV', SB: 'SBD', NC: 'XPF',\n  PF: 'XPF', WS: 'WST', TO: 'TOP', KI: 'AUD', TV: 'AUD', NR: 'AUD',\n  PW: 'USD', FM: 'USD', MH: 'USD', CK: 'NZD', NU: 'NZD', TK: 'NZD',\n  \n  // Africa\n  EG: 'EGP', ZA: 'ZAR', NG: 'NGN', KE: 'KES', MA: 'MAD', TN: 'TND',\n  DZ: 'DZD', LY: 'LYD', SD: 'SDG', ET: 'ETB', GH: 'GHS', CI: 'XOF',\n  SN: 'XOF', ML: 'XOF', BF: 'XOF', NE: 'XOF', TG: 'XOF', BJ: 'XOF',\n  GN: 'GNF', SL: 'SLL', LR: 'LRD', CM: 'XAF', CF: 'XAF', TD: 'XAF',\n  CG: 'XAF', GA: 'XAF', GQ: 'XAF', AO: 'AOA', ZM: 'ZMW', ZW: 'ZWL',\n  BW: 'BWP', NA: 'NAD', SZ: 'SZL', LS: 'LSL', MW: 'MWK', MZ: 'MZN',\n  MG: 'MGA', MU: 'MUR', SC: 'SCR', KM: 'KMF', DJ: 'DJF', SO: 'SOS',\n  ER: 'ERN', UG: 'UGX', TZ: 'TZS', RW: 'RWF', BI: 'BIF',\n  \n  // Default to USD for others\n}\n\n// Region mapping by country\nconst regionMap = {\n  // Middle East\n  SA: 'Middle East', AE: 'Middle East', QA: 'Middle East', KW: 'Middle East',\n  BH: 'Middle East', OM: 'Middle East', IQ: 'Middle East', JO: 'Middle East',\n  LB: 'Middle East', SY: 'Middle East', YE: 'Middle East', IL: 'Middle East',\n  PS: 'Middle East', TR: 'Middle East', IR: 'Middle East', AF: 'Middle East',\n  \n  // Europe\n  AD: 'Europe', AL: 'Europe', AT: 'Europe', BA: 'Europe', BE: 'Europe',\n  BG: 'Europe', BY: 'Europe', CH: 'Europe', CY: 'Europe', CZ: 'Europe',\n  DE: 'Europe', DK: 'Europe', EE: 'Europe', ES: 'Europe', FI: 'Europe',\n  FR: 'Europe', GB: 'Europe', GR: 'Europe', HR: 'Europe', HU: 'Europe',\n  IE: 'Europe', IS: 'Europe', IT: 'Europe', LI: 'Europe', LT: 'Europe',\n  LU: 'Europe', LV: 'Europe', MC: 'Europe', MD: 'Europe', ME: 'Europe',\n  MK: 'Europe', MT: 'Europe', NL: 'Europe', NO: 'Europe', PL: 'Europe',\n  PT: 'Europe', RO: 'Europe', RS: 'Europe', RU: 'Europe', SE: 'Europe',\n  SI: 'Europe', SK: 'Europe', SM: 'Europe', UA: 'Europe', VA: 'Europe',\n  XK: 'Europe',\n  \n  // Americas\n  US: 'Americas', CA: 'Americas', MX: 'Americas', AR: 'Americas',\n  BR: 'Americas', CL: 'Americas', CO: 'Americas', PE: 'Americas',\n  VE: 'Americas', EC: 'Americas', UY: 'Americas', PY: 'Americas',\n  BO: 'Americas', GY: 'Americas', SR: 'Americas', FK: 'Americas',\n  GF: 'Americas', CU: 'Americas', DO: 'Americas', HT: 'Americas',\n  JM: 'Americas', TT: 'Americas', BB: 'Americas', BS: 'Americas',\n  BZ: 'Americas', CR: 'Americas', GT: 'Americas', HN: 'Americas',\n  NI: 'Americas', PA: 'Americas', SV: 'Americas', AG: 'Americas',\n  DM: 'Americas', GD: 'Americas', KN: 'Americas', LC: 'Americas',\n  VC: 'Americas', AI: 'Americas', AW: 'Americas', BM: 'Americas',\n  BQ: 'Americas', CW: 'Americas', GL: 'Americas', GP: 'Americas',\n  KY: 'Americas', MQ: 'Americas', MS: 'Americas', PM: 'Americas',\n  PR: 'Americas', SX: 'Americas', TC: 'Americas', VG: 'Americas',\n  VI: 'Americas',\n  \n  // Asia Pacific\n  CN: 'Asia Pacific', JP: 'Asia Pacific', KR: 'Asia Pacific', IN: 'Asia Pacific',\n  TH: 'Asia Pacific', VN: 'Asia Pacific', ID: 'Asia Pacific', MY: 'Asia Pacific',\n  SG: 'Asia Pacific', PH: 'Asia Pacific', BD: 'Asia Pacific', PK: 'Asia Pacific',\n  LK: 'Asia Pacific', NP: 'Asia Pacific', BT: 'Asia Pacific', MV: 'Asia Pacific',\n  MM: 'Asia Pacific', KH: 'Asia Pacific', LA: 'Asia Pacific', MN: 'Asia Pacific',\n  TW: 'Asia Pacific', HK: 'Asia Pacific', MO: 'Asia Pacific', AU: 'Asia Pacific',\n  NZ: 'Asia Pacific', FJ: 'Asia Pacific', PG: 'Asia Pacific', VU: 'Asia Pacific',\n  SB: 'Asia Pacific', NC: 'Asia Pacific', PF: 'Asia Pacific', WS: 'Asia Pacific',\n  TO: 'Asia Pacific', KI: 'Asia Pacific', TV: 'Asia Pacific', NR: 'Asia Pacific',\n  PW: 'Asia Pacific', FM: 'Asia Pacific', MH: 'Asia Pacific', CK: 'Asia Pacific',\n  NU: 'Asia Pacific', TK: 'Asia Pacific',\n  \n  // Africa\n  EG: 'Africa', ZA: 'Africa', NG: 'Africa', KE: 'Africa', MA: 'Africa',\n  TN: 'Africa', DZ: 'Africa', LY: 'Africa', SD: 'Africa', ET: 'Africa',\n  GH: 'Africa', CI: 'Africa', SN: 'Africa', ML: 'Africa', BF: 'Africa',\n  NE: 'Africa', TG: 'Africa', BJ: 'Africa', GN: 'Africa', SL: 'Africa',\n  LR: 'Africa', CM: 'Africa', CF: 'Africa', TD: 'Africa', CG: 'Africa',\n  GA: 'Africa', GQ: 'Africa', AO: 'Africa', ZM: 'Africa', ZW: 'Africa',\n  BW: 'Africa', NA: 'Africa', SZ: 'Africa', LS: 'Africa', MW: 'Africa',\n  MZ: 'Africa', MG: 'Africa', MU: 'Africa', SC: 'Africa', KM: 'Africa',\n  DJ: 'Africa', SO: 'Africa', ER: 'Africa', UG: 'Africa', TZ: 'Africa',\n  RW: 'Africa', BI: 'Africa',\n  \n  // Default to 'Global' for others\n}\n\n// Complete currency list with symbols\nexport const CURRENCIES = [\n  // Major World Currencies\n  { code: 'USD', symbol: '$', name: 'US Dollar' },\n  { code: 'EUR', symbol: '€', name: 'Euro' },\n  { code: 'GBP', symbol: '£', name: 'British Pound' },\n  { code: 'JPY', symbol: '¥', name: 'Japanese Yen' },\n  { code: 'CNY', symbol: '¥', name: 'Chinese Yuan' },\n  \n  // Middle East\n  { code: 'SAR', symbol: 'SAR', name: 'Saudi Riyal' },\n  { code: 'AED', symbol: 'AED', name: 'UAE Dirham' },\n  { code: 'QAR', symbol: 'QAR', name: 'Qatari Riyal' },\n  { code: 'KWD', symbol: 'KWD', name: 'Kuwaiti Dinar' },\n  { code: 'BHD', symbol: 'BHD', name: 'Bahraini Dinar' },\n  { code: 'OMR', symbol: 'OMR', name: 'Omani Rial' },\n  { code: 'ILS', symbol: '₪', name: 'Israeli Shekel' },\n  { code: 'TRY', symbol: '₺', name: 'Turkish Lira' },\n  \n  // Americas\n  { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar' },\n  { code: 'MXN', symbol: '$', name: 'Mexican Peso' },\n  { code: 'BRL', symbol: 'R$', name: 'Brazilian Real' },\n  { code: 'ARS', symbol: '$', name: 'Argentine Peso' },\n  { code: 'CLP', symbol: '$', name: 'Chilean Peso' },\n  { code: 'COP', symbol: '$', name: 'Colombian Peso' },\n  \n  // Europe\n  { code: 'CHF', symbol: 'CHF', name: 'Swiss Franc' },\n  { code: 'NOK', symbol: 'kr', name: 'Norwegian Krone' },\n  { code: 'SEK', symbol: 'kr', name: 'Swedish Krona' },\n  { code: 'DKK', symbol: 'kr', name: 'Danish Krone' },\n  { code: 'PLN', symbol: 'zł', name: 'Polish Zloty' },\n  { code: 'CZK', symbol: 'Kč', name: 'Czech Koruna' },\n  { code: 'HUF', symbol: 'Ft', name: 'Hungarian Forint' },\n  { code: 'RON', symbol: 'lei', name: 'Romanian Leu' },\n  { code: 'RUB', symbol: '₽', name: 'Russian Ruble' },\n  \n  // Asia Pacific\n  { code: 'KRW', symbol: '₩', name: 'South Korean Won' },\n  { code: 'INR', symbol: '₹', name: 'Indian Rupee' },\n  { code: 'THB', symbol: '฿', name: 'Thai Baht' },\n  { code: 'VND', symbol: '₫', name: 'Vietnamese Dong' },\n  { code: 'IDR', symbol: 'Rp', name: 'Indonesian Rupiah' },\n  { code: 'MYR', symbol: 'RM', name: 'Malaysian Ringgit' },\n  { code: 'SGD', symbol: 'S$', name: 'Singapore Dollar' },\n  { code: 'PHP', symbol: '₱', name: 'Philippine Peso' },\n  { code: 'HKD', symbol: 'HK$', name: 'Hong Kong Dollar' },\n  { code: 'TWD', symbol: 'NT$', name: 'Taiwan Dollar' },\n  { code: 'AUD', symbol: 'A$', name: 'Australian Dollar' },\n  { code: 'NZD', symbol: 'NZ$', name: 'New Zealand Dollar' },\n  \n  // Africa\n  { code: 'ZAR', symbol: 'R', name: 'South African Rand' },\n  { code: 'EGP', symbol: '£', name: 'Egyptian Pound' },\n  { code: 'NGN', symbol: '₦', name: 'Nigerian Naira' },\n  { code: 'KES', symbol: 'KSh', name: 'Kenyan Shilling' },\n  { code: 'MAD', symbol: 'MAD', name: 'Moroccan Dirham' },\n  { code: 'TND', symbol: 'TND', name: 'Tunisian Dinar' },\n].sort((a, b) => a.name.localeCompare(b.name))\n\n// Regions list\nexport const REGIONS = [\n  'Global',\n  'Africa',\n  'Americas', \n  'Asia Pacific',\n  'Europe',\n  'Middle East'\n]\n\nconst LocationContext = createContext()\n\nexport const useLocation = () => {\n  const context = useContext(LocationContext)\n  if (!context) {\n    throw new Error('useLocation must be used within a LocationProvider')\n  }\n  return context\n}\n\nexport const LocationProvider = ({ children }) => {\n  const [location, setLocation] = useState({\n    country: 'India', // Default to India for launch market\n    region: 'Asia Pacific',\n    currency: 'INR', // Default to INR for India launch\n    loading: true,\n    error: null,\n  })\n\n  const [manualOverride, setManualOverride] = useState({\n    currency: null,\n    region: null,\n  })\n\n  const detectByIP = useCallback(async () => {\n    try {\n      const response = await fetch('https://ipapi.co/json/')\n      const data = await response.json()\n      const countryCode = data.country_code\n      const detectedRegion = regionMap[countryCode] || 'Global'\n      const detectedCurrency = currencyMap[countryCode] || 'USD'\n\n      setLocation({\n        country: data.country_name,\n        region: detectedRegion,\n        currency: detectedCurrency,\n        loading: false,\n        error: null,\n      })\n    } catch (error) {\n      console.error('IP detection failed:', error)\n      setLocation(prev => ({\n        ...prev,\n        loading: false,\n        error: 'Failed to detect location',\n      }))\n    }\n  }, [])\n\n  const detectLocation = useCallback(async () => {\n    try {\n      // Try geolocation first\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          async position => {\n            const { latitude, longitude } = position.coords\n            // Use reverse geocoding to get country\n            const response = await fetch(\n              `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=en`\n            )\n            const data = await response.json()\n            const countryCode = data.countryCode\n            const detectedRegion = regionMap[countryCode] || 'Global'\n            const detectedCurrency = currencyMap[countryCode] || 'USD'\n\n            setLocation({\n              country: data.countryName,\n              region: detectedRegion,\n              currency: detectedCurrency,\n              loading: false,\n              error: null,\n            })\n          },\n          async error => {\n            console.warn(\n              'Geolocation failed, falling back to IP detection:',\n              error\n            )\n            await detectByIP()\n          }\n        )\n      } else {\n        await detectByIP()\n      }\n    } catch (error) {\n      console.error('Location detection failed:', error)\n      setLocation(prev => ({\n        ...prev,\n        loading: false,\n        error: 'Failed to detect location',\n      }))\n    }\n  }, [detectByIP])\n\n  const setManualCurrency = currency => {\n    setManualOverride(prev => ({ ...prev, currency }))\n  }\n\n  const setManualRegion = region => {\n    setManualOverride(prev => ({ ...prev, region }))\n  }\n\n  // Get effective currency (manual override or detected)\n  const effectiveCurrency = manualOverride.currency || location.currency\n  const effectiveRegion = manualOverride.region || location.region\n\n  useEffect(() => {\n    detectLocation()\n  }, [detectLocation])\n\n  const value = {\n    location,\n    manualOverride,\n    effectiveCurrency,\n    effectiveRegion,\n    setManualCurrency,\n    setManualRegion,\n    detectLocation,\n  }\n\n  return (\n    <LocationContext.Provider value={value}>\n      {children}\n    </LocationContext.Provider>\n  )\n}\n","import { useState, useRef, useEffect } from 'react'\r\nimport { ChevronDown, Globe } from 'lucide-react'\r\nimport { useLocation } from '../contexts/LocationContext.jsx'\r\nimport { CURRENCIES, REGIONS } from '../contexts/LocationContext.jsx'\r\n\r\n// Currency selector component with rollback completed\r\n\r\nexport default function CurrencySelector({ \r\n  variant = 'default', // 'default', 'footer', 'profile'\r\n  showRegion = true,\r\n  className = ''\r\n}) {\r\n  const {\r\n    effectiveCurrency,\r\n    effectiveRegion,\r\n    setManualCurrency,\r\n    setManualRegion,\r\n  } = useLocation()\r\n  \r\n  const [isCurrencyOpen, setIsCurrencyOpen] = useState(false)\r\n  const [isRegionOpen, setIsRegionOpen] = useState(false)\r\n  \r\n  const currencyRef = useRef(null)\r\n  const regionRef = useRef(null)\r\n  \r\n  // Close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (currencyRef.current && !currencyRef.current.contains(event.target)) {\r\n        setIsCurrencyOpen(false)\r\n      }\r\n      if (regionRef.current && !regionRef.current.contains(event.target)) {\r\n        setIsRegionOpen(false)\r\n      }\r\n    }\r\n    \r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => document.removeEventListener('mousedown', handleClickOutside)\r\n  }, [])\r\n  \r\n  // Get current currency info\r\n  const currentCurrency = CURRENCIES.find(c => c.code === effectiveCurrency) || CURRENCIES[0]\r\n  \r\n  // Variant-specific styling\r\n  const getButtonClasses = () => {\r\n    const baseClasses = 'flex items-center gap-2 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-500'\r\n    \r\n    switch (variant) {\r\n      case 'footer':\r\n        return `${baseClasses} text-stone-300 hover:text-white px-3 py-2 text-sm border border-stone-700 rounded-lg hover:border-stone-500`\r\n      case 'profile':\r\n        return `${baseClasses} border rounded-xl px-4 py-3 hover:bg-stone-50 text-sm`\r\n      default:\r\n        return `${baseClasses} text-sm border rounded-xl px-3 py-1.5 hover:bg-stone-50`\r\n    }\r\n  }\r\n  \r\n  const getDropdownClasses = () => {\r\n    const baseClasses = 'absolute z-50 mt-1 bg-white border rounded-xl shadow-lg'\r\n    \r\n    switch (variant) {\r\n      case 'footer':\r\n        return `${baseClasses} border-stone-600 bg-stone-800 text-stone-200 min-w-[280px] max-h-80 overflow-hidden`\r\n      case 'profile':\r\n        return `${baseClasses} min-w-[320px] max-h-96 overflow-hidden`\r\n      default:\r\n        return `${baseClasses} min-w-[280px] max-h-80 overflow-hidden`\r\n    }\r\n  }\r\n  \r\n  const getItemClasses = () => {\r\n    const baseClasses = 'w-full text-left px-3 py-2 text-sm transition-colors'\r\n    \r\n    return variant === 'footer'\r\n      ? `${baseClasses} hover:bg-stone-700 text-stone-200`\r\n      : `${baseClasses} hover:bg-stone-50`\r\n  }\r\n  \r\n  return (\r\n    <div className={`space-y-3 ${className}`}>\r\n      {/* Region Selector */}\r\n      {showRegion && (\r\n        <div className=\"relative\" ref={regionRef}>\r\n          <label className={`block text-sm font-medium mb-2 ${\r\n            variant === 'footer' ? 'text-stone-300' : 'text-stone-700'\r\n          }`}>\r\n            Region:\r\n          </label>\r\n          <button\r\n            onClick={() => setIsRegionOpen(!isRegionOpen)}\r\n            className={getButtonClasses()}\r\n          >\r\n            <Globe size={16} />\r\n            <span className=\"flex-1 text-left\">{effectiveRegion || 'Global'}</span>\r\n            <ChevronDown size={14} className={`transition-transform ${\r\n              isRegionOpen ? 'rotate-180' : ''\r\n            }`} />\r\n          </button>\r\n          \r\n          {isRegionOpen && (\r\n            <div className={getDropdownClasses()}>\r\n              <div className=\"p-2 space-y-1 max-h-48 overflow-y-auto\">\r\n                {REGIONS.map(region => (\r\n                  <button\r\n                    key={region}\r\n                    onClick={() => {\r\n                      setManualRegion(region === 'Global' ? null : region)\r\n                      setIsRegionOpen(false)\r\n                    }}\r\n                    className={`${getItemClasses()} ${\r\n                      (effectiveRegion || 'Global') === region\r\n                        ? variant === 'footer'\r\n                          ? 'bg-stone-700 text-white'\r\n                          : 'bg-brand-50 text-brand-700'\r\n                        : ''\r\n                    }`}\r\n                  >\r\n                    {region}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Currency Selector */}\r\n      <div className=\"relative\" ref={currencyRef}>\r\n        <label className={`block text-sm font-medium mb-2 ${\r\n          variant === 'footer' ? 'text-stone-300' : 'text-stone-700'\r\n        }`}>\r\n          Currency:\r\n        </label>\r\n        <button\r\n          onClick={() => setIsCurrencyOpen(!isCurrencyOpen)}\r\n          className={getButtonClasses()}\r\n        >\r\n          <span className=\"text-lg\">{currentCurrency.symbol}</span>\r\n          <span className=\"flex-1 text-left\">\r\n            {currentCurrency.code} - {currentCurrency.name}\r\n          </span>\r\n          <ChevronDown size={14} className={`transition-transform ${\r\n            isCurrencyOpen ? 'rotate-180' : ''\r\n          }`} />\r\n        </button>\r\n        \r\n        {isCurrencyOpen && (\r\n          <div className={getDropdownClasses()}>\r\n            <div className=\"max-h-64 overflow-y-auto p-2 space-y-1\">\r\n              {CURRENCIES.map(currency => (\r\n                <button\r\n                  key={currency.code}\r\n                  onClick={() => {\r\n                    setManualCurrency(currency.code)\r\n                    setIsCurrencyOpen(false)\r\n                  }}\r\n                  className={`${getItemClasses()} flex items-center gap-3 ${\r\n                    effectiveCurrency === currency.code\r\n                      ? variant === 'footer'\r\n                        ? 'bg-stone-700 text-white'\r\n                        : 'bg-brand-50 text-brand-700'\r\n                      : ''\r\n                  }`}\r\n                >\r\n                  <span className=\"text-lg font-mono w-6 text-center\">\r\n                    {currency.symbol}\r\n                  </span>\r\n                  <div className=\"flex-1 text-left\">\r\n                    <div className=\"font-medium\">{currency.code}</div>\r\n                    <div className={`text-xs ${\r\n                      variant === 'footer' ? 'text-stone-400' : 'text-stone-500'\r\n                    }`}>\r\n                      {currency.name}\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { motion } from 'framer-motion'\nimport {\n  Facebook,\n  Instagram,\n  Twitter,\n  Youtube,\n  Mail,\n  Phone,\n  MapPin,\n} from 'lucide-react'\nimport { useAuth } from '../contexts/AuthContext.jsx'\nimport CurrencySelector from '../components/CurrencySelector.jsx'\n\nexport default function Footer() {\n  const { isAuthenticated } = useAuth()\n  \n  const socialLinks = [\n    { icon: Facebook, href: '#', label: 'Facebook' },\n    { icon: Instagram, href: '#', label: 'Instagram' },\n    { icon: Twitter, href: '#', label: 'Twitter' },\n    { icon: Youtube, href: '#', label: 'YouTube' },\n  ]\n\n  const footerLinks = {\n    shop: [\n      { name: 'Wallets', href: '#' },\n      { name: 'Bags', href: '#' },\n      { name: 'Belts', href: '#' },\n      { name: 'Footwear', href: '#' },\n      { name: 'Accessories', href: '#' },\n    ],\n    company: [\n      { name: 'About Us', href: '#about' },\n      { name: 'Customization', href: '#customize' },\n      { name: 'Sustainability', href: '#' },\n      { name: 'Careers', href: '#' },\n    ],\n    support: [\n      { name: 'FAQs', href: '#' },\n      { name: 'Shipping & Returns', href: '#' },\n      { name: 'Care Guide', href: '#' },\n      { name: 'Privacy Policy', href: '#' },\n      { name: 'Terms & Conditions', href: '#' },\n    ],\n  }\n\n  return (\n    <footer id=\"about\" className=\"bg-stone-900 text-stone-200\">\n      <div className=\"container-xl\">\n        {/* Main Footer Content */}\n        <div className={`grid gap-8 py-12 ${\n          isAuthenticated ? 'md:grid-cols-4' : 'md:grid-cols-5'\n        }`}>\n          {/* Company Info */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6 }}\n            viewport={{ once: true }}\n          >\n            <div className=\"font-bold text-xl text-white mb-4\">IVOLEX</div>\n            <p className=\"text-sm text-stone-400 mb-6 leading-relaxed\">\n              Crafting premium leather goods with passion and precision since\n              2010. Each piece tells a story of craftsmanship and elegance.\n            </p>\n\n            {/* Contact Info */}\n            <div className=\"space-y-3 mb-6\">\n              <div className=\"flex items-center gap-3 text-sm text-stone-400\">\n                <MapPin size={16} />\n                <span>Riyadh, Saudi Arabia</span>\n              </div>\n              <div className=\"flex items-center gap-3 text-sm text-stone-400\">\n                <Phone size={16} />\n                <span>+966 50 123 4567</span>\n              </div>\n              <div className=\"flex items-center gap-3 text-sm text-stone-400\">\n                <Mail size={16} />\n                <span>hello@ivolex.com</span>\n              </div>\n            </div>\n\n            {/* Social Links */}\n            <div className=\"flex gap-3\">\n              {socialLinks.map((social, index) => {\n                const IconComponent = social.icon\n                return (\n                  <motion.a\n                    key={social.label}\n                    href={social.href}\n                    aria-label={social.label}\n                    className=\"w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-brand-600 transition-colors duration-200\"\n                    whileHover={{ scale: 1.1 }}\n                    whileTap={{ scale: 0.95 }}\n                    initial={{ opacity: 0, scale: 0 }}\n                    whileInView={{ opacity: 1, scale: 1 }}\n                    transition={{ duration: 0.3, delay: index * 0.1 }}\n                    viewport={{ once: true }}\n                  >\n                    <IconComponent size={18} />\n                  </motion.a>\n                )\n              })}\n            </div>\n          </motion.div>\n\n          {/* Shop Links */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.1 }}\n            viewport={{ once: true }}\n          >\n            <div className=\"font-semibold text-white mb-4\">Shop</div>\n            <ul className=\"space-y-3 text-sm text-stone-400\">\n              {footerLinks.shop.map((link, index) => (\n                <motion.li\n                  key={link.name}\n                  initial={{ opacity: 0, x: -10 }}\n                  whileInView={{ opacity: 1, x: 0 }}\n                  transition={{ duration: 0.3, delay: index * 0.05 }}\n                  viewport={{ once: true }}\n                >\n                  <a\n                    href={link.href}\n                    className=\"hover:text-white transition-colors duration-200\"\n                  >\n                    {link.name}\n                  </a>\n                </motion.li>\n              ))}\n            </ul>\n          </motion.div>\n\n          {/* Company Links */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.2 }}\n            viewport={{ once: true }}\n          >\n            <div className=\"font-semibold text-white mb-4\">Company</div>\n            <ul className=\"space-y-3 text-sm text-stone-400\">\n              {footerLinks.company.map((link, index) => (\n                <motion.li\n                  key={link.name}\n                  initial={{ opacity: 0, x: -10 }}\n                  whileInView={{ opacity: 1, x: 0 }}\n                  transition={{ duration: 0.3, delay: index * 0.05 }}\n                  viewport={{ once: true }}\n                >\n                  <a\n                    href={link.href}\n                    className=\"hover:text-white transition-colors duration-200\"\n                  >\n                    {link.name}\n                  </a>\n                </motion.li>\n              ))}\n            </ul>\n          </motion.div>\n\n          {/* Support Links */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.3 }}\n            viewport={{ once: true }}\n          >\n            <div className=\"font-semibold text-white mb-4\">Support</div>\n            <ul className=\"space-y-3 text-sm text-stone-400\">\n              {footerLinks.support.map((link, index) => (\n                <motion.li\n                  key={link.name}\n                  initial={{ opacity: 0, x: -10 }}\n                  whileInView={{ opacity: 1, x: 0 }}\n                  transition={{ duration: 0.3, delay: index * 0.05 }}\n                  viewport={{ once: true }}\n                >\n                  <a\n                    href={link.href}\n                    className=\"hover:text-white transition-colors duration-200\"\n                  >\n                    {link.name}\n                  </a>\n                </motion.li>\n              ))}\n            </ul>\n          </motion.div>\n\n          {/* Currency Selector - Only shown when not authenticated */}\n          {!isAuthenticated && (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              viewport={{ once: true }}\n            >\n              <div className=\"font-semibold text-white mb-4\">Preferences</div>\n              <p className=\"text-sm text-stone-400 mb-4\">\n                Set your regional preferences for localized pricing and content.\n              </p>\n              <CurrencySelector variant=\"footer\" showRegion={true} />\n            </motion.div>\n          )}\n        </div>\n\n        {/* Bottom Bar */}\n        <motion.div\n          className=\"border-t border-stone-800 pt-6\"\n          initial={{ opacity: 0 }}\n          whileInView={{ opacity: 1 }}\n          transition={{ duration: 0.6, delay: 0.4 }}\n          viewport={{ once: true }}\n        >\n          <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n            <div className=\"text-sm text-stone-500\">\n              © 2024 IVOLEX. All rights reserved.\n            </div>\n\n            {/* Payment Methods */}\n            <div className=\"flex items-center gap-3\">\n              <div className=\"text-xs text-stone-500 mr-2\">We accept:</div>\n              <div className=\"flex items-center gap-2\">\n                {['visa', 'mastercard', 'amex', 'paypal'].map(method => (\n                  <div\n                    key={method}\n                    className=\"w-8 h-5 bg-stone-700 rounded border border-stone-600 flex items-center justify-center text-[8px] font-bold text-stone-300\"\n                  >\n                    {method.slice(0, 2).toUpperCase()}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </footer>\n  )\n}\n","import { createContext, useContext, useMemo, useReducer, useState } from 'react'\n\nconst CartContext = createContext(null)\n\nfunction cartReducer(state, action) {\n  switch (action.type) {\n    case 'add': {\n      const { id, qty = 1, item } = action\n      const exists = state.items[id]\n      const nextQty = (exists?.qty || 0) + qty\n      return {\n        ...state,\n        items: {\n          ...state.items,\n          [id]: { item, qty: nextQty },\n        },\n      }\n    }\n    case 'remove': {\n      const n = { ...state.items }\n      delete n[action.id]\n      return { ...state, items: n }\n    }\n    case 'setQty': {\n      const { id, qty } = action\n      if (qty <= 0) {\n        const n = { ...state.items }\n        delete n[id]\n        return { ...state, items: n }\n      }\n      return {\n        ...state,\n        items: { ...state.items, [id]: { ...state.items[id], qty } },\n      }\n    }\n    case 'clear':\n      return { items: {} }\n    default:\n      return state\n  }\n}\n\nexport function CartProvider({ children }) {\n  const [state, dispatch] = useReducer(cartReducer, { items: {} })\n  const [updatingItems, setUpdatingItems] = useState(new Set())\n\n  const api = useMemo(() => {\n    const itemsArr = Object.entries(state.items).map(([id, v]) => ({\n      id,\n      ...v,\n    }))\n    const count = itemsArr.reduce((a, c) => a + c.qty, 0)\n    const total = itemsArr.reduce((a, c) => a + (c.item?.price || 0) * c.qty, 0)\n    return {\n      state,\n      items: itemsArr,\n      count,\n      total,\n      add: (item, qty = 1) => dispatch({ type: 'add', id: item.id, qty, item }),\n      remove: id => dispatch({ type: 'remove', id }),\n      setQty: async (id, qty) => {\n        setUpdatingItems(prev => new Set(prev).add(id))\n        // Simulate API call delay\n        await new Promise(resolve => setTimeout(resolve, 500))\n        dispatch({ type: 'setQty', id, qty })\n        setUpdatingItems(prev => {\n          const newSet = new Set(prev)\n          newSet.delete(id)\n          return newSet\n        })\n      },\n      clear: () => dispatch({ type: 'clear' }),\n      isUpdating: (id) => updatingItems.has(id),\n    }\n  }, [state, updatingItems])\n  return <CartContext.Provider value={api}>{children}</CartContext.Provider>\n}\n\nexport function useCart() {\n  const ctx = useContext(CartContext)\n  if (!ctx) throw new Error('useCart must be used within CartProvider')\n  return ctx\n}\n","import { createContext, useContext, useReducer, useEffect } from 'react'\r\nimport { useNotifications, NOTIFICATION_TYPES, NOTIFICATION_CHANNELS } from './NotificationContext'\r\n\r\n// Order statuses\r\nexport const ORDER_STATUSES = {\r\n  PENDING: 'pending',\r\n  CONFIRMED: 'confirmed',\r\n  PROCESSING: 'processing',\r\n  SHIPPED: 'shipped',\r\n  DELIVERED: 'delivered',\r\n  CANCELLED: 'cancelled',\r\n  REFUNDED: 'refunded'\r\n}\r\n\r\n// Order status configurations\r\nconst STATUS_CONFIG = {\r\n  [ORDER_STATUSES.PENDING]: {\r\n    label: 'Pending Payment',\r\n    labelAr: 'في انتظار الدفع',\r\n    color: 'bg-yellow-100 text-yellow-800',\r\n    step: 1\r\n  },\r\n  [ORDER_STATUSES.CONFIRMED]: {\r\n    label: 'Payment Confirmed',\r\n    labelAr: 'تم تأكيد الدفع',\r\n    color: 'bg-blue-100 text-blue-800',\r\n    step: 2\r\n  },\r\n  [ORDER_STATUSES.PROCESSING]: {\r\n    label: 'Processing',\r\n    labelAr: 'قيد التحضير',\r\n    color: 'bg-purple-100 text-purple-800',\r\n    step: 3\r\n  },\r\n  [ORDER_STATUSES.SHIPPED]: {\r\n    label: 'Shipped',\r\n    labelAr: 'تم الشحن',\r\n    color: 'bg-indigo-100 text-indigo-800',\r\n    step: 4\r\n  },\r\n  [ORDER_STATUSES.DELIVERED]: {\r\n    label: 'Delivered',\r\n    labelAr: 'تم التسليم',\r\n    color: 'bg-green-100 text-green-800',\r\n    step: 5\r\n  },\r\n  [ORDER_STATUSES.CANCELLED]: {\r\n    label: 'Cancelled',\r\n    labelAr: 'ملغي',\r\n    color: 'bg-red-100 text-red-800',\r\n    step: 0\r\n  },\r\n  [ORDER_STATUSES.REFUNDED]: {\r\n    label: 'Refunded',\r\n    labelAr: 'مسترد',\r\n    color: 'bg-gray-100 text-gray-800',\r\n    step: 0\r\n  }\r\n}\r\n\r\n// Actions\r\nconst ORDER_ACTIONS = {\r\n  CREATE_ORDER: 'CREATE_ORDER',\r\n  UPDATE_ORDER_STATUS: 'UPDATE_ORDER_STATUS',\r\n  ADD_TRACKING_UPDATE: 'ADD_TRACKING_UPDATE',\r\n  LOAD_ORDERS: 'LOAD_ORDERS',\r\n  SET_LOADING: 'SET_LOADING'\r\n}\r\n\r\n// Initial state\r\nconst initialState = {\r\n  orders: [],\r\n  loading: false,\r\n  error: null\r\n}\r\n\r\n// Reducer\r\nfunction orderReducer(state, action) {\r\n  switch (action.type) {\r\n    case ORDER_ACTIONS.SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      }\r\n    \r\n    case ORDER_ACTIONS.LOAD_ORDERS:\r\n      return {\r\n        ...state,\r\n        orders: action.payload,\r\n        loading: false\r\n      }\r\n    \r\n    case ORDER_ACTIONS.CREATE_ORDER: {\r\n      const newOrder = {\r\n        id: action.payload.id || `ORD-${Date.now()}`,\r\n        orderNumber: action.payload.orderNumber || `#${Date.now()}`,\r\n        status: ORDER_STATUSES.PENDING,\r\n        items: action.payload.items || [],\r\n        customer: action.payload.customer || {},\r\n        shipping: action.payload.shipping || {},\r\n        payment: action.payload.payment || {},\r\n        totals: action.payload.totals || {},\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        tracking: [{\r\n          status: ORDER_STATUSES.PENDING,\r\n          message: 'Order created successfully',\r\n          messageAr: 'تم إنشاء الطلب بنجاح',\r\n          timestamp: new Date().toISOString(),\r\n          automated: true\r\n        }],\r\n        estimatedDelivery: null,\r\n        shippingCarrier: null,\r\n        trackingNumber: null\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        orders: [newOrder, ...state.orders],\r\n        loading: false\r\n      }\r\n    }\r\n    \r\n    case ORDER_ACTIONS.UPDATE_ORDER_STATUS:\r\n      return {\r\n        ...state,\r\n        orders: state.orders.map(order => \r\n          order.id === action.payload.orderId\r\n            ? {\r\n                ...order,\r\n                status: action.payload.status,\r\n                updatedAt: new Date().toISOString(),\r\n                ...(action.payload.trackingNumber && { trackingNumber: action.payload.trackingNumber }),\r\n                ...(action.payload.shippingCarrier && { shippingCarrier: action.payload.shippingCarrier }),\r\n                ...(action.payload.estimatedDelivery && { estimatedDelivery: action.payload.estimatedDelivery })\r\n              }\r\n            : order\r\n        )\r\n      }\r\n    \r\n    case ORDER_ACTIONS.ADD_TRACKING_UPDATE:\r\n      return {\r\n        ...state,\r\n        orders: state.orders.map(order => \r\n          order.id === action.payload.orderId\r\n            ? {\r\n                ...order,\r\n                tracking: [\r\n                  ...order.tracking,\r\n                  {\r\n                    status: action.payload.status,\r\n                    message: action.payload.message,\r\n                    messageAr: action.payload.messageAr,\r\n                    timestamp: new Date().toISOString(),\r\n                    automated: action.payload.automated || false,\r\n                    location: action.payload.location\r\n                  }\r\n                ],\r\n                updatedAt: new Date().toISOString()\r\n              }\r\n            : order\r\n        )\r\n      }\r\n    \r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// Context\r\nconst OrderContext = createContext()\r\n\r\n// Provider component\r\nexport function OrderProvider({ children }) {\r\n  const [state, dispatch] = useReducer(orderReducer, initialState)\r\n  const { sendNotification } = useNotifications()\r\n\r\n  // Load orders from localStorage on mount\r\n  useEffect(() => {\r\n    const savedOrders = localStorage.getItem('ivolex_orders')\r\n    if (savedOrders) {\r\n      try {\r\n        const orders = JSON.parse(savedOrders)\r\n        dispatch({ type: ORDER_ACTIONS.LOAD_ORDERS, payload: orders })\r\n      } catch (error) {\r\n        console.error('Failed to load orders:', error)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Save orders to localStorage when they change\r\n  useEffect(() => {\r\n    if (state.orders.length > 0) {\r\n      localStorage.setItem('ivolex_orders', JSON.stringify(state.orders))\r\n    }\r\n  }, [state.orders])\r\n\r\n  const createOrder = (orderData) => {\r\n    dispatch({ type: ORDER_ACTIONS.SET_LOADING, payload: true })\r\n    \r\n    // Simulate API call\r\n    setTimeout(() => {\r\n      const orderId = orderData.id || `ORD-${Date.now()}`\r\n      const orderNumber = orderData.orderNumber || `#${Date.now()}`\r\n      \r\n      dispatch({ type: ORDER_ACTIONS.CREATE_ORDER, payload: { ...orderData, id: orderId, orderNumber } })\r\n      \r\n      // Send order confirmation notification\r\n      sendNotification(\r\n        NOTIFICATION_TYPES.ORDER_CONFIRMATION,\r\n        {\r\n          orderId,\r\n          orderNumber,\r\n          total: orderData.totals?.total || '0',\r\n          email: orderData.customer?.email,\r\n          phone: orderData.customer?.phone,\r\n          userId: orderData.customer?.id\r\n        },\r\n        [NOTIFICATION_CHANNELS.IN_APP, NOTIFICATION_CHANNELS.EMAIL, NOTIFICATION_CHANNELS.SMS]\r\n      )\r\n      \r\n      // Simulate payment confirmation after 2 seconds\r\n      setTimeout(() => {\r\n        updateOrderStatus(orderId, ORDER_STATUSES.CONFIRMED, {\r\n          message: 'Payment confirmed successfully',\r\n          messageAr: 'تم تأكيد الدفع بنجاح'\r\n        })\r\n      }, 2000)\r\n    }, 1000)\r\n  }\r\n\r\n  const updateOrderStatus = (orderId, status, options = {}) => {\r\n    const order = getOrderById(orderId)\r\n    if (!order) return\r\n\r\n    dispatch({\r\n      type: ORDER_ACTIONS.UPDATE_ORDER_STATUS,\r\n      payload: {\r\n        orderId,\r\n        status,\r\n        ...options\r\n      }\r\n    })\r\n\r\n    // Add tracking update\r\n    const statusConfig = STATUS_CONFIG[status]\r\n    addTrackingUpdate(orderId, {\r\n      status,\r\n      message: options.message || statusConfig.label,\r\n      messageAr: options.messageAr || statusConfig.labelAr,\r\n      automated: options.automated !== false,\r\n      location: options.location\r\n    })\r\n\r\n    // Send notification for status updates\r\n    const notificationData = {\r\n      orderId,\r\n      orderNumber: order.orderNumber,\r\n      status,\r\n      statusAr: statusConfig.labelAr,\r\n      email: order.customer?.email,\r\n      phone: order.customer?.phone,\r\n      userId: order.customer?.id,\r\n      trackingNumber: options.trackingNumber\r\n    }\r\n\r\n    // Determine notification type and channels based on status\r\n    let notificationType = NOTIFICATION_TYPES.ORDER_STATUS_UPDATE\r\n    let channels = [NOTIFICATION_CHANNELS.IN_APP]\r\n\r\n    if (status === ORDER_STATUSES.CONFIRMED) {\r\n      notificationType = NOTIFICATION_TYPES.PAYMENT_CONFIRMATION\r\n      notificationData.amount = order.totals?.total || '0'\r\n      channels = [NOTIFICATION_CHANNELS.IN_APP, NOTIFICATION_CHANNELS.EMAIL]\r\n    } else if (status === ORDER_STATUSES.SHIPPED) {\r\n      notificationType = NOTIFICATION_TYPES.SHIPPING_UPDATE\r\n      channels = [NOTIFICATION_CHANNELS.IN_APP, NOTIFICATION_CHANNELS.SMS, NOTIFICATION_CHANNELS.EMAIL]\r\n    } else if (status === ORDER_STATUSES.DELIVERED) {\r\n      channels = [NOTIFICATION_CHANNELS.IN_APP, NOTIFICATION_CHANNELS.EMAIL]\r\n    }\r\n\r\n    // Send the notification\r\n    sendNotification(notificationType, notificationData, channels)\r\n  }\r\n\r\n  const addTrackingUpdate = (orderId, trackingData) => {\r\n    dispatch({\r\n      type: ORDER_ACTIONS.ADD_TRACKING_UPDATE,\r\n      payload: {\r\n        orderId,\r\n        ...trackingData\r\n      }\r\n    })\r\n  }\r\n\r\n  const getOrderById = (orderId) => {\r\n    return state.orders.find(order => order.id === orderId)\r\n  }\r\n\r\n  const getOrderByNumber = (orderNumber) => {\r\n    return state.orders.find(order => order.orderNumber === orderNumber)\r\n  }\r\n\r\n  const getStatusConfig = (status) => {\r\n    return STATUS_CONFIG[status] || STATUS_CONFIG[ORDER_STATUSES.PENDING]\r\n  }\r\n\r\n  const simulateOrderProgress = (orderId) => {\r\n    const order = getOrderById(orderId)\r\n    if (!order) return\r\n\r\n    const progressSteps = [\r\n      { \r\n        status: ORDER_STATUSES.PROCESSING, \r\n        delay: 5000,\r\n        message: 'Order is being prepared',\r\n        messageAr: 'جاري تحضير الطلب'\r\n      },\r\n      { \r\n        status: ORDER_STATUSES.SHIPPED, \r\n        delay: 10000,\r\n        message: 'Order has been shipped',\r\n        messageAr: 'تم شحن الطلب',\r\n        trackingNumber: 'TN' + Math.random().toString(36).substr(2, 9).toUpperCase(),\r\n        shippingCarrier: 'Aramex',\r\n        estimatedDelivery: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString()\r\n      },\r\n      { \r\n        status: ORDER_STATUSES.DELIVERED, \r\n        delay: 15000,\r\n        message: 'Order delivered successfully',\r\n        messageAr: 'تم تسليم الطلب بنجاح'\r\n      }\r\n    ]\r\n\r\n    progressSteps.forEach(step => {\r\n      setTimeout(() => {\r\n        updateOrderStatus(orderId, step.status, {\r\n          message: step.message,\r\n          messageAr: step.messageAr,\r\n          trackingNumber: step.trackingNumber,\r\n          shippingCarrier: step.shippingCarrier,\r\n          estimatedDelivery: step.estimatedDelivery,\r\n          automated: true\r\n        })\r\n      }, step.delay)\r\n    })\r\n  }\r\n\r\n  const value = {\r\n    orders: state.orders,\r\n    loading: state.loading,\r\n    error: state.error,\r\n    createOrder,\r\n    updateOrderStatus,\r\n    addTrackingUpdate,\r\n    getOrderById,\r\n    getOrderByNumber,\r\n    getStatusConfig,\r\n    simulateOrderProgress,\r\n    ORDER_STATUSES\r\n  }\r\n\r\n  return (\r\n    <OrderContext.Provider value={value}>\r\n      {children}\r\n    </OrderContext.Provider>\r\n  )\r\n}\r\n\r\n// Hook to use order context\r\nexport function useOrder() {\r\n  const context = useContext(OrderContext)\r\n  if (!context) {\r\n    throw new Error('useOrder must be used within an OrderProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport { STATUS_CONFIG }","import { createContext, useContext, useReducer, useEffect } from 'react'\r\nimport { useNotifications, NOTIFICATION_TYPES, NOTIFICATION_CHANNELS } from './NotificationContext'\r\n\r\nconst AuditContext = createContext()\r\n\r\n// Permission roles\r\nexport const ROLES = {\r\n  SUPER_ADMIN: 'super_admin',\r\n  ADMIN: 'admin',\r\n  MANAGER: 'manager',\r\n  MODERATOR: 'moderator',\r\n  VIEWER: 'viewer',\r\n  CUSTOMER: 'customer'\r\n}\r\n\r\n// Permission actions\r\nexport const PERMISSIONS = {\r\n  // Product Management\r\n  PRODUCTS_VIEW: 'products:view',\r\n  PRODUCTS_CREATE: 'products:create',\r\n  PRODUCTS_EDIT: 'products:edit',\r\n  PRODUCTS_DELETE: 'products:delete',\r\n  PRODUCTS_BULK_IMPORT: 'products:bulk_import',\r\n  \r\n  // Order Management\r\n  ORDERS_VIEW: 'orders:view',\r\n  ORDERS_EDIT: 'orders:edit',\r\n  ORDERS_REFUND: 'orders:refund',\r\n  ORDERS_CANCEL: 'orders:cancel',\r\n  ORDERS_EXPORT: 'orders:export',\r\n  \r\n  // User Management\r\n  USERS_VIEW: 'users:view',\r\n  USERS_CREATE: 'users:create',\r\n  USERS_EDIT: 'users:edit',\r\n  USERS_DELETE: 'users:delete',\r\n  USERS_ASSIGN_ROLES: 'users:assign_roles',\r\n  \r\n  // Customization Requests\r\n  CUSTOMIZATION_VIEW: 'customization:view',\r\n  CUSTOMIZATION_EDIT: 'customization:edit',\r\n  CUSTOMIZATION_APPROVE: 'customization:approve',\r\n  CUSTOMIZATION_REJECT: 'customization:reject',\r\n  \r\n  // Theme Management\r\n  THEMES_VIEW: 'themes:view',\r\n  THEMES_EDIT: 'themes:edit',\r\n  THEMES_CREATE: 'themes:create',\r\n  THEMES_DELETE: 'themes:delete',\r\n  \r\n  // Analytics & Reports\r\n  ANALYTICS_VIEW: 'analytics:view',\r\n  ANALYTICS_EXPORT: 'analytics:export',\r\n  REPORTS_GENERATE: 'reports:generate',\r\n  \r\n  // System Settings\r\n  SETTINGS_VIEW: 'settings:view',\r\n  SETTINGS_EDIT: 'settings:edit',\r\n  AUDIT_LOGS_VIEW: 'audit_logs:view',\r\n  \r\n  // Security\r\n  SECURITY_MANAGE: 'security:manage',\r\n  ROLES_MANAGE: 'roles:manage'\r\n}\r\n\r\n// Role-Permission Matrix\r\nexport const ROLE_PERMISSIONS = {\r\n  [ROLES.SUPER_ADMIN]: [\r\n    // Full access to everything\r\n    ...Object.values(PERMISSIONS)\r\n  ],\r\n  \r\n  [ROLES.ADMIN]: [\r\n    // Product Management\r\n    PERMISSIONS.PRODUCTS_VIEW,\r\n    PERMISSIONS.PRODUCTS_CREATE,\r\n    PERMISSIONS.PRODUCTS_EDIT,\r\n    PERMISSIONS.PRODUCTS_DELETE,\r\n    PERMISSIONS.PRODUCTS_BULK_IMPORT,\r\n    \r\n    // Order Management\r\n    PERMISSIONS.ORDERS_VIEW,\r\n    PERMISSIONS.ORDERS_EDIT,\r\n    PERMISSIONS.ORDERS_REFUND,\r\n    PERMISSIONS.ORDERS_CANCEL,\r\n    PERMISSIONS.ORDERS_EXPORT,\r\n    \r\n    // User Management (Limited)\r\n    PERMISSIONS.USERS_VIEW,\r\n    PERMISSIONS.USERS_CREATE,\r\n    PERMISSIONS.USERS_EDIT,\r\n    \r\n    // Customization\r\n    PERMISSIONS.CUSTOMIZATION_VIEW,\r\n    PERMISSIONS.CUSTOMIZATION_EDIT,\r\n    PERMISSIONS.CUSTOMIZATION_APPROVE,\r\n    PERMISSIONS.CUSTOMIZATION_REJECT,\r\n    \r\n    // Themes\r\n    PERMISSIONS.THEMES_VIEW,\r\n    PERMISSIONS.THEMES_EDIT,\r\n    PERMISSIONS.THEMES_CREATE,\r\n    \r\n    // Analytics\r\n    PERMISSIONS.ANALYTICS_VIEW,\r\n    PERMISSIONS.ANALYTICS_EXPORT,\r\n    PERMISSIONS.REPORTS_GENERATE,\r\n    \r\n    // Settings (Limited)\r\n    PERMISSIONS.SETTINGS_VIEW,\r\n    PERMISSIONS.AUDIT_LOGS_VIEW\r\n  ],\r\n  \r\n  [ROLES.MANAGER]: [\r\n    // Product Management (Limited)\r\n    PERMISSIONS.PRODUCTS_VIEW,\r\n    PERMISSIONS.PRODUCTS_EDIT,\r\n    \r\n    // Order Management\r\n    PERMISSIONS.ORDERS_VIEW,\r\n    PERMISSIONS.ORDERS_EDIT,\r\n    \r\n    // Customization\r\n    PERMISSIONS.CUSTOMIZATION_VIEW,\r\n    PERMISSIONS.CUSTOMIZATION_EDIT,\r\n    PERMISSIONS.CUSTOMIZATION_APPROVE,\r\n    \r\n    // Analytics (View only)\r\n    PERMISSIONS.ANALYTICS_VIEW,\r\n    PERMISSIONS.REPORTS_GENERATE\r\n  ],\r\n  \r\n  [ROLES.MODERATOR]: [\r\n    // Basic viewing and editing\r\n    PERMISSIONS.PRODUCTS_VIEW,\r\n    PERMISSIONS.ORDERS_VIEW,\r\n    PERMISSIONS.CUSTOMIZATION_VIEW,\r\n    PERMISSIONS.CUSTOMIZATION_EDIT,\r\n    PERMISSIONS.USERS_VIEW\r\n  ],\r\n  \r\n  [ROLES.VIEWER]: [\r\n    // Read-only access\r\n    PERMISSIONS.PRODUCTS_VIEW,\r\n    PERMISSIONS.ORDERS_VIEW,\r\n    PERMISSIONS.CUSTOMIZATION_VIEW,\r\n    PERMISSIONS.ANALYTICS_VIEW\r\n  ],\r\n  \r\n  [ROLES.CUSTOMER]: [\r\n    // No admin permissions\r\n  ]\r\n}\r\n\r\n// Audit log types\r\nexport const AUDIT_ACTIONS = {\r\n  LOGIN: 'login',\r\n  LOGOUT: 'logout',\r\n  CREATE: 'create',\r\n  UPDATE: 'update',\r\n  DELETE: 'delete',\r\n  VIEW: 'view',\r\n  EXPORT: 'export',\r\n  APPROVE: 'approve',\r\n  REJECT: 'reject',\r\n  REFUND: 'refund',\r\n  CANCEL: 'cancel',\r\n  ROLE_CHANGE: 'role_change',\r\n  PERMISSION_CHANGE: 'permission_change',\r\n  SETTINGS_CHANGE: 'settings_change',\r\n  THEME_CHANGE: 'theme_change',\r\n  SECURITY_EVENT: 'security_event'\r\n}\r\n\r\n// Audit reducer\r\nconst AUDIT_ACTIONS_TYPES = {\r\n  ADD_LOG: 'ADD_LOG',\r\n  LOAD_LOGS: 'LOAD_LOGS',\r\n  CLEAR_LOGS: 'CLEAR_LOGS',\r\n  SET_LOADING: 'SET_LOADING',\r\n  SET_ERROR: 'SET_ERROR'\r\n}\r\n\r\nconst initialState = {\r\n  logs: [],\r\n  loading: false,\r\n  error: null,\r\n  currentUser: {\r\n    id: 'admin_1',\r\n    name: 'Admin User',\r\n    email: 'admin@ivolex.com',\r\n    role: ROLES.ADMIN,\r\n    permissions: ROLE_PERMISSIONS[ROLES.ADMIN]\r\n  }\r\n}\r\n\r\nconst auditReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case AUDIT_ACTIONS_TYPES.ADD_LOG:\r\n      return {\r\n        ...state,\r\n        logs: [action.payload, ...state.logs],\r\n        loading: false\r\n      }\r\n\r\n    case AUDIT_ACTIONS_TYPES.LOAD_LOGS:\r\n      return {\r\n        ...state,\r\n        logs: action.payload,\r\n        loading: false\r\n      }\r\n\r\n    case AUDIT_ACTIONS_TYPES.CLEAR_LOGS:\r\n      return {\r\n        ...state,\r\n        logs: []\r\n      }\r\n\r\n    case AUDIT_ACTIONS_TYPES.SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      }\r\n\r\n    case AUDIT_ACTIONS_TYPES.SET_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        loading: false\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const AuditProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(auditReducer, initialState)\r\n  const { sendNotification } = useNotifications()\r\n\r\n  // Load audit logs from localStorage on mount\r\n  useEffect(() => {\r\n    const savedLogs = localStorage.getItem('ivolex_audit_logs')\r\n    if (savedLogs) {\r\n      try {\r\n        const logs = JSON.parse(savedLogs)\r\n        dispatch({ type: AUDIT_ACTIONS_TYPES.LOAD_LOGS, payload: logs })\r\n      } catch (error) {\r\n        console.error('Failed to load audit logs:', error)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Save logs to localStorage when they change\r\n  useEffect(() => {\r\n    if (state.logs.length > 0) {\r\n      // Keep only last 1000 logs to prevent storage bloat\r\n      const logsToSave = state.logs.slice(0, 1000)\r\n      localStorage.setItem('ivolex_audit_logs', JSON.stringify(logsToSave))\r\n    }\r\n  }, [state.logs])\r\n\r\n  // Permission checking function\r\n  const hasPermission = (permission, userRole = state.currentUser.role) => {\r\n    const rolePermissions = ROLE_PERMISSIONS[userRole] || []\r\n    return rolePermissions.includes(permission)\r\n  }\r\n\r\n  // Multiple permissions check\r\n  const hasAnyPermission = (permissions, userRole = state.currentUser.role) => {\r\n    return permissions.some(permission => hasPermission(permission, userRole))\r\n  }\r\n\r\n  const hasAllPermissions = (permissions, userRole = state.currentUser.role) => {\r\n    return permissions.every(permission => hasPermission(permission, userRole))\r\n  }\r\n\r\n  // Role checking\r\n  const hasRole = (role, userRole = state.currentUser.role) => {\r\n    return userRole === role\r\n  }\r\n\r\n  const hasMinimumRole = (minimumRole, userRole = state.currentUser.role) => {\r\n    const roleHierarchy = [\r\n      ROLES.CUSTOMER,\r\n      ROLES.VIEWER,\r\n      ROLES.MODERATOR,\r\n      ROLES.MANAGER,\r\n      ROLES.ADMIN,\r\n      ROLES.SUPER_ADMIN\r\n    ]\r\n    \r\n    const userRoleIndex = roleHierarchy.indexOf(userRole)\r\n    const minimumRoleIndex = roleHierarchy.indexOf(minimumRole)\r\n    \r\n    return userRoleIndex >= minimumRoleIndex\r\n  }\r\n\r\n  // Audit logging function\r\n  const logAction = async (action, resource, details = {}) => {\r\n    try {\r\n      const logEntry = {\r\n        id: `audit_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        timestamp: new Date().toISOString(),\r\n        userId: state.currentUser.id,\r\n        userName: state.currentUser.name,\r\n        userEmail: state.currentUser.email,\r\n        userRole: state.currentUser.role,\r\n        action,\r\n        resource,\r\n        details,\r\n        ipAddress: '192.168.1.1', // Would be real IP in production\r\n        userAgent: navigator.userAgent,\r\n        sessionId: sessionStorage.getItem('session_id') || 'unknown',\r\n        success: details.success !== false\r\n      }\r\n\r\n      dispatch({ type: AUDIT_ACTIONS_TYPES.ADD_LOG, payload: logEntry })\r\n\r\n      // Send notification for critical actions\r\n      if (isCriticalAction(action)) {\r\n        await sendNotification(\r\n          NOTIFICATION_TYPES.ADMIN_ALERT,\r\n          {\r\n            message: `Critical action performed: ${action} on ${resource} by ${state.currentUser.name}`,\r\n            messageAr: `تم تنفيذ إجراء مهم: ${action} على ${resource} بواسطة ${state.currentUser.name}`,\r\n            userId: state.currentUser.id,\r\n            action,\r\n            resource,\r\n            severity: 'high'\r\n          },\r\n          [NOTIFICATION_CHANNELS.IN_APP, NOTIFICATION_CHANNELS.EMAIL]\r\n        )\r\n      }\r\n\r\n      console.log('📋 Audit Log:', logEntry)\r\n      return logEntry\r\n    } catch (error) {\r\n      console.error('Failed to log audit action:', error)\r\n      dispatch({ type: AUDIT_ACTIONS_TYPES.SET_ERROR, payload: error.message })\r\n    }\r\n  }\r\n\r\n  // Check if action is critical and requires notification\r\n  const isCriticalAction = (action) => {\r\n    const criticalActions = [\r\n      AUDIT_ACTIONS.DELETE,\r\n      AUDIT_ACTIONS.ROLE_CHANGE,\r\n      AUDIT_ACTIONS.PERMISSION_CHANGE,\r\n      AUDIT_ACTIONS.SECURITY_EVENT,\r\n      AUDIT_ACTIONS.SETTINGS_CHANGE\r\n    ]\r\n    return criticalActions.includes(action)\r\n  }\r\n\r\n  // Get logs with filtering\r\n  const getFilteredLogs = (filters = {}) => {\r\n    let filteredLogs = [...state.logs]\r\n\r\n    if (filters.userId) {\r\n      filteredLogs = filteredLogs.filter(log => log.userId === filters.userId)\r\n    }\r\n\r\n    if (filters.action) {\r\n      filteredLogs = filteredLogs.filter(log => log.action === filters.action)\r\n    }\r\n\r\n    if (filters.resource) {\r\n      filteredLogs = filteredLogs.filter(log => log.resource.includes(filters.resource))\r\n    }\r\n\r\n    if (filters.startDate) {\r\n      filteredLogs = filteredLogs.filter(log => new Date(log.timestamp) >= new Date(filters.startDate))\r\n    }\r\n\r\n    if (filters.endDate) {\r\n      filteredLogs = filteredLogs.filter(log => new Date(log.timestamp) <= new Date(filters.endDate))\r\n    }\r\n\r\n    if (filters.success !== undefined) {\r\n      filteredLogs = filteredLogs.filter(log => log.success === filters.success)\r\n    }\r\n\r\n    return filteredLogs\r\n  }\r\n\r\n  // Export logs\r\n  const exportLogs = (format = 'json', filters = {}) => {\r\n    const logs = getFilteredLogs(filters)\r\n    \r\n    if (format === 'csv') {\r\n      return exportLogsAsCSV(logs)\r\n    }\r\n    \r\n    return JSON.stringify(logs, null, 2)\r\n  }\r\n\r\n  const exportLogsAsCSV = (logs) => {\r\n    const headers = ['Timestamp', 'User', 'Action', 'Resource', 'IP Address', 'Success', 'Details']\r\n    const csvRows = [\r\n      headers.join(','),\r\n      ...logs.map(log => [\r\n        log.timestamp,\r\n        `\"${log.userName}\"`,\r\n        log.action,\r\n        `\"${log.resource}\"`,\r\n        log.ipAddress,\r\n        log.success,\r\n        `\"${JSON.stringify(log.details).replace(/\"/g, '\"\"')}\"`\r\n      ].join(','))\r\n    ]\r\n    \r\n    return csvRows.join('\\n')\r\n  }\r\n\r\n  // Clear old logs (retention policy)\r\n  const clearOldLogs = (daysToKeep = 90) => {\r\n    const cutoffDate = new Date(Date.now() - daysToKeep * 24 * 60 * 60 * 1000)\r\n    const filteredLogs = state.logs.filter(log => new Date(log.timestamp) >= cutoffDate)\r\n    dispatch({ type: AUDIT_ACTIONS_TYPES.LOAD_LOGS, payload: filteredLogs })\r\n  }\r\n\r\n  const value = {\r\n    logs: state.logs,\r\n    loading: state.loading,\r\n    error: state.error,\r\n    currentUser: state.currentUser,\r\n    \r\n    // Permission functions\r\n    hasPermission,\r\n    hasAnyPermission,\r\n    hasAllPermissions,\r\n    hasRole,\r\n    hasMinimumRole,\r\n    \r\n    // Audit functions\r\n    logAction,\r\n    getFilteredLogs,\r\n    exportLogs,\r\n    clearOldLogs,\r\n    \r\n    // Constants\r\n    ROLES,\r\n    PERMISSIONS,\r\n    ROLE_PERMISSIONS,\r\n    AUDIT_ACTIONS\r\n  }\r\n\r\n  return (\r\n    <AuditContext.Provider value={value}>\r\n      {children}\r\n    </AuditContext.Provider>\r\n  )\r\n}\r\n\r\nexport const useAudit = () => {\r\n  const context = useContext(AuditContext)\r\n  if (!context) {\r\n    throw new Error('useAudit must be used within an AuditProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport default AuditContext","import { createContext, useContext, useState, useEffect } from 'react'\n\nconst ShippingContext = createContext()\n\nexport { ShippingContext }\n\nexport const useShipping = () => {\n  const context = useContext(ShippingContext)\n  if (!context) {\n    throw new Error('useShipping must be used within a ShippingProvider')\n  }\n  return context\n}\n\nexport const ShippingProvider = ({ children }) => {\n  const [shippingMethods, setShippingMethods] = useState([])\n  const [selectedMethod, setSelectedMethod] = useState(null)\n  const [shippingAddress, setShippingAddress] = useState(null)\n  const [trackingData, setTrackingData] = useState({})\n  const [loading, setLoading] = useState(false)\n\n  // const { addNotification } = useNotifications() // Disabled temporarily\n\n  // Mock shipping methods - in real app, these would come from shipping APIs\n  const mockShippingMethods = [\n    {\n      id: 'standard',\n      name: 'Standard Shipping',\n      description: 'Delivery within 5-7 business days',\n      provider: 'Saudi Post',\n      type: 'standard',\n      estimatedDays: '5-7',\n      trackingAvailable: true,\n      baseRate: 25,\n      freeThreshold: 300,\n      maxWeight: 30, // kg\n      supportedRegions: ['riyadh', 'jeddah', 'dammam', 'all_saudi']\n    },\n    {\n      id: 'express',\n      name: 'Express Shipping',\n      description: 'Delivery within 2-3 business days',\n      provider: 'SMSA Express',\n      type: 'express',\n      estimatedDays: '2-3',\n      trackingAvailable: true,\n      baseRate: 45,\n      freeThreshold: 500,\n      maxWeight: 25, // kg\n      supportedRegions: ['riyadh', 'jeddah', 'dammam', 'major_cities']\n    },\n    {\n      id: 'same_day',\n      name: 'Same Day Delivery',\n      description: 'Delivery within 4-6 hours (major cities only)',\n      provider: 'IVOLEX Express',\n      type: 'same_day',\n      estimatedDays: 'Same day',\n      trackingAvailable: true,\n      baseRate: 75,\n      freeThreshold: 1000,\n      maxWeight: 10, // kg\n      supportedRegions: ['riyadh', 'jeddah']\n    },\n    {\n      id: 'pickup',\n      name: 'Store Pickup',\n      description: 'Pick up from our store locations',\n      provider: 'IVOLEX Stores',\n      type: 'pickup',\n      estimatedDays: '1-2',\n      trackingAvailable: false,\n      baseRate: 0,\n      freeThreshold: 0,\n      maxWeight: null,\n      supportedRegions: ['riyadh', 'jeddah', 'dammam']\n    }\n  ]\n\n  // Mock store locations\n  const storeLocations = [\n    {\n      id: 'riyadh_main',\n      name: 'IVOLEX Riyadh Main Store',\n      address: 'King Fahd Road, Olaya District, Riyadh 12213',\n      city: 'Riyadh',\n      phone: '+966 11 234 5678',\n      hours: 'Sun-Thu: 9AM-10PM, Fri-Sat: 2PM-11PM',\n      coordinates: { lat: 24.7136, lng: 46.6753 }\n    },\n    {\n      id: 'jeddah_main',\n      name: 'IVOLEX Jeddah Main Store',\n      address: 'Prince Sultan Road, Al Salamah District, Jeddah 23433',\n      city: 'Jeddah',\n      phone: '+966 12 345 6789',\n      hours: 'Sun-Thu: 9AM-10PM, Fri-Sat: 2PM-11PM',\n      coordinates: { lat: 21.5433, lng: 39.1728 }\n    },\n    {\n      id: 'dammam_main',\n      name: 'IVOLEX Dammam Main Store',\n      address: 'King Saud Road, Al Faisaliyah District, Dammam 32245',\n      city: 'Dammam',\n      phone: '+966 13 456 7890',\n      hours: 'Sun-Thu: 9AM-10PM, Fri-Sat: 2PM-11PM',\n      coordinates: { lat: 26.4207, lng: 50.0888 }\n    }\n  ]\n\n  // Initialize shipping methods\n  useEffect(() => {\n    setShippingMethods(mockShippingMethods)\n  }, [])\n\n  // Calculate shipping rate based on cart and location\n  const calculateShippingRate = (cartItems, deliveryAddress, methodId) => {\n    const method = mockShippingMethods.find(m => m.id === methodId)\n    if (!method) return null\n\n    // Calculate total weight and value\n    const totalWeight = cartItems.reduce((sum, item) => sum + (item.weight || 1) * item.quantity, 0)\n    const totalValue = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0)\n\n    // Check if free shipping threshold is met\n    if (totalValue >= method.freeThreshold) {\n      return {\n        rate: 0,\n        originalRate: method.baseRate,\n        isFree: true,\n        currency: 'SAR'\n      }\n    }\n\n    // Check weight limit\n    if (method.maxWeight && totalWeight > method.maxWeight) {\n      return {\n        error: `Exceeds weight limit of ${method.maxWeight}kg`\n      }\n    }\n\n    // Calculate rate based on weight\n    let rate = method.baseRate\n    if (totalWeight > 5) {\n      rate += Math.ceil((totalWeight - 5) / 2) * 10 // Additional 10 SAR per 2kg\n    }\n\n    // Apply location-based adjustments\n    if (deliveryAddress?.city) {\n      const cityLower = deliveryAddress.city.toLowerCase()\n      if (!method.supportedRegions.includes(cityLower) && !method.supportedRegions.includes('all_saudi')) {\n        if (method.supportedRegions.includes('major_cities')) {\n          return {\n            error: 'Not available in this location'\n          }\n        }\n        rate += 20 // Remote area surcharge\n      }\n    }\n\n    return {\n      rate,\n      originalRate: method.baseRate,\n      isFree: false,\n      currency: 'SAR',\n      weightSurcharge: rate - method.baseRate\n    }\n  }\n\n  // Get available shipping methods for location\n  const getAvailableShippingMethods = (cartItems, deliveryAddress) => {\n    if (!cartItems || cartItems.length === 0) return []\n\n    return mockShippingMethods.filter(method => {\n      if (!deliveryAddress?.city) return true\n\n      const cityLower = deliveryAddress.city.toLowerCase()\n      return method.supportedRegions.includes(cityLower) || \n             method.supportedRegions.includes('all_saudi') ||\n             (method.supportedRegions.includes('major_cities') && \n              ['riyadh', 'jeddah', 'dammam', 'mecca', 'medina'].includes(cityLower))\n    }).map(method => {\n      const rateInfo = calculateShippingRate(cartItems, deliveryAddress, method.id)\n      return {\n        ...method,\n        rateInfo,\n        available: !rateInfo?.error\n      }\n    })\n  }\n\n  // Create shipment\n  const createShipment = async (orderData) => {\n    setLoading(true)\n    try {\n      // Simulate API call to shipping provider\n      await new Promise(resolve => setTimeout(resolve, 2000))\n\n      const trackingNumber = `TRK${Date.now()}${Math.random().toString(36).substr(2, 6).toUpperCase()}`\n      \n      const shipmentData = {\n        id: `SHIP_${Date.now()}`,\n        orderId: orderData.orderId,\n        trackingNumber,\n        provider: selectedMethod?.provider || 'Saudi Post',\n        method: selectedMethod?.name || 'Standard Shipping',\n        status: 'pending',\n        estimatedDelivery: calculateEstimatedDelivery(selectedMethod?.estimatedDays),\n        shippingAddress: orderData.shippingAddress,\n        timeline: [\n          {\n            status: 'pending',\n            description: 'Shipment created',\n            timestamp: new Date().toISOString(),\n            location: 'IVOLEX Warehouse'\n          }\n        ]\n      }\n\n      // Store tracking data\n      setTrackingData(prev => ({\n        ...prev,\n        [trackingNumber]: shipmentData\n      }))\n\n      /*\n      addNotification({\n        title: 'Shipment Created',\n        message: `Your order has been prepared for shipping. Tracking: ${trackingNumber}`,\n        type: 'success'\n      })\n      */\n\n      return shipmentData\n    } catch (error) {\n      /*\n      addNotification({\n        title: 'Shipping Error',\n        message: 'Failed to create shipment. Please try again.',\n        type: 'error'\n      })\n      */\n      console.error('Shipment creation failed:', error)\n      throw error\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Track shipment\n  const trackShipment = async (trackingNumber) => {\n    setLoading(true)\n    try {\n      // Simulate API call to tracking service\n      await new Promise(resolve => setTimeout(resolve, 1500))\n\n      // Mock tracking statuses\n      const mockStatuses = ['pending', 'picked_up', 'in_transit', 'out_for_delivery', 'delivered']\n      const currentStatusIndex = Math.floor(Math.random() * mockStatuses.length)\n      const currentStatus = mockStatuses[currentStatusIndex]\n\n      const trackingInfo = {\n        trackingNumber,\n        status: currentStatus,\n        lastUpdated: new Date().toISOString(),\n        estimatedDelivery: calculateEstimatedDelivery('2-3'),\n        timeline: mockStatuses.slice(0, currentStatusIndex + 1).map((status, index) => ({\n          status,\n          description: getStatusDescription(status),\n          timestamp: new Date(Date.now() - (mockStatuses.length - index - 1) * 24 * 60 * 60 * 1000).toISOString(),\n          location: getStatusLocation(status)\n        }))\n      }\n\n      setTrackingData(prev => ({\n        ...prev,\n        [trackingNumber]: trackingInfo\n      }))\n\n      return trackingInfo\n    } catch (error) {\n      /*\n      addNotification({\n        title: 'Tracking Error',\n        message: 'Failed to retrieve tracking information. Please try again.',\n        type: 'error'\n      })\n      */\n      console.error('Tracking failed:', error)\n      throw error\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Helper functions\n  const calculateEstimatedDelivery = (estimatedDays) => {\n    const days = estimatedDays.includes('-') \n      ? parseInt(estimatedDays.split('-')[1]) \n      : parseInt(estimatedDays) || 5\n\n    const deliveryDate = new Date()\n    deliveryDate.setDate(deliveryDate.getDate() + days)\n    return deliveryDate.toISOString()\n  }\n\n  const getStatusDescription = (status) => {\n    const descriptions = {\n      pending: 'Order received and being prepared',\n      picked_up: 'Package picked up from warehouse',\n      in_transit: 'Package in transit to destination',\n      out_for_delivery: 'Out for delivery',\n      delivered: 'Package delivered successfully'\n    }\n    return descriptions[status] || 'Status update'\n  }\n\n  const getStatusLocation = (status) => {\n    const locations = {\n      pending: 'IVOLEX Warehouse',\n      picked_up: 'Distribution Center',\n      in_transit: 'In Transit',\n      out_for_delivery: 'Local Facility',\n      delivered: 'Delivered'\n    }\n    return locations[status] || 'Unknown'\n  }\n\n  const value = {\n    shippingMethods,\n    // shippingRates, // Disabled temporarily\n    selectedMethod,\n    shippingAddress,\n    trackingData,\n    storeLocations,\n    loading,\n    calculateShippingRate,\n    getAvailableShippingMethods,\n    setSelectedMethod,\n    setShippingAddress,\n    createShipment,\n    trackShipment\n  }\n\n  return (\n    <ShippingContext.Provider value={value}>\n      {children}\n    </ShippingContext.Provider>\n  )\n}\n\nexport default ShippingContext","import { createContext, useContext, useEffect, useState } from 'react'\r\n\r\nconst ThemeContext = createContext(null)\r\n\r\nexport function ThemeProvider({ children }) {\r\n  const [theme, setTheme] = useState('light')\r\n  const [systemTheme, setSystemTheme] = useState('light')\r\n\r\n  // Detect system theme preference\r\n  useEffect(() => {\r\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\r\n    setSystemTheme(mediaQuery.matches ? 'dark' : 'light')\r\n    \r\n    const handler = (e) => setSystemTheme(e.matches ? 'dark' : 'light')\r\n    mediaQuery.addEventListener('change', handler)\r\n    \r\n    return () => mediaQuery.removeEventListener('change', handler)\r\n  }, [])\r\n\r\n  // Load saved theme preference\r\n  useEffect(() => {\r\n    const savedTheme = localStorage.getItem('theme')\r\n    if (savedTheme && ['light', 'dark', 'system'].includes(savedTheme)) {\r\n      setTheme(savedTheme)\r\n    }\r\n  }, [])\r\n\r\n  // Apply theme to document\r\n  useEffect(() => {\r\n    const effectiveTheme = theme === 'system' ? systemTheme : theme\r\n    \r\n    if (effectiveTheme === 'dark') {\r\n      document.documentElement.classList.add('dark')\r\n    } else {\r\n      document.documentElement.classList.remove('dark')\r\n    }\r\n  }, [theme, systemTheme])\r\n\r\n  const updateTheme = (newTheme) => {\r\n    setTheme(newTheme)\r\n    localStorage.setItem('theme', newTheme)\r\n  }\r\n\r\n  const value = {\r\n    theme,\r\n    effectiveTheme: theme === 'system' ? systemTheme : theme,\r\n    setTheme: updateTheme,\r\n    systemTheme\r\n  }\r\n\r\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\r\n}\r\n\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext)\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within ThemeProvider')\r\n  }\r\n  return context\r\n}","// Security configuration for IVOLEX e-commerce platform\r\n// Implements security headers, CSP, and input sanitization\r\n\r\n// Content Security Policy configuration\r\nexport const cspConfig = {\r\n  'default-src': [\"'self'\"],\r\n  'script-src': [\r\n    \"'self'\",\r\n    \"'unsafe-inline'\", // Required for Vite in development\r\n    \"'unsafe-eval'\", // Required for Vite in development\r\n    'https://cdn.jsdelivr.net',\r\n    'https://unpkg.com'\r\n  ],\r\n  'style-src': [\r\n    \"'self'\",\r\n    \"'unsafe-inline'\", // Required for CSS-in-JS and inline styles\r\n    'https://fonts.googleapis.com'\r\n  ],\r\n  'img-src': [\r\n    \"'self'\",\r\n    'data:', // For base64 images\r\n    'blob:', // For uploaded images\r\n    'https:', // Allow HTTPS images from any domain\r\n    'http://localhost:*' // Development only\r\n  ],\r\n  'font-src': [\r\n    \"'self'\",\r\n    'https://fonts.gstatic.com',\r\n    'data:'\r\n  ],\r\n  'connect-src': [\r\n    \"'self'\",\r\n    'https://api.', // API endpoints\r\n    'wss:', // WebSocket connections\r\n    'http://localhost:*', // Development API\r\n    'https://localhost:*'\r\n  ],\r\n  'media-src': [\"'self'\", 'blob:', 'data:'],\r\n  'object-src': [\"'none'\"],\r\n  'base-uri': [\"'self'\"],\r\n  'form-action': [\"'self'\"],\r\n  'frame-ancestors': [\"'none'\"],\r\n  'upgrade-insecure-requests': []\r\n}\r\n\r\n// Security headers configuration\r\nexport const securityHeaders = {\r\n  // Prevent XSS attacks\r\n  'X-XSS-Protection': '1; mode=block',\r\n  \r\n  // Prevent clickjacking\r\n  'X-Frame-Options': 'DENY',\r\n  \r\n  // Prevent MIME type sniffing\r\n  'X-Content-Type-Options': 'nosniff',\r\n  \r\n  // Referrer policy\r\n  'Referrer-Policy': 'strict-origin-when-cross-origin',\r\n  \r\n  // Permissions policy\r\n  'Permissions-Policy': 'camera=(), microphone=(), geolocation=(), interest-cohort=()',\r\n  \r\n  // Strict Transport Security (HTTPS only)\r\n  'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload',\r\n  \r\n  // Cross-Origin policies\r\n  'Cross-Origin-Embedder-Policy': 'credentialless',\r\n  'Cross-Origin-Opener-Policy': 'same-origin',\r\n  'Cross-Origin-Resource-Policy': 'same-origin'\r\n}\r\n\r\n// Generate CSP header string\r\nexport function generateCSPHeader() {\r\n  return Object.entries(cspConfig)\r\n    .map(([directive, sources]) => `${directive} ${sources.join(' ')}`)\r\n    .join('; ')\r\n}\r\n\r\n// Input sanitization utilities\r\nexport const sanitization = {\r\n  // Sanitize HTML input (remove script tags and dangerous attributes)\r\n  html: (input) => {\r\n    if (typeof input !== 'string') return ''\r\n    return input\r\n      .replace(/<script[^>]*>.*?<\\/script>/gi, '')\r\n      .replace(/<iframe[^>]*>.*?<\\/iframe>/gi, '')\r\n      .replace(/javascript:/gi, '')\r\n      .replace(/on\\w+\\s*=/gi, '')\r\n      .replace(/<.*?>/g, '') // Remove all HTML tags for basic sanitization\r\n  },\r\n\r\n  // Sanitize user input for safe database storage\r\n  text: (input) => {\r\n    if (typeof input !== 'string') return ''\r\n    return input\r\n      .trim()\r\n      .replace(/[<>\"']/g, '') // Remove potentially dangerous characters\r\n      .substring(0, 1000) // Limit length\r\n  },\r\n\r\n  // Sanitize email input\r\n  email: (input) => {\r\n    if (typeof input !== 'string') return ''\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n    const cleaned = input.trim().toLowerCase()\r\n    return emailRegex.test(cleaned) ? cleaned : ''\r\n  },\r\n\r\n  // Sanitize phone number\r\n  phone: (input) => {\r\n    if (typeof input !== 'string') return ''\r\n    return input.replace(/[^\\d+\\-\\s()]/g, '').substring(0, 20)\r\n  },\r\n\r\n  // Sanitize search query\r\n  search: (input) => {\r\n    if (typeof input !== 'string') return ''\r\n    return input\r\n      .trim()\r\n      .replace(/[<>\"';&]/g, '') // Remove SQL injection and XSS characters\r\n      .substring(0, 100)\r\n  },\r\n\r\n  // Sanitize URL\r\n  url: (input) => {\r\n    if (typeof input !== 'string') return ''\r\n    try {\r\n      const url = new URL(input)\r\n      // Only allow http and https protocols\r\n      if (url.protocol !== 'http:' && url.protocol !== 'https:') {\r\n        return ''\r\n      }\r\n      return url.toString()\r\n    } catch {\r\n      return ''\r\n    }\r\n  }\r\n}\r\n\r\n// Rate limiting configuration\r\nexport const rateLimiting = {\r\n  // API request limits\r\n  api: {\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 100, // Limit each IP to 100 requests per windowMs\r\n    message: 'Too many requests from this IP, please try again later.'\r\n  },\r\n  \r\n  // Form submission limits\r\n  forms: {\r\n    windowMs: 60 * 1000, // 1 minute\r\n    max: 5, // Limit each IP to 5 form submissions per minute\r\n    message: 'Too many form submissions, please wait before trying again.'\r\n  },\r\n  \r\n  // Authentication limits\r\n  auth: {\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 5, // Limit failed login attempts\r\n    message: 'Too many login attempts, please try again later.'\r\n  }\r\n}\r\n\r\n// Security validation functions\r\nexport const validation = {\r\n  // Validate that input doesn't contain suspicious patterns\r\n  checkSuspiciousPatterns: (input) => {\r\n    const suspiciousPatterns = [\r\n      /<script/i,\r\n      /javascript:/i,\r\n      /vbscript:/i,\r\n      /data:text\\/html/i,\r\n      /on\\w+\\s*=/i,\r\n      /style\\s*=.*expression/i,\r\n      /['\"]\\\\s*j\\\\s*a\\\\s*v\\\\s*a\\\\s*s\\\\s*c\\\\s*r\\\\s*i\\\\s*p\\\\s*t/i\r\n    ]\r\n    \r\n    return !suspiciousPatterns.some(pattern => pattern.test(input))\r\n  },\r\n\r\n  // Validate file upload\r\n  validateFile: (file) => {\r\n    const allowedTypes = [\r\n      'image/jpeg',\r\n      'image/png',\r\n      'image/webp',\r\n      'image/gif'\r\n    ]\r\n    \r\n    const maxSize = 5 * 1024 * 1024 // 5MB\r\n    \r\n    return {\r\n      isValid: allowedTypes.includes(file.type) && file.size <= maxSize,\r\n      error: !allowedTypes.includes(file.type) \r\n        ? 'Invalid file type. Only images are allowed.'\r\n        : file.size > maxSize \r\n        ? 'File too large. Maximum size is 5MB.'\r\n        : null\r\n    }\r\n  },\r\n\r\n  // Validate JSON input\r\n  validateJSON: (input) => {\r\n    try {\r\n      const parsed = JSON.parse(input)\r\n      // Ensure the parsed object doesn't contain suspicious keys\r\n      const suspiciousKeys = ['__proto__', 'constructor', 'prototype']\r\n      const hasControls = JSON.stringify(parsed).includes('\\\\u')\r\n      \r\n      if (hasControls) return false\r\n      \r\n      const checkObject = (obj) => {\r\n        if (typeof obj !== 'object' || obj === null) return true\r\n        return !Object.keys(obj).some(key => suspiciousKeys.includes(key))\r\n      }\r\n      \r\n      return checkObject(parsed)\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\n// Environment-specific security settings\r\nexport const environmentConfig = {\r\n  development: {\r\n    enableCSP: false, // Disabled for easier development\r\n    strictMode: false,\r\n    allowUnsafeInline: true\r\n  },\r\n  \r\n  production: {\r\n    enableCSP: true,\r\n    strictMode: true,\r\n    allowUnsafeInline: false,\r\n    forceHTTPS: true,\r\n    enableHSTS: true\r\n  }\r\n}\r\n\r\n// Security audit configuration\r\nexport const auditConfig = {\r\n  // Dependencies to exclude from security audit (if needed)\r\n  excludeDependencies: [],\r\n  \r\n  // Severity levels to report\r\n  auditLevel: 'moderate', // 'low', 'moderate', 'high', 'critical'\r\n  \r\n  // Auto-fix configuration\r\n  autoFix: {\r\n    enabled: true,\r\n    skipBreaking: true\r\n  }\r\n}\r\n\r\nexport default {\r\n  cspConfig,\r\n  securityHeaders,\r\n  generateCSPHeader,\r\n  sanitization,\r\n  rateLimiting,\r\n  validation,\r\n  environmentConfig,\r\n  auditConfig\r\n}","import { useEffect } from 'react'\r\nimport { useCSPReporting, useSecurityMonitor } from '../hooks/useSecurity.js'\r\nimport { environmentConfig, generateCSPHeader } from '../config/security.js'\r\n\r\n// Security Provider component\r\nexport function SecurityProvider({ children }) {\r\n  const { setupCSPListener } = useCSPReporting()\r\n  const { logSecurityEvent } = useSecurityMonitor()\r\n\r\n  useEffect(() => {\r\n    // Set up CSP violation reporting\r\n    const cleanup = setupCSPListener()\r\n\r\n    // Apply security headers via meta tags (for client-side)\r\n    const applySecurityMeta = () => {\r\n      const head = document.head\r\n\r\n      // CSP meta tag (fallback if server headers not available)\r\n      if (environmentConfig.production.enableCSP && import.meta.env.PROD) {\r\n        const cspMeta = document.createElement('meta')\r\n        cspMeta.httpEquiv = 'Content-Security-Policy'\r\n        cspMeta.content = generateCSPHeader()\r\n        head.appendChild(cspMeta)\r\n      }\r\n\r\n      // Referrer Policy\r\n      const referrerMeta = document.createElement('meta')\r\n      referrerMeta.name = 'referrer'\r\n      referrerMeta.content = 'strict-origin-when-cross-origin'\r\n      head.appendChild(referrerMeta)\r\n\r\n      // Viewport security\r\n      const viewportMeta = document.querySelector('meta[name=\"viewport\"]')\r\n      if (viewportMeta && !viewportMeta.content.includes('user-scalable=no')) {\r\n        // Ensure viewport allows user scaling for accessibility\r\n        viewportMeta.content = viewportMeta.content.replace(\r\n          /user-scalable=no/g, \r\n          'user-scalable=yes'\r\n        )\r\n      }\r\n    }\r\n\r\n    applySecurityMeta()\r\n\r\n    // Monitor for suspicious activity\r\n    const monitorActivity = () => {\r\n      // Monitor for rapid form submissions\r\n      let submissionCount = 0\r\n      const resetCount = () => { submissionCount = 0 }\r\n      \r\n      document.addEventListener('submit', () => {\r\n        submissionCount++\r\n        if (submissionCount > 5) {\r\n          logSecurityEvent({\r\n            type: 'rapid_submissions',\r\n            severity: 'medium',\r\n            details: `${submissionCount} form submissions in rapid succession`\r\n          })\r\n        }\r\n      })\r\n\r\n      setInterval(resetCount, 60000) // Reset every minute\r\n\r\n      // Monitor for suspicious copy/paste activity\r\n      document.addEventListener('paste', (e) => {\r\n        const pastedData = e.clipboardData.getData('text')\r\n        if (pastedData.length > 1000 || /<script|javascript:/i.test(pastedData)) {\r\n          logSecurityEvent({\r\n            type: 'suspicious_paste',\r\n            severity: 'medium',\r\n            details: 'Large or potentially malicious content pasted'\r\n          })\r\n        }\r\n      })\r\n\r\n      // Monitor for developer tools usage (basic detection)\r\n      let devtools = {\r\n        open: false,\r\n        orientation: null\r\n      }\r\n      const threshold = 160\r\n\r\n      setInterval(() => {\r\n        if (window.outerHeight - window.innerHeight > threshold || \r\n            window.outerWidth - window.innerWidth > threshold) {\r\n          if (!devtools.open) {\r\n            devtools.open = true\r\n            logSecurityEvent({\r\n              type: 'devtools_detected',\r\n              severity: 'low',\r\n              details: 'Developer tools may be open'\r\n            })\r\n          }\r\n        } else {\r\n          devtools.open = false\r\n        }\r\n      }, 500)\r\n    }\r\n\r\n    monitorActivity()\r\n\r\n    return cleanup\r\n  }, [setupCSPListener, logSecurityEvent])\r\n\r\n  return children\r\n}\r\n\r\n// Security Header component for server-side rendering\r\nexport function SecurityHeaders() {\r\n  useEffect(() => {\r\n    // This would typically be handled by the server\r\n    // but we can provide client-side fallbacks\r\n    \r\n    // Disable right-click context menu in production (optional)\r\n    if (import.meta.env.PROD) {\r\n      const handleContextMenu = (e) => {\r\n        if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {\r\n          // Allow context menu on form inputs for accessibility\r\n          // e.preventDefault() // Uncomment to disable right-click\r\n        }\r\n      }\r\n      \r\n      document.addEventListener('contextmenu', handleContextMenu)\r\n      \r\n      return () => {\r\n        document.removeEventListener('contextmenu', handleContextMenu)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  return null\r\n}\r\n\r\n// Rate Limiting component\r\nexport function RateLimitProvider({ children }) {\r\n  useEffect(() => {\r\n    const rateLimiters = new Map()\r\n\r\n    const checkRateLimit = (key, limit = 10, windowMs = 60000) => {\r\n      const now = Date.now()\r\n      const limiter = rateLimiters.get(key) || { count: 0, resetTime: now + windowMs }\r\n\r\n      if (now > limiter.resetTime) {\r\n        limiter.count = 1\r\n        limiter.resetTime = now + windowMs\r\n      } else {\r\n        limiter.count++\r\n      }\r\n\r\n      rateLimiters.set(key, limiter)\r\n      return limiter.count <= limit\r\n    }\r\n\r\n    // Add rate limiting to fetch requests\r\n    const originalFetch = window.fetch\r\n    window.fetch = function(url, options = {}) {\r\n      const rateLimitKey = `fetch_${url}`\r\n      \r\n      if (!checkRateLimit(rateLimitKey, 50, 60000)) { // 50 requests per minute\r\n        return Promise.reject(new Error('Rate limit exceeded'))\r\n      }\r\n\r\n      return originalFetch.call(this, url, options)\r\n    }\r\n\r\n    return () => {\r\n      window.fetch = originalFetch\r\n    }\r\n  }, [])\r\n\r\n  return children\r\n}\r\n\r\n// Input Sanitization HOC\r\nexport function withInputSanitization(WrappedComponent) {\r\n  return function SanitizedComponent(props) {\r\n    const sanitizedProps = { ...props }\r\n\r\n    // Sanitize string props\r\n    Object.keys(sanitizedProps).forEach(key => {\r\n      const value = sanitizedProps[key]\r\n      if (typeof value === 'string') {\r\n        // Basic sanitization\r\n        sanitizedProps[key] = value\r\n          .replace(/<script[^>]*>.*?<\\/script>/gi, '')\r\n          .replace(/javascript:/gi, '')\r\n          .replace(/on\\w+\\s*=/gi, '')\r\n      }\r\n    })\r\n\r\n    return <WrappedComponent {...sanitizedProps} />\r\n  }\r\n}\r\n\r\n// Security validation component\r\nexport function SecurityValidator({ children, onViolation }) {\r\n  useEffect(() => {\r\n    // Monitor for XSS attempts\r\n    const checkForXSS = (event) => {\r\n      const target = event.target\r\n      if (target && target.value) {\r\n        const suspiciousPatterns = [\r\n          /<script/i,\r\n          /javascript:/i,\r\n          /vbscript:/i,\r\n          /on\\w+\\s*=/i\r\n        ]\r\n\r\n        if (suspiciousPatterns.some(pattern => pattern.test(target.value))) {\r\n          event.preventDefault()\r\n          target.value = target.value.replace(/[<>\"']/g, '')\r\n          \r\n          if (onViolation) {\r\n            onViolation({\r\n              type: 'xss_attempt',\r\n              element: target.tagName,\r\n              value: target.value\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    document.addEventListener('input', checkForXSS)\r\n    document.addEventListener('change', checkForXSS)\r\n\r\n    return () => {\r\n      document.removeEventListener('input', checkForXSS)\r\n      document.removeEventListener('change', checkForXSS)\r\n    }\r\n  }, [onViolation])\r\n\r\n  return children\r\n}\r\n\r\nexport default {\r\n  SecurityProvider,\r\n  SecurityHeaders,\r\n  RateLimitProvider,\r\n  withInputSanitization,\r\n  SecurityValidator\r\n}","import { useState, useCallback } from 'react'\r\nimport { sanitization, validation } from '../config/security.js'\r\n\r\n// Hook for secure input handling\r\nexport function useSecureInput(initialValue = '', sanitizeType = 'text') {\r\n  const [value, setValue] = useState(initialValue)\r\n  const [isValid, setIsValid] = useState(true)\r\n  const [error, setError] = useState('')\r\n\r\n  const sanitize = useCallback((input) => {\r\n    switch (sanitizeType) {\r\n      case 'html':\r\n        return sanitization.html(input)\r\n      case 'email':\r\n        return sanitization.email(input)\r\n      case 'phone':\r\n        return sanitization.phone(input)\r\n      case 'search':\r\n        return sanitization.search(input)\r\n      case 'url':\r\n        return sanitization.url(input)\r\n      default:\r\n        return sanitization.text(input)\r\n    }\r\n  }, [sanitizeType])\r\n\r\n  const handleChange = useCallback((newValue) => {\r\n    const sanitized = sanitize(newValue)\r\n    const suspicious = !validation.checkSuspiciousPatterns(newValue)\r\n    \r\n    if (suspicious) {\r\n      setError('Input contains suspicious content')\r\n      setIsValid(false)\r\n      return\r\n    }\r\n\r\n    setValue(sanitized)\r\n    setError('')\r\n    setIsValid(true)\r\n  }, [sanitize])\r\n\r\n  const reset = useCallback(() => {\r\n    setValue(initialValue)\r\n    setError('')\r\n    setIsValid(true)\r\n  }, [initialValue])\r\n\r\n  return {\r\n    value,\r\n    setValue: handleChange,\r\n    isValid,\r\n    error,\r\n    reset,\r\n    sanitizedValue: sanitize(value)\r\n  }\r\n}\r\n\r\n// Hook for file upload security\r\nexport function useSecureFileUpload() {\r\n  const [files, setFiles] = useState([])\r\n  const [errors, setErrors] = useState([])\r\n  const [isUploading, setIsUploading] = useState(false)\r\n\r\n  const validateAndAddFile = useCallback((file) => {\r\n    const validationResult = validation.validateFile(file)\r\n    \r\n    if (!validationResult.isValid) {\r\n      setErrors(prev => [...prev, {\r\n        file: file.name,\r\n        error: validationResult.error\r\n      }])\r\n      return false\r\n    }\r\n\r\n    // Additional security checks\r\n    const reader = new FileReader()\r\n    reader.onload = (e) => {\r\n      const content = e.target.result\r\n      // Check for embedded scripts in image files\r\n      if (content.includes('<script') || content.includes('javascript:')) {\r\n        setErrors(prev => [...prev, {\r\n          file: file.name,\r\n          error: 'File contains suspicious content'\r\n        }])\r\n        return\r\n      }\r\n\r\n      setFiles(prev => [...prev, {\r\n        file,\r\n        id: Date.now() + Math.random(),\r\n        preview: URL.createObjectURL(file)\r\n      }])\r\n    }\r\n    reader.readAsText(file.slice(0, 1024)) // Read first 1KB to check for scripts\r\n    \r\n    return true\r\n  }, [])\r\n\r\n  const removeFile = useCallback((id) => {\r\n    setFiles(prev => {\r\n      const updated = prev.filter(f => f.id !== id)\r\n      // Cleanup object URLs\r\n      const removed = prev.find(f => f.id === id)\r\n      if (removed?.preview) {\r\n        URL.revokeObjectURL(removed.preview)\r\n      }\r\n      return updated\r\n    })\r\n  }, [])\r\n\r\n  const clearErrors = useCallback(() => {\r\n    setErrors([])\r\n  }, [])\r\n\r\n  const clearAll = useCallback(() => {\r\n    files.forEach(f => {\r\n      if (f.preview) {\r\n        URL.revokeObjectURL(f.preview)\r\n      }\r\n    })\r\n    setFiles([])\r\n    setErrors([])\r\n  }, [files])\r\n\r\n  return {\r\n    files,\r\n    errors,\r\n    isUploading,\r\n    setIsUploading,\r\n    validateAndAddFile,\r\n    removeFile,\r\n    clearErrors,\r\n    clearAll\r\n  }\r\n}\r\n\r\n// Hook for secure form submission\r\nexport function useSecureForm(initialData = {}) {\r\n  const [data, setData] = useState(initialData)\r\n  const [errors, setErrors] = useState({})\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [submissionCount, setSubmissionCount] = useState(0)\r\n\r\n  const updateField = useCallback((field, value, sanitizeType = 'text') => {\r\n    const sanitized = sanitization[sanitizeType] ? \r\n      sanitization[sanitizeType](value) : \r\n      sanitization.text(value)\r\n    \r\n    if (!validation.checkSuspiciousPatterns(value)) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: 'Invalid input detected'\r\n      }))\r\n      return\r\n    }\r\n\r\n    setData(prev => ({ ...prev, [field]: sanitized }))\r\n    \r\n    // Clear error for this field if it exists\r\n    if (errors[field]) {\r\n      setErrors(prev => {\r\n        const updated = { ...prev }\r\n        delete updated[field]\r\n        return updated\r\n      })\r\n    }\r\n  }, [errors])\r\n\r\n  const validateForm = useCallback((validationSchema) => {\r\n    const newErrors = {}\r\n    let isValid = true\r\n\r\n    for (const [field, value] of Object.entries(data)) {\r\n      if (validationSchema[field]) {\r\n        const fieldValidation = validationSchema[field](value)\r\n        if (!fieldValidation.isValid) {\r\n          newErrors[field] = fieldValidation.error\r\n          isValid = false\r\n        }\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return isValid\r\n  }, [data])\r\n\r\n  const submitForm = useCallback(async (submitFunction, validationSchema = {}) => {\r\n    // Rate limiting check\r\n    if (submissionCount >= 5) {\r\n      setErrors({ general: 'Too many submissions. Please wait before trying again.' })\r\n      return false\r\n    }\r\n\r\n    setIsSubmitting(true)\r\n    setSubmissionCount(prev => prev + 1)\r\n\r\n    try {\r\n      // Validate form if schema provided\r\n      if (Object.keys(validationSchema).length > 0) {\r\n        const isValid = validateForm(validationSchema)\r\n        if (!isValid) {\r\n          setIsSubmitting(false)\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Submit the form\r\n      const result = await submitFunction(data)\r\n      setIsSubmitting(false)\r\n      return result\r\n    } catch {\r\n      setErrors({ general: 'Submission failed. Please try again.' })\r\n      setIsSubmitting(false)\r\n      return false\r\n    }\r\n  }, [data, submissionCount, validateForm])\r\n\r\n  const reset = useCallback(() => {\r\n    setData(initialData)\r\n    setErrors({})\r\n    setIsSubmitting(false)\r\n  }, [initialData])\r\n\r\n  return {\r\n    data,\r\n    errors,\r\n    isSubmitting,\r\n    updateField,\r\n    validateForm,\r\n    submitForm,\r\n    reset\r\n  }\r\n}\r\n\r\n// Hook for security monitoring\r\nexport function useSecurityMonitor() {\r\n  const [securityEvents, setSecurityEvents] = useState([])\r\n  const [threatLevel, setThreatLevel] = useState('low')\r\n\r\n  const logSecurityEvent = useCallback((event) => {\r\n    const securityEvent = {\r\n      id: Date.now(),\r\n      timestamp: new Date().toISOString(),\r\n      type: event.type,\r\n      severity: event.severity || 'low',\r\n      details: event.details,\r\n      userAgent: navigator.userAgent,\r\n      url: window.location.href\r\n    }\r\n\r\n    setSecurityEvents(prev => [...prev.slice(-99), securityEvent]) // Keep last 100 events\r\n\r\n    // Update threat level based on recent events\r\n    const recentEvents = securityEvents.filter(\r\n      e => Date.now() - new Date(e.timestamp).getTime() < 300000 // 5 minutes\r\n    )\r\n\r\n    const highSeverityCount = recentEvents.filter(e => e.severity === 'high').length\r\n    const mediumSeverityCount = recentEvents.filter(e => e.severity === 'medium').length\r\n\r\n    if (highSeverityCount >= 3 || mediumSeverityCount >= 5) {\r\n      setThreatLevel('high')\r\n    } else if (highSeverityCount >= 1 || mediumSeverityCount >= 2) {\r\n      setThreatLevel('medium')\r\n    } else {\r\n      setThreatLevel('low')\r\n    }\r\n  }, [securityEvents])\r\n\r\n  const clearEvents = useCallback(() => {\r\n    setSecurityEvents([])\r\n    setThreatLevel('low')\r\n  }, [])\r\n\r\n  return {\r\n    securityEvents,\r\n    threatLevel,\r\n    logSecurityEvent,\r\n    clearEvents\r\n  }\r\n}\r\n\r\n// Hook for CSP violation reporting\r\nexport function useCSPReporting() {\r\n  const [violations, setViolations] = useState([])\r\n\r\n  const reportViolation = useCallback((violation) => {\r\n    const report = {\r\n      id: Date.now(),\r\n      timestamp: new Date().toISOString(),\r\n      directive: violation.violatedDirective,\r\n      blockedUri: violation.blockedURI,\r\n      documentUri: violation.documentURI,\r\n      lineNumber: violation.lineNumber,\r\n      sourceFile: violation.sourceFile\r\n    }\r\n\r\n    setViolations(prev => [...prev.slice(-49), report]) // Keep last 50 violations\r\n    \r\n    // Log to console in development\r\n    if (import.meta.env?.DEV) {\r\n      console.warn('CSP Violation:', report)\r\n    }\r\n  }, [])\r\n\r\n  // Set up CSP violation listener\r\n  const setupCSPListener = useCallback(() => {\r\n    const handleCSPViolation = (e) => {\r\n      reportViolation(e.originalEvent || e)\r\n    }\r\n\r\n    document.addEventListener('securitypolicyviolation', handleCSPViolation)\r\n    \r\n    return () => {\r\n      document.removeEventListener('securitypolicyviolation', handleCSPViolation)\r\n    }\r\n  }, [reportViolation])\r\n\r\n  return {\r\n    violations,\r\n    reportViolation,\r\n    setupCSPListener\r\n  }\r\n}","import { createContext, useContext, useState, useEffect, useCallback } from 'react'\r\n\r\n// Enhanced Recommendation Context for comprehensive user behavior tracking\r\nconst RecommendationContext = createContext()\r\n\r\n// Mock product data for India launch\r\nconst MOCK_PRODUCTS = [\r\n  // Leather products\r\n  { id: 1, name: 'Premium Leather Wallet', category: 'leather', subcategory: 'wallets', price: 2499, rating: 4.8, segment: 'leather', tags: ['premium', 'handcrafted', 'genuine'], image: '/images/leather-wallet.jpg' },\r\n  { id: 2, name: 'Executive Leather Briefcase', category: 'leather', subcategory: 'bags', price: 8999, rating: 4.9, segment: 'leather', tags: ['professional', 'durable', 'spacious'], image: '/images/leather-briefcase.jpg' },\r\n  { id: 3, name: 'Classic Leather Belt', category: 'leather', subcategory: 'belts', price: 1599, rating: 4.7, segment: 'leather', tags: ['classic', 'adjustable', 'formal'], image: '/images/leather-belt.jpg' },\r\n  { id: 4, name: 'Leather Card Holder', category: 'leather', subcategory: 'accessories', price: 899, rating: 4.6, segment: 'leather', tags: ['compact', 'stylish', 'functional'], image: '/images/card-holder.jpg' },\r\n  \r\n  // Electronics\r\n  { id: 5, name: 'Wireless Bluetooth Earbuds', category: 'electronics', subcategory: 'audio', price: 3999, rating: 4.5, segment: 'electronics', tags: ['wireless', 'noise-cancelling', 'portable'], image: '/images/earbuds.jpg' },\r\n  { id: 6, name: 'Smart Fitness Watch', category: 'electronics', subcategory: 'wearables', price: 12999, rating: 4.4, segment: 'electronics', tags: ['fitness', 'smart', 'waterproof'], image: '/images/fitness-watch.jpg' },\r\n  { id: 7, name: 'Portable Power Bank', category: 'electronics', subcategory: 'accessories', price: 1999, rating: 4.3, segment: 'electronics', tags: ['portable', 'fast-charging', 'compact'], image: '/images/power-bank.jpg' },\r\n  { id: 8, name: 'Wireless Charging Pad', category: 'electronics', subcategory: 'accessories', price: 2499, rating: 4.2, segment: 'electronics', tags: ['wireless', 'efficient', 'sleek'], image: '/images/charging-pad.jpg' },\r\n  \r\n  // Furniture\r\n  { id: 9, name: 'Ergonomic Office Chair', category: 'furniture', subcategory: 'office', price: 15999, rating: 4.7, segment: 'furniture', tags: ['ergonomic', 'comfortable', 'adjustable'], image: '/images/office-chair.jpg' },\r\n  { id: 10, name: 'Modern Coffee Table', category: 'furniture', subcategory: 'seating', price: 8499, rating: 4.6, segment: 'furniture', tags: ['modern', 'stylish', 'durable'], image: '/images/coffee-table.jpg' },\r\n  { id: 11, name: 'Storage Ottoman', category: 'furniture', subcategory: 'storage', price: 4999, rating: 4.5, segment: 'furniture', tags: ['storage', 'multifunctional', 'comfortable'], image: '/images/storage-ottoman.jpg' },\r\n  { id: 12, name: 'Floating Desk Organizer', category: 'furniture', subcategory: 'office', price: 2999, rating: 4.4, segment: 'furniture', tags: ['organized', 'space-saving', 'modern'], image: '/images/desk-organizer.jpg' },\r\n]\r\n\r\n// Enhanced user behavior tracking with detailed analytics\r\nconst BEHAVIOR_WEIGHTS = {\r\n  view: 1,\r\n  quickView: 1.5,\r\n  addToCart: 3,\r\n  removeFromCart: -1,\r\n  purchase: 5,\r\n  wishlist: 2,\r\n  removeFromWishlist: -0.5,\r\n  search: 1,\r\n  categoryView: 0.5,\r\n  filterApply: 0.8,\r\n  sortApply: 0.3,\r\n  imageZoom: 0.5,\r\n  reviewRead: 0.7,\r\n  reviewWrite: 2,\r\n  shareProduct: 1.5,\r\n  compareProduct: 1.2,\r\n  emailInquiry: 2.5,\r\n  chatInquiry: 2,\r\n  timeOnProduct: 0.1, // per second\r\n  scrollDepth: 0.05, // per percentage\r\n  clickRecommendation: 1.8\r\n}\r\n\r\n// Session tracking for advanced analytics\r\nconst SESSION_STORAGE_KEY = 'ivolex_session_data'\r\nconst BEHAVIOR_STORAGE_KEY = 'ivolex_user_behavior'\r\nconst ANALYTICS_STORAGE_KEY = 'ivolex_analytics_data'\r\n\r\nexport function RecommendationProvider({ children }) {\r\n  const [userBehavior, setUserBehavior] = useState([])\r\n  const [sessionData, setSessionData] = useState({\r\n    sessionId: Date.now().toString(),\r\n    startTime: new Date(),\r\n    deviceInfo: {\r\n      userAgent: navigator.userAgent,\r\n      language: navigator.language,\r\n      platform: navigator.platform,\r\n      screenResolution: `${screen.width}x${screen.height}`,\r\n      viewport: `${window.innerWidth}x${window.innerHeight}`,\r\n      isMobile: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent)\r\n    },\r\n    location: null,\r\n    totalTimeSpent: 0,\r\n    pagesVisited: [],\r\n    currentPage: window.location.pathname\r\n  })\r\n  const [recommendations, setRecommendations] = useState({\r\n    trending: [],\r\n    personalized: [],\r\n    related: {},\r\n    frequentlyBoughtTogether: {},\r\n    categoryBased: {},\r\n    searchBased: {},\r\n    crossSell: {},\r\n    upsell: {}\r\n  })\r\n  const [analytics, setAnalytics] = useState({\r\n    conversionRate: 0,\r\n    engagementScore: 0,\r\n    preferredCategories: [],\r\n    priceRange: { min: 0, max: 0 },\r\n    timeOfDayPattern: {},\r\n    dayOfWeekPattern: {},\r\n    seasonalPattern: {},\r\n    abandonmentReasons: [],\r\n    loyaltyScore: 0\r\n  })\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  // Enhanced behavior tracking with comprehensive metadata\r\n  const trackBehavior = useCallback((action, productId = null, metadata = {}) => {\r\n    const now = new Date()\r\n    const behaviorEntry = {\r\n      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      sessionId: sessionData.sessionId,\r\n      action,\r\n      productId,\r\n      timestamp: now,\r\n      metadata: {\r\n        ...metadata,\r\n        page: window.location.pathname,\r\n        referrer: document.referrer,\r\n        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        localTime: now.toLocaleString('en-IN'),\r\n        dayOfWeek: now.getDay(),\r\n        hourOfDay: now.getHours(),\r\n        device: sessionData.deviceInfo.isMobile ? 'mobile' : 'desktop',\r\n        ...sessionData.deviceInfo\r\n      },\r\n      weight: BEHAVIOR_WEIGHTS[action] || 1\r\n    }\r\n    \r\n    // Add product-specific data if available\r\n    if (productId) {\r\n      const product = MOCK_PRODUCTS.find(p => p.id === productId)\r\n      if (product) {\r\n        behaviorEntry.productData = {\r\n          category: product.category,\r\n          subcategory: product.subcategory,\r\n          price: product.price,\r\n          rating: product.rating,\r\n          segment: product.segment,\r\n          tags: product.tags\r\n        }\r\n      }\r\n    }\r\n    \r\n    setUserBehavior(prev => {\r\n      const updated = [...prev, behaviorEntry]\r\n      // Keep only last 2000 entries to prevent memory issues\r\n      return updated.slice(-2000)\r\n    })\r\n    \r\n    // Store in localStorage for persistence\r\n    try {\r\n      const stored = JSON.parse(localStorage.getItem(BEHAVIOR_STORAGE_KEY) || '[]')\r\n      stored.push(behaviorEntry)\r\n      localStorage.setItem(BEHAVIOR_STORAGE_KEY, JSON.stringify(stored.slice(-2000)))\r\n    } catch (error) {\r\n      console.warn('Failed to store user behavior:', error)\r\n    }\r\n\r\n    // Real-time analytics update\r\n    updateAnalytics(behaviorEntry)\r\n  }, [sessionData])\r\n\r\n  // Track time spent on products\r\n  const trackTimeOnProduct = useCallback((productId, timeSpent) => {\r\n    trackBehavior('timeOnProduct', productId, { \r\n      timeSpent: Math.round(timeSpent), \r\n      engagement: timeSpent > 30 ? 'high' : timeSpent > 10 ? 'medium' : 'low'\r\n    })\r\n  }, [trackBehavior])\r\n\r\n  // Track scroll depth\r\n  const trackScrollDepth = useCallback((productId, scrollPercentage) => {\r\n    if (scrollPercentage > 0 && scrollPercentage % 25 === 0) { // Track at 25%, 50%, 75%, 100%\r\n      trackBehavior('scrollDepth', productId, { \r\n        scrollPercentage,\r\n        engagement: scrollPercentage > 75 ? 'high' : scrollPercentage > 50 ? 'medium' : 'low'\r\n      })\r\n    }\r\n  }, [trackBehavior])\r\n\r\n  // Track cart abandonment\r\n  const trackCartAbandonment = useCallback((reason, cartValue, itemCount) => {\r\n    trackBehavior('cartAbandonment', null, {\r\n      reason,\r\n      cartValue,\r\n      itemCount,\r\n      abandonmentStage: 'cart',\r\n      potentialLoss: cartValue\r\n    })\r\n  }, [trackBehavior])\r\n\r\n  // Track search behavior\r\n  const trackSearch = useCallback((query, results, filters = {}) => {\r\n    trackBehavior('search', null, {\r\n      query,\r\n      resultCount: results.length,\r\n      hasResults: results.length > 0,\r\n      filters,\r\n      searchType: Object.keys(filters).length > 0 ? 'filtered' : 'simple'\r\n    })\r\n  }, [trackBehavior])\r\n\r\n  // Update real-time analytics\r\n  const updateAnalytics = useCallback((newBehavior) => {\r\n    setAnalytics(prev => {\r\n      const updated = { ...prev }\r\n      \r\n      // Update engagement score\r\n      if (newBehavior.weight > 0) {\r\n        updated.engagementScore = Math.min(100, updated.engagementScore + newBehavior.weight)\r\n      }\r\n      \r\n      // Update time patterns\r\n      const hour = newBehavior.metadata.hourOfDay\r\n      updated.timeOfDayPattern[hour] = (updated.timeOfDayPattern[hour] || 0) + 1\r\n      \r\n      const day = newBehavior.metadata.dayOfWeek\r\n      updated.dayOfWeekPattern[day] = (updated.dayOfWeekPattern[day] || 0) + 1\r\n      \r\n      // Update preferred categories\r\n      if (newBehavior.productData?.category) {\r\n        const categoryIndex = updated.preferredCategories.findIndex(\r\n          cat => cat.name === newBehavior.productData.category\r\n        )\r\n        if (categoryIndex >= 0) {\r\n          updated.preferredCategories[categoryIndex].score += newBehavior.weight\r\n        } else {\r\n          updated.preferredCategories.push({\r\n            name: newBehavior.productData.category,\r\n            score: newBehavior.weight\r\n          })\r\n        }\r\n        // Sort by score\r\n        updated.preferredCategories.sort((a, b) => b.score - a.score)\r\n      }\r\n      \r\n      return updated\r\n    })\r\n  }, [])\r\n\r\n  // Load behavior and session data from localStorage on mount\r\n  useEffect(() => {\r\n    try {\r\n      // Load behavior data\r\n      const storedBehavior = JSON.parse(localStorage.getItem(BEHAVIOR_STORAGE_KEY) || '[]')\r\n      setUserBehavior(storedBehavior)\r\n      \r\n      // Load or create session data\r\n      const storedSession = JSON.parse(localStorage.getItem(SESSION_STORAGE_KEY) || 'null')\r\n      if (storedSession && (Date.now() - new Date(storedSession.startTime).getTime()) < 24 * 60 * 60 * 1000) {\r\n        // Session is less than 24 hours old, continue it\r\n        setSessionData(prev => ({ ...prev, ...storedSession }))\r\n      } else {\r\n        // Create new session\r\n        const newSession = {\r\n          ...sessionData,\r\n          sessionId: Date.now().toString(),\r\n          startTime: new Date()\r\n        }\r\n        setSessionData(newSession)\r\n        localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(newSession))\r\n      }\r\n      \r\n      // Load analytics data\r\n      const storedAnalytics = JSON.parse(localStorage.getItem(ANALYTICS_STORAGE_KEY) || 'null')\r\n      if (storedAnalytics) {\r\n        setAnalytics(prev => ({ ...prev, ...storedAnalytics }))\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load stored data:', error)\r\n    }\r\n    \r\n    // Track page view\r\n    trackBehavior('pageView', null, { page: window.location.pathname })\r\n    \r\n    // Setup beforeunload listener to save session data\r\n    const handleBeforeUnload = () => {\r\n      try {\r\n        localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(sessionData))\r\n        localStorage.setItem(ANALYTICS_STORAGE_KEY, JSON.stringify(analytics))\r\n      } catch (error) {\r\n        console.warn('Failed to save session data:', error)\r\n      }\r\n    }\r\n    \r\n    window.addEventListener('beforeunload', handleBeforeUnload)\r\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload)\r\n  }, [])\r\n\r\n  // Generate trending products (based on mock data for now)\r\n  const generateTrending = useCallback(() => {\r\n    // Sort by rating and add some randomness\r\n    return MOCK_PRODUCTS\r\n      .sort((a, b) => (b.rating * Math.random()) - (a.rating * Math.random()))\r\n      .slice(0, 8)\r\n  }, [])\r\n\r\n  // Enhanced personalized recommendations with machine learning-inspired scoring\r\n  const generatePersonalized = useCallback(() => {\r\n    if (userBehavior.length === 0) {\r\n      return generateTrending()\r\n    }\r\n\r\n    // Advanced user preference analysis\r\n    const categoryScores = {}\r\n    const segmentScores = {}\r\n    const tagScores = {}\r\n    const priceRangeScores = {}\r\n    const timeBasedScores = {}\r\n    // const brandScores = {}\r\n\r\n    // Analyze user behavior with time decay\r\n    const now = Date.now()\r\n    userBehavior.forEach(behavior => {\r\n      const product = MOCK_PRODUCTS.find(p => p.id === behavior.productId)\r\n      if (!product) return\r\n\r\n      // Apply time decay (recent actions weigh more)\r\n      const timeDiff = now - new Date(behavior.timestamp).getTime()\r\n      const timeDecay = Math.exp(-timeDiff / (7 * 24 * 60 * 60 * 1000)) // 7-day half-life\r\n      const weightedScore = behavior.weight * timeDecay\r\n\r\n      // Score categories\r\n      categoryScores[product.category] = (categoryScores[product.category] || 0) + weightedScore\r\n      segmentScores[product.segment] = (segmentScores[product.segment] || 0) + weightedScore\r\n      \r\n      // Score tags\r\n      product.tags.forEach(tag => {\r\n        tagScores[tag] = (tagScores[tag] || 0) + weightedScore\r\n      })\r\n      \r\n      // Price range analysis\r\n      const priceRange = product.price < 2000 ? 'low' : product.price < 8000 ? 'medium' : 'high'\r\n      priceRangeScores[priceRange] = (priceRangeScores[priceRange] || 0) + weightedScore\r\n      \r\n      // Time-based patterns\r\n      const hour = new Date(behavior.timestamp).getHours()\r\n      const timeSlot = hour < 12 ? 'morning' : hour < 18 ? 'afternoon' : 'evening'\r\n      timeBasedScores[timeSlot] = (timeBasedScores[timeSlot] || 0) + weightedScore\r\n    })\r\n\r\n    // Generate personalized recommendations with advanced scoring\r\n    const scoredProducts = MOCK_PRODUCTS.map(product => {\r\n      let score = 0\r\n      \r\n      // Category preference\r\n      score += (categoryScores[product.category] || 0) * 0.3\r\n      \r\n      // Segment preference\r\n      score += (segmentScores[product.segment] || 0) * 0.25\r\n      \r\n      // Tag preferences\r\n      product.tags.forEach(tag => {\r\n        score += (tagScores[tag] || 0) * 0.1\r\n      })\r\n      \r\n      // Price range preference\r\n      const priceRange = product.price < 2000 ? 'low' : product.price < 8000 ? 'medium' : 'high'\r\n      score += (priceRangeScores[priceRange] || 0) * 0.15\r\n      \r\n      // Quality bonus (rating)\r\n      score += product.rating * 2\r\n      \r\n      // Diversity factor (avoid too similar products)\r\n      const hasInteracted = userBehavior.some(b => b.productId === product.id)\r\n      if (hasInteracted) score *= 0.3\r\n      \r\n      // Add controlled randomness for exploration\r\n      score += Math.random() * 5\r\n      \r\n      return { ...product, score }\r\n    })\r\n\r\n    return scoredProducts\r\n      .sort((a, b) => b.score - a.score)\r\n      .slice(0, 12)\r\n  }, [userBehavior])\r\n\r\n  // Generate related products for a specific product\r\n  const generateRelated = useCallback((productId) => {\r\n    const product = MOCK_PRODUCTS.find(p => p.id === productId)\r\n    if (!product) return []\r\n\r\n    // Find products in same category/segment with similar tags\r\n    const related = MOCK_PRODUCTS\r\n      .filter(p => p.id !== productId)\r\n      .map(p => {\r\n        let similarity = 0\r\n        \r\n        // Same category bonus\r\n        if (p.category === product.category) similarity += 3\r\n        \r\n        // Same segment bonus\r\n        if (p.segment === product.segment) similarity += 2\r\n        \r\n        // Tag similarity\r\n        const commonTags = p.tags.filter(tag => product.tags.includes(tag))\r\n        similarity += commonTags.length\r\n        \r\n        // Price similarity (within 50% range)\r\n        const priceDiff = Math.abs(p.price - product.price) / product.price\r\n        if (priceDiff < 0.5) similarity += 1\r\n        \r\n        return { ...p, similarity }\r\n      })\r\n      .sort((a, b) => b.similarity - a.similarity)\r\n      .slice(0, 6)\r\n\r\n    return related\r\n  }, [])\r\n\r\n  // Generate frequently bought together products\r\n  const generateFrequentlyBoughtTogether = useCallback((productId) => {\r\n    const product = MOCK_PRODUCTS.find(p => p.id === productId)\r\n    if (!product) return []\r\n\r\n    // Mock frequently bought together logic\r\n    // In real implementation, this would use purchase history analysis\r\n    const complementaryProducts = MOCK_PRODUCTS\r\n      .filter(p => {\r\n        if (p.id === productId) return false\r\n        \r\n        // Same segment but different subcategory\r\n        if (p.segment === product.segment && p.subcategory !== product.subcategory) {\r\n          return true\r\n        }\r\n        \r\n        // Complementary categories\r\n        const complementary = {\r\n          'leather': ['electronics'],\r\n          'electronics': ['leather'],\r\n          'furniture': ['electronics', 'leather']\r\n        }\r\n        \r\n        return complementary[product.category]?.includes(p.category)\r\n      })\r\n      .sort(() => Math.random() - 0.5) // Randomize\r\n      .slice(0, 4)\r\n\r\n    return complementaryProducts\r\n  }, [])\r\n\r\n  // Generate category-based recommendations\r\n  const generateCategoryBased = useCallback((category, excludeId = null) => {\r\n    return MOCK_PRODUCTS\r\n      .filter(p => p.category === category && p.id !== excludeId)\r\n      .sort((a, b) => b.rating - a.rating)\r\n      .slice(0, 6)\r\n  }, [])\r\n\r\n  // Generate cross-sell recommendations (complementary products)\r\n  const generateCrossSell = useCallback((cartItems) => {\r\n    if (!cartItems || cartItems.length === 0) return []\r\n    \r\n    const cartCategories = [...new Set(cartItems.map(item => {\r\n      const product = MOCK_PRODUCTS.find(p => p.id === item.productId)\r\n      return product?.category\r\n    }).filter(Boolean))]\r\n    \r\n    const complementaryMap = {\r\n      'leather': ['electronics', 'furniture'],\r\n      'electronics': ['leather', 'furniture'],\r\n      'furniture': ['electronics', 'leather']\r\n    }\r\n    \r\n    const crossSellProducts = MOCK_PRODUCTS.filter(product => {\r\n      // Exclude items already in cart\r\n      if (cartItems.some(item => item.productId === product.id)) return false\r\n      \r\n      // Find complementary categories\r\n      return cartCategories.some(cartCat => \r\n        complementaryMap[cartCat]?.includes(product.category)\r\n      )\r\n    })\r\n    \r\n    return crossSellProducts\r\n      .sort((a, b) => b.rating - a.rating)\r\n      .slice(0, 6)\r\n  }, [])\r\n  \r\n  // Generate upsell recommendations (higher-value similar products)\r\n  const generateUpsell = useCallback((productId) => {\r\n    const product = MOCK_PRODUCTS.find(p => p.id === productId)\r\n    if (!product) return []\r\n    \r\n    const upsellProducts = MOCK_PRODUCTS.filter(p => {\r\n      if (p.id === productId) return false\r\n      \r\n      // Same category but higher price (20-200% more expensive)\r\n      const priceIncrease = (p.price - product.price) / product.price\r\n      return p.category === product.category && \r\n             priceIncrease >= 0.2 && \r\n             priceIncrease <= 2.0\r\n    })\r\n    \r\n    return upsellProducts\r\n      .sort((a, b) => {\r\n        // Sort by value proposition (rating vs price increase)\r\n        const aValueScore = a.rating / ((a.price / product.price) - 1)\r\n        const bValueScore = b.rating / ((b.price / product.price) - 1)\r\n        return bValueScore - aValueScore\r\n      })\r\n      .slice(0, 4)\r\n  }, [])\r\n  \r\n  // Advanced search recommendations with ML-like ranking\r\n  const getAdvancedSearchRecommendations = useCallback((query, userContext = {}) => {\r\n    const lowerQuery = query.toLowerCase()\r\n    const words = lowerQuery.split(' ').filter(word => word.length > 2)\r\n    \r\n    return MOCK_PRODUCTS\r\n      .map(product => {\r\n        let relevanceScore = 0\r\n        \r\n        // Exact name match (highest weight)\r\n        if (product.name.toLowerCase().includes(lowerQuery)) {\r\n          relevanceScore += 50\r\n        }\r\n        \r\n        // Individual word matches\r\n        words.forEach(word => {\r\n          if (product.name.toLowerCase().includes(word)) relevanceScore += 20\r\n          if (product.category.toLowerCase().includes(word)) relevanceScore += 15\r\n          if (product.subcategory.toLowerCase().includes(word)) relevanceScore += 15\r\n          if (product.tags.some(tag => tag.toLowerCase().includes(word))) relevanceScore += 10\r\n        })\r\n        \r\n        // Category/subcategory exact match\r\n        if (product.category.toLowerCase() === lowerQuery) relevanceScore += 40\r\n        if (product.subcategory.toLowerCase() === lowerQuery) relevanceScore += 35\r\n        \r\n        // Tag exact match\r\n        if (product.tags.some(tag => tag.toLowerCase() === lowerQuery)) relevanceScore += 30\r\n        \r\n        // Personalization boost based on user behavior\r\n        if (userBehavior.length > 0) {\r\n          const userCategoryPreference = analytics.preferredCategories\r\n            .find(cat => cat.name === product.category)?.score || 0\r\n          relevanceScore += userCategoryPreference * 0.1\r\n        }\r\n        \r\n        // Quality boost\r\n        relevanceScore += product.rating * 2\r\n        \r\n        // Price relevance (if price range specified in context)\r\n        if (userContext.priceRange) {\r\n          const { min, max } = userContext.priceRange\r\n          if (product.price >= min && product.price <= max) {\r\n            relevanceScore += 10\r\n          }\r\n        }\r\n        \r\n        return { ...product, relevanceScore }\r\n      })\r\n      .filter(product => product.relevanceScore > 0)\r\n      .sort((a, b) => b.relevanceScore - a.relevanceScore)\r\n      .slice(0, 20)\r\n  }, [userBehavior, analytics])\r\n  \r\n  // Get comprehensive user analytics\r\n  const getUserAnalytics = useCallback(() => {\r\n    const totalInteractions = userBehavior.length\r\n    const uniqueProducts = new Set(userBehavior.filter(b => b.productId).map(b => b.productId)).size\r\n    const totalPurchases = userBehavior.filter(b => b.action === 'purchase').length\r\n    const totalCartAdds = userBehavior.filter(b => b.action === 'addToCart').length\r\n    \r\n    return {\r\n      ...analytics,\r\n      totalInteractions,\r\n      uniqueProducts,\r\n      conversionRate: totalCartAdds > 0 ? (totalPurchases / totalCartAdds) * 100 : 0,\r\n      averageSessionLength: sessionData.totalTimeSpent / 60, // in minutes\r\n      loyaltyScore: Math.min(100, (totalInteractions * 2) + (totalPurchases * 10)),\r\n      engagementLevel: analytics.engagementScore > 50 ? 'high' : \r\n                      analytics.engagementScore > 20 ? 'medium' : 'low',\r\n      preferredPriceRange: {\r\n        min: Math.min(...userBehavior\r\n          .filter(b => b.productData?.price)\r\n          .map(b => b.productData.price)) || 0,\r\n        max: Math.max(...userBehavior\r\n          .filter(b => b.productData?.price)\r\n          .map(b => b.productData.price)) || 0\r\n      },\r\n      topCategories: analytics.preferredCategories.slice(0, 3),\r\n      recentActivity: userBehavior.slice(-10)\r\n    }\r\n  }, [userBehavior, analytics, sessionData])\r\n\r\n  // Update all recommendations\r\n  const updateRecommendations = useCallback(async () => {\r\n    setIsLoading(true)\r\n    \r\n    try {\r\n      // Simulate API delay\r\n      await new Promise(resolve => setTimeout(resolve, 500))\r\n      \r\n      setRecommendations({\r\n        trending: generateTrending(),\r\n        personalized: generatePersonalized(),\r\n        related: {},\r\n        frequentlyBoughtTogether: {},\r\n        categoryBased: {},\r\n        searchBased: {},\r\n        crossSell: {},\r\n        upsell: {}\r\n      })\r\n    } catch (error) {\r\n      console.error('Failed to update recommendations:', error)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }, [generateTrending, generatePersonalized])\r\n\r\n  // Update recommendations when user behavior changes\r\n  useEffect(() => {\r\n    updateRecommendations()\r\n  }, [updateRecommendations])\r\n\r\n  // Search recommendations based on query\r\n  const getSearchRecommendations = useCallback((query) => {\r\n    const lowerQuery = query.toLowerCase()\r\n    \r\n    return MOCK_PRODUCTS\r\n      .filter(product => \r\n        product.name.toLowerCase().includes(lowerQuery) ||\r\n        product.category.toLowerCase().includes(lowerQuery) ||\r\n        product.subcategory.toLowerCase().includes(lowerQuery) ||\r\n        product.tags.some(tag => tag.toLowerCase().includes(lowerQuery))\r\n      )\r\n      .sort((a, b) => {\r\n        // Exact name matches first\r\n        const aNameMatch = a.name.toLowerCase().includes(lowerQuery)\r\n        const bNameMatch = b.name.toLowerCase().includes(lowerQuery)\r\n        if (aNameMatch && !bNameMatch) return -1\r\n        if (!aNameMatch && bNameMatch) return 1\r\n        \r\n        // Then by rating\r\n        return b.rating - a.rating\r\n      })\r\n      .slice(0, 10)\r\n  }, [])\r\n\r\n  const value = {\r\n    // State\r\n    userBehavior,\r\n    sessionData,\r\n    analytics,\r\n    recommendations,\r\n    isLoading,\r\n    \r\n    // Enhanced tracking actions\r\n    trackBehavior,\r\n    trackTimeOnProduct,\r\n    trackScrollDepth,\r\n    trackCartAbandonment,\r\n    trackSearch,\r\n    updateRecommendations,\r\n    \r\n    // Recommendation getters\r\n    getRelated: (productId) => {\r\n      if (!recommendations.related[productId]) {\r\n        recommendations.related[productId] = generateRelated(productId)\r\n      }\r\n      return recommendations.related[productId]\r\n    },\r\n    \r\n    getFrequentlyBoughtTogether: (productId) => {\r\n      if (!recommendations.frequentlyBoughtTogether[productId]) {\r\n        recommendations.frequentlyBoughtTogether[productId] = generateFrequentlyBoughtTogether(productId)\r\n      }\r\n      return recommendations.frequentlyBoughtTogether[productId]\r\n    },\r\n    \r\n    getCategoryBased: (category, excludeId = null) => {\r\n      const key = `${category}_${excludeId || 'all'}`\r\n      if (!recommendations.categoryBased[key]) {\r\n        recommendations.categoryBased[key] = generateCategoryBased(category, excludeId)\r\n      }\r\n      return recommendations.categoryBased[key]\r\n    },\r\n    \r\n    getCrossSell: (cartItems) => {\r\n      const key = cartItems.map(item => item.productId).sort().join('_')\r\n      if (!recommendations.crossSell[key]) {\r\n        recommendations.crossSell[key] = generateCrossSell(cartItems)\r\n      }\r\n      return recommendations.crossSell[key]\r\n    },\r\n    \r\n    getUpsell: (productId) => {\r\n      if (!recommendations.upsell[productId]) {\r\n        recommendations.upsell[productId] = generateUpsell(productId)\r\n      }\r\n      return recommendations.upsell[productId]\r\n    },\r\n    \r\n    // Search functions\r\n    getSearchRecommendations,\r\n    getAdvancedSearchRecommendations,\r\n    \r\n    // Trending and personalized are already computed\r\n    getTrending: () => recommendations.trending,\r\n    getPersonalized: () => recommendations.personalized,\r\n    \r\n    // Analytics and insights\r\n    getUserAnalytics,\r\n    getEngagementScore: () => analytics.engagementScore,\r\n    getPreferredCategories: () => analytics.preferredCategories,\r\n    getLoyaltyScore: () => analytics.loyaltyScore,\r\n    \r\n    // Utility functions\r\n    getProducts: () => MOCK_PRODUCTS,\r\n    getProduct: (id) => MOCK_PRODUCTS.find(p => p.id === id),\r\n    \r\n    // Behavioral insights\r\n    getSessionInsights: () => ({\r\n      sessionDuration: sessionData.totalTimeSpent,\r\n      pagesVisited: sessionData.pagesVisited.length,\r\n      deviceType: sessionData.deviceInfo.isMobile ? 'mobile' : 'desktop',\r\n      engagementLevel: analytics.engagementScore > 50 ? 'high' : \r\n                      analytics.engagementScore > 20 ? 'medium' : 'low'\r\n    }),\r\n    \r\n    // A/B testing support\r\n    getVariantRecommendations: (variant = 'default') => {\r\n      switch (variant) {\r\n        case 'popularity':\r\n          return recommendations.trending\r\n        case 'personalized':\r\n          return recommendations.personalized\r\n        case 'hybrid':\r\n          return [...recommendations.personalized.slice(0, 6), ...recommendations.trending.slice(0, 6)]\r\n        default:\r\n          return recommendations.personalized.length > 0 ? recommendations.personalized : recommendations.trending\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <RecommendationContext.Provider value={value}>\r\n      {children}\r\n    </RecommendationContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useRecommendations() {\r\n  const context = useContext(RecommendationContext)\r\n  if (!context) {\r\n    throw new Error('useRecommendations must be used within a RecommendationProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nexport default RecommendationContext","export default function SkipToContent() {\n  return (\n    <>\n      <a\n        href=\"#main\"\n        className=\"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 bg-brand-500 text-white px-3 py-2 rounded z-50\"\n        aria-label=\"Skip to main content\"\n      >\n        Skip to main content\n      </a>\n      <a\n        href=\"#navigation\"\n        className=\"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-20 bg-brand-500 text-white px-3 py-2 rounded z-50\"\n        aria-label=\"Skip to navigation\"\n      >\n        Skip to navigation\n      </a>\n    </>\n  )\n}\n","import { Component } from 'react'\nimport { AlertTriangle, RefreshCw, Home, Bug } from 'lucide-react'\nimport { motion } from 'framer-motion'\n\nexport default class ErrorBoundary extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { \n      hasError: false, \n      error: null,\n      errorInfo: null,\n      errorId: null\n    }\n  }\n\n  static getDerivedStateFromError(_error) {\n    return { \n      hasError: true,\n      errorId: Date.now().toString(36) + Math.random().toString(36).substr(2)\n    }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Log error details\n    console.error('UI Error:', error, errorInfo)\n    \n    this.setState({\n      error,\n      errorInfo\n    })\n\n    // Report error to monitoring service (if available)\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', 'exception', {\n        description: error.toString(),\n        fatal: false\n      })\n    }\n\n    // Log to audit system if available\n    try {\n      if (window.logSecurityEvent) {\n        window.logSecurityEvent({\n          type: 'ui_error',\n          severity: 'high',\n          details: `Error: ${error.message}`,\n          metadata: { errorId: this.state.errorId }\n        })\n      }\n    } catch (loggingError) {\n      console.warn('Failed to log error:', loggingError)\n    }\n  }\n\n  handleReload = () => {\n    window.location.reload()\n  }\n\n  handleGoHome = () => {\n    window.location.href = '/'\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const { showDetails = false, title, message } = this.props\n      \n      return (\n        <div className=\"min-h-[400px] flex items-center justify-center p-8\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"max-w-lg mx-auto text-center\"\n          >\n            {/* Error Icon */}\n            <motion.div\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.2, type: 'spring', stiffness: 200 }}\n              className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6\"\n            >\n              <AlertTriangle size={32} className=\"text-red-600\" />\n            </motion.div>\n\n            {/* Error Message */}\n            <h2 className=\"text-2xl font-bold text-foreground mb-2\">\n              {title || 'Something went wrong'}\n            </h2>\n            <p className=\"text-foreground/70 mb-6\">\n              {message || 'An unexpected error occurred. Please try refreshing the page or contact support if the problem persists.'}\n            </p>\n\n            {/* Error ID */}\n            <div className=\"bg-background border border-border rounded-lg p-3 mb-6\">\n              <p className=\"text-sm text-foreground/60\">\n                Error ID: <code className=\"font-mono text-xs bg-background px-2 py-1 rounded\">{this.state.errorId}</code>\n              </p>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row gap-3 justify-center mb-6\">\n              <button\n                onClick={this.handleRetry}\n                className=\"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors\"\n              >\n                <RefreshCw size={16} />\n                Try Again\n              </button>\n              <button\n                onClick={this.handleReload}\n                className=\"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                <RefreshCw size={16} />\n                Reload Page\n              </button>\n              <button\n                onClick={this.handleGoHome}\n                className=\"flex items-center gap-2 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-background transition-colors\"\n              >\n                <Home size={16} />\n                Go Home\n              </button>\n            </div>\n\n            {/* Error Details (Development) */}\n            {(showDetails || import.meta.env.DEV) && this.state.error && (\n              <motion.details\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 0.5 }}\n                className=\"text-left bg-red-50 border border-red-200 rounded-lg p-4\"\n              >\n                <summary className=\"cursor-pointer text-red-800 font-medium mb-2 flex items-center gap-2\">\n                  <Bug size={16} />\n                  Technical Details\n                </summary>\n                <div className=\"text-sm text-red-700 space-y-2\">\n                  <div>\n                    <strong>Error:</strong>\n                    <pre className=\"mt-1 text-xs bg-red-100 p-2 rounded overflow-auto\">\n                      {this.state.error.toString()}\n                    </pre>\n                  </div>\n                  {this.state.errorInfo && (\n                    <div>\n                      <strong>Component Stack:</strong>\n                      <pre className=\"mt-1 text-xs bg-red-100 p-2 rounded overflow-auto\">\n                        {this.state.errorInfo.componentStack}\n                      </pre>\n                    </div>\n                  )}\n                </div>\n              </motion.details>\n            )}\n          </motion.div>\n        </div>\n      )\n    }\n\n    return this.props.children\n  }\n}\n","import { toast, Toaster, ToastPosition } from 'react-hot-toast'\r\n\r\n// Toast configuration\r\nconst toastConfig = {\r\n  duration: 4000,\r\n  position: 'top-right' as ToastPosition,\r\n  style: {\r\n    background: '#fff',\r\n    color: '#374151',\r\n    boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\r\n    border: '1px solid #e5e7eb',\r\n    borderRadius: '0.75rem',\r\n  },\r\n}\r\n\r\n// Toast functions\r\nexport const showSuccess = (message: string) => {\r\n  toast.success(message, {\r\n    duration: toastConfig.duration,\r\n    style: toastConfig.style,\r\n    iconTheme: {\r\n      primary: '#059669',\r\n      secondary: '#ffffff',\r\n    },\r\n  })\r\n}\r\n\r\nexport const showError = (message: string) => {\r\n  toast.error(message, {\r\n    duration: toastConfig.duration,\r\n    style: toastConfig.style,\r\n    iconTheme: {\r\n      primary: '#dc2626',\r\n      secondary: '#ffffff',\r\n    },\r\n  })\r\n}\r\n\r\nexport const showInfo = (message: string) => {\r\n  toast(message, {\r\n    duration: toastConfig.duration,\r\n    style: toastConfig.style,\r\n    icon: 'ℹ️',\r\n  })\r\n}\r\n\r\nexport const showLoading = (message: string) => {\r\n  return toast.loading(message, {\r\n    duration: toastConfig.duration,\r\n    style: toastConfig.style,\r\n  })\r\n}\r\n\r\nexport const dismissToast = (toastId: string) => {\r\n  toast.dismiss(toastId)\r\n}\r\n\r\n// Toast Provider Component\r\nexport default function ToastProvider() {\r\n  return (\r\n    <Toaster\r\n      position={toastConfig.position}\r\n      toastOptions={{\r\n        duration: toastConfig.duration,\r\n        style: toastConfig.style,\r\n      }}\r\n      reverseOrder={false}\r\n    />\r\n  )\r\n}","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","//\n\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || (ret === void 0 && valueA !== valueB)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","// src/index.tsx\nimport React3, { Component as Component3 } from \"react\";\nimport fastCompare from \"react-fast-compare\";\nimport invariant from \"invariant\";\n\n// src/Provider.tsx\nimport React2, { Component } from \"react\";\n\n// src/server.ts\nimport React from \"react\";\n\n// src/constants.ts\nvar TAG_NAMES = /* @__PURE__ */ ((TAG_NAMES2) => {\n  TAG_NAMES2[\"BASE\"] = \"base\";\n  TAG_NAMES2[\"BODY\"] = \"body\";\n  TAG_NAMES2[\"HEAD\"] = \"head\";\n  TAG_NAMES2[\"HTML\"] = \"html\";\n  TAG_NAMES2[\"LINK\"] = \"link\";\n  TAG_NAMES2[\"META\"] = \"meta\";\n  TAG_NAMES2[\"NOSCRIPT\"] = \"noscript\";\n  TAG_NAMES2[\"SCRIPT\"] = \"script\";\n  TAG_NAMES2[\"STYLE\"] = \"style\";\n  TAG_NAMES2[\"TITLE\"] = \"title\";\n  TAG_NAMES2[\"FRAGMENT\"] = \"Symbol(react.fragment)\";\n  return TAG_NAMES2;\n})(TAG_NAMES || {});\nvar SEO_PRIORITY_TAGS = {\n  link: { rel: [\"amphtml\", \"canonical\", \"alternate\"] },\n  script: { type: [\"application/ld+json\"] },\n  meta: {\n    charset: \"\",\n    name: [\"generator\", \"robots\", \"description\"],\n    property: [\n      \"og:type\",\n      \"og:title\",\n      \"og:url\",\n      \"og:image\",\n      \"og:image:alt\",\n      \"og:description\",\n      \"twitter:url\",\n      \"twitter:title\",\n      \"twitter:description\",\n      \"twitter:image\",\n      \"twitter:image:alt\",\n      \"twitter:card\",\n      \"twitter:site\"\n    ]\n  }\n};\nvar VALID_TAG_NAMES = Object.values(TAG_NAMES);\nvar REACT_TAG_MAP = {\n  accesskey: \"accessKey\",\n  charset: \"charSet\",\n  class: \"className\",\n  contenteditable: \"contentEditable\",\n  contextmenu: \"contextMenu\",\n  \"http-equiv\": \"httpEquiv\",\n  itemprop: \"itemProp\",\n  tabindex: \"tabIndex\"\n};\nvar HTML_TAG_MAP = Object.entries(REACT_TAG_MAP).reduce(\n  (carry, [key, value]) => {\n    carry[value] = key;\n    return carry;\n  },\n  {}\n);\nvar HELMET_ATTRIBUTE = \"data-rh\";\n\n// src/utils.ts\nvar HELMET_PROPS = {\n  DEFAULT_TITLE: \"defaultTitle\",\n  DEFER: \"defer\",\n  ENCODE_SPECIAL_CHARACTERS: \"encodeSpecialCharacters\",\n  ON_CHANGE_CLIENT_STATE: \"onChangeClientState\",\n  TITLE_TEMPLATE: \"titleTemplate\",\n  PRIORITIZE_SEO_TAGS: \"prioritizeSeoTags\"\n};\nvar getInnermostProperty = (propsList, property) => {\n  for (let i = propsList.length - 1; i >= 0; i -= 1) {\n    const props = propsList[i];\n    if (Object.prototype.hasOwnProperty.call(props, property)) {\n      return props[property];\n    }\n  }\n  return null;\n};\nvar getTitleFromPropsList = (propsList) => {\n  let innermostTitle = getInnermostProperty(propsList, \"title\" /* TITLE */);\n  const innermostTemplate = getInnermostProperty(propsList, HELMET_PROPS.TITLE_TEMPLATE);\n  if (Array.isArray(innermostTitle)) {\n    innermostTitle = innermostTitle.join(\"\");\n  }\n  if (innermostTemplate && innermostTitle) {\n    return innermostTemplate.replace(/%s/g, () => innermostTitle);\n  }\n  const innermostDefaultTitle = getInnermostProperty(propsList, HELMET_PROPS.DEFAULT_TITLE);\n  return innermostTitle || innermostDefaultTitle || void 0;\n};\nvar getOnChangeClientState = (propsList) => getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || (() => {\n});\nvar getAttributesFromPropsList = (tagType, propsList) => propsList.filter((props) => typeof props[tagType] !== \"undefined\").map((props) => props[tagType]).reduce((tagAttrs, current) => ({ ...tagAttrs, ...current }), {});\nvar getBaseTagFromPropsList = (primaryAttributes, propsList) => propsList.filter((props) => typeof props[\"base\" /* BASE */] !== \"undefined\").map((props) => props[\"base\" /* BASE */]).reverse().reduce((innermostBaseTag, tag) => {\n  if (!innermostBaseTag.length) {\n    const keys = Object.keys(tag);\n    for (let i = 0; i < keys.length; i += 1) {\n      const attributeKey = keys[i];\n      const lowerCaseAttributeKey = attributeKey.toLowerCase();\n      if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n        return innermostBaseTag.concat(tag);\n      }\n    }\n  }\n  return innermostBaseTag;\n}, []);\nvar warn = (msg) => console && typeof console.warn === \"function\" && console.warn(msg);\nvar getTagsFromPropsList = (tagName, primaryAttributes, propsList) => {\n  const approvedSeenTags = {};\n  return propsList.filter((props) => {\n    if (Array.isArray(props[tagName])) {\n      return true;\n    }\n    if (typeof props[tagName] !== \"undefined\") {\n      warn(\n        `Helmet: ${tagName} should be of type \"Array\". Instead found type \"${typeof props[tagName]}\"`\n      );\n    }\n    return false;\n  }).map((props) => props[tagName]).reverse().reduce((approvedTags, instanceTags) => {\n    const instanceSeenTags = {};\n    instanceTags.filter((tag) => {\n      let primaryAttributeKey;\n      const keys2 = Object.keys(tag);\n      for (let i = 0; i < keys2.length; i += 1) {\n        const attributeKey = keys2[i];\n        const lowerCaseAttributeKey = attributeKey.toLowerCase();\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === \"rel\" /* REL */ && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === \"rel\" /* REL */ && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n          primaryAttributeKey = lowerCaseAttributeKey;\n        }\n        if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === \"innerHTML\" /* INNER_HTML */ || attributeKey === \"cssText\" /* CSS_TEXT */ || attributeKey === \"itemprop\" /* ITEM_PROP */)) {\n          primaryAttributeKey = attributeKey;\n        }\n      }\n      if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n        return false;\n      }\n      const value = tag[primaryAttributeKey].toLowerCase();\n      if (!approvedSeenTags[primaryAttributeKey]) {\n        approvedSeenTags[primaryAttributeKey] = {};\n      }\n      if (!instanceSeenTags[primaryAttributeKey]) {\n        instanceSeenTags[primaryAttributeKey] = {};\n      }\n      if (!approvedSeenTags[primaryAttributeKey][value]) {\n        instanceSeenTags[primaryAttributeKey][value] = true;\n        return true;\n      }\n      return false;\n    }).reverse().forEach((tag) => approvedTags.push(tag));\n    const keys = Object.keys(instanceSeenTags);\n    for (let i = 0; i < keys.length; i += 1) {\n      const attributeKey = keys[i];\n      const tagUnion = {\n        ...approvedSeenTags[attributeKey],\n        ...instanceSeenTags[attributeKey]\n      };\n      approvedSeenTags[attributeKey] = tagUnion;\n    }\n    return approvedTags;\n  }, []).reverse();\n};\nvar getAnyTrueFromPropsList = (propsList, checkedTag) => {\n  if (Array.isArray(propsList) && propsList.length) {\n    for (let index = 0; index < propsList.length; index += 1) {\n      const prop = propsList[index];\n      if (prop[checkedTag]) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\nvar reducePropsToState = (propsList) => ({\n  baseTag: getBaseTagFromPropsList([\"href\" /* HREF */], propsList),\n  bodyAttributes: getAttributesFromPropsList(\"bodyAttributes\" /* BODY */, propsList),\n  defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n  encode: getInnermostProperty(propsList, HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n  htmlAttributes: getAttributesFromPropsList(\"htmlAttributes\" /* HTML */, propsList),\n  linkTags: getTagsFromPropsList(\n    \"link\" /* LINK */,\n    [\"rel\" /* REL */, \"href\" /* HREF */],\n    propsList\n  ),\n  metaTags: getTagsFromPropsList(\n    \"meta\" /* META */,\n    [\n      \"name\" /* NAME */,\n      \"charset\" /* CHARSET */,\n      \"http-equiv\" /* HTTPEQUIV */,\n      \"property\" /* PROPERTY */,\n      \"itemprop\" /* ITEM_PROP */\n    ],\n    propsList\n  ),\n  noscriptTags: getTagsFromPropsList(\"noscript\" /* NOSCRIPT */, [\"innerHTML\" /* INNER_HTML */], propsList),\n  onChangeClientState: getOnChangeClientState(propsList),\n  scriptTags: getTagsFromPropsList(\n    \"script\" /* SCRIPT */,\n    [\"src\" /* SRC */, \"innerHTML\" /* INNER_HTML */],\n    propsList\n  ),\n  styleTags: getTagsFromPropsList(\"style\" /* STYLE */, [\"cssText\" /* CSS_TEXT */], propsList),\n  title: getTitleFromPropsList(propsList),\n  titleAttributes: getAttributesFromPropsList(\"titleAttributes\" /* TITLE */, propsList),\n  prioritizeSeoTags: getAnyTrueFromPropsList(propsList, HELMET_PROPS.PRIORITIZE_SEO_TAGS)\n});\nvar flattenArray = (possibleArray) => Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\nvar checkIfPropsMatch = (props, toMatch) => {\n  const keys = Object.keys(props);\n  for (let i = 0; i < keys.length; i += 1) {\n    if (toMatch[keys[i]] && toMatch[keys[i]].includes(props[keys[i]])) {\n      return true;\n    }\n  }\n  return false;\n};\nvar prioritizer = (elementsList, propsToMatch) => {\n  if (Array.isArray(elementsList)) {\n    return elementsList.reduce(\n      (acc, elementAttrs) => {\n        if (checkIfPropsMatch(elementAttrs, propsToMatch)) {\n          acc.priority.push(elementAttrs);\n        } else {\n          acc.default.push(elementAttrs);\n        }\n        return acc;\n      },\n      { priority: [], default: [] }\n    );\n  }\n  return { default: elementsList, priority: [] };\n};\nvar without = (obj, key) => {\n  return {\n    ...obj,\n    [key]: void 0\n  };\n};\n\n// src/server.ts\nvar SELF_CLOSING_TAGS = [\"noscript\" /* NOSCRIPT */, \"script\" /* SCRIPT */, \"style\" /* STYLE */];\nvar encodeSpecialCharacters = (str, encode = true) => {\n  if (encode === false) {\n    return String(str);\n  }\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\nvar generateElementAttributesAsString = (attributes) => Object.keys(attributes).reduce((str, key) => {\n  const attr = typeof attributes[key] !== \"undefined\" ? `${key}=\"${attributes[key]}\"` : `${key}`;\n  return str ? `${str} ${attr}` : attr;\n}, \"\");\nvar generateTitleAsString = (type, title, attributes, encode) => {\n  const attributeString = generateElementAttributesAsString(attributes);\n  const flattenedTitle = flattenArray(title);\n  return attributeString ? `<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeString}>${encodeSpecialCharacters(\n    flattenedTitle,\n    encode\n  )}</${type}>` : `<${type} ${HELMET_ATTRIBUTE}=\"true\">${encodeSpecialCharacters(\n    flattenedTitle,\n    encode\n  )}</${type}>`;\n};\nvar generateTagsAsString = (type, tags, encode = true) => tags.reduce((str, t) => {\n  const tag = t;\n  const attributeHtml = Object.keys(tag).filter(\n    (attribute) => !(attribute === \"innerHTML\" /* INNER_HTML */ || attribute === \"cssText\" /* CSS_TEXT */)\n  ).reduce((string, attribute) => {\n    const attr = typeof tag[attribute] === \"undefined\" ? attribute : `${attribute}=\"${encodeSpecialCharacters(tag[attribute], encode)}\"`;\n    return string ? `${string} ${attr}` : attr;\n  }, \"\");\n  const tagContent = tag.innerHTML || tag.cssText || \"\";\n  const isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n  return `${str}<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeHtml}${isSelfClosing ? `/>` : `>${tagContent}</${type}>`}`;\n}, \"\");\nvar convertElementAttributesToReactProps = (attributes, initProps = {}) => Object.keys(attributes).reduce((obj, key) => {\n  const mapped = REACT_TAG_MAP[key];\n  obj[mapped || key] = attributes[key];\n  return obj;\n}, initProps);\nvar generateTitleAsReactComponent = (_type, title, attributes) => {\n  const initProps = {\n    key: title,\n    [HELMET_ATTRIBUTE]: true\n  };\n  const props = convertElementAttributesToReactProps(attributes, initProps);\n  return [React.createElement(\"title\" /* TITLE */, props, title)];\n};\nvar generateTagsAsReactComponent = (type, tags) => tags.map((tag, i) => {\n  const mappedTag = {\n    key: i,\n    [HELMET_ATTRIBUTE]: true\n  };\n  Object.keys(tag).forEach((attribute) => {\n    const mapped = REACT_TAG_MAP[attribute];\n    const mappedAttribute = mapped || attribute;\n    if (mappedAttribute === \"innerHTML\" /* INNER_HTML */ || mappedAttribute === \"cssText\" /* CSS_TEXT */) {\n      const content = tag.innerHTML || tag.cssText;\n      mappedTag.dangerouslySetInnerHTML = { __html: content };\n    } else {\n      mappedTag[mappedAttribute] = tag[attribute];\n    }\n  });\n  return React.createElement(type, mappedTag);\n});\nvar getMethodsForTag = (type, tags, encode = true) => {\n  switch (type) {\n    case \"title\" /* TITLE */:\n      return {\n        toComponent: () => generateTitleAsReactComponent(type, tags.title, tags.titleAttributes),\n        toString: () => generateTitleAsString(type, tags.title, tags.titleAttributes, encode)\n      };\n    case \"bodyAttributes\" /* BODY */:\n    case \"htmlAttributes\" /* HTML */:\n      return {\n        toComponent: () => convertElementAttributesToReactProps(tags),\n        toString: () => generateElementAttributesAsString(tags)\n      };\n    default:\n      return {\n        toComponent: () => generateTagsAsReactComponent(type, tags),\n        toString: () => generateTagsAsString(type, tags, encode)\n      };\n  }\n};\nvar getPriorityMethods = ({ metaTags, linkTags, scriptTags, encode }) => {\n  const meta = prioritizer(metaTags, SEO_PRIORITY_TAGS.meta);\n  const link = prioritizer(linkTags, SEO_PRIORITY_TAGS.link);\n  const script = prioritizer(scriptTags, SEO_PRIORITY_TAGS.script);\n  const priorityMethods = {\n    toComponent: () => [\n      ...generateTagsAsReactComponent(\"meta\" /* META */, meta.priority),\n      ...generateTagsAsReactComponent(\"link\" /* LINK */, link.priority),\n      ...generateTagsAsReactComponent(\"script\" /* SCRIPT */, script.priority)\n    ],\n    toString: () => (\n      // generate all the tags as strings and concatenate them\n      `${getMethodsForTag(\"meta\" /* META */, meta.priority, encode)} ${getMethodsForTag(\n        \"link\" /* LINK */,\n        link.priority,\n        encode\n      )} ${getMethodsForTag(\"script\" /* SCRIPT */, script.priority, encode)}`\n    )\n  };\n  return {\n    priorityMethods,\n    metaTags: meta.default,\n    linkTags: link.default,\n    scriptTags: script.default\n  };\n};\nvar mapStateOnServer = (props) => {\n  const {\n    baseTag,\n    bodyAttributes,\n    encode = true,\n    htmlAttributes,\n    noscriptTags,\n    styleTags,\n    title = \"\",\n    titleAttributes,\n    prioritizeSeoTags\n  } = props;\n  let { linkTags, metaTags, scriptTags } = props;\n  let priorityMethods = {\n    toComponent: () => {\n    },\n    toString: () => \"\"\n  };\n  if (prioritizeSeoTags) {\n    ({ priorityMethods, linkTags, metaTags, scriptTags } = getPriorityMethods(props));\n  }\n  return {\n    priority: priorityMethods,\n    base: getMethodsForTag(\"base\" /* BASE */, baseTag, encode),\n    bodyAttributes: getMethodsForTag(\"bodyAttributes\" /* BODY */, bodyAttributes, encode),\n    htmlAttributes: getMethodsForTag(\"htmlAttributes\" /* HTML */, htmlAttributes, encode),\n    link: getMethodsForTag(\"link\" /* LINK */, linkTags, encode),\n    meta: getMethodsForTag(\"meta\" /* META */, metaTags, encode),\n    noscript: getMethodsForTag(\"noscript\" /* NOSCRIPT */, noscriptTags, encode),\n    script: getMethodsForTag(\"script\" /* SCRIPT */, scriptTags, encode),\n    style: getMethodsForTag(\"style\" /* STYLE */, styleTags, encode),\n    title: getMethodsForTag(\"title\" /* TITLE */, { title, titleAttributes }, encode)\n  };\n};\nvar server_default = mapStateOnServer;\n\n// src/HelmetData.ts\nvar instances = [];\nvar isDocument = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\nvar HelmetData = class {\n  instances = [];\n  canUseDOM = isDocument;\n  context;\n  value = {\n    setHelmet: (serverState) => {\n      this.context.helmet = serverState;\n    },\n    helmetInstances: {\n      get: () => this.canUseDOM ? instances : this.instances,\n      add: (instance) => {\n        (this.canUseDOM ? instances : this.instances).push(instance);\n      },\n      remove: (instance) => {\n        const index = (this.canUseDOM ? instances : this.instances).indexOf(instance);\n        (this.canUseDOM ? instances : this.instances).splice(index, 1);\n      }\n    }\n  };\n  constructor(context, canUseDOM) {\n    this.context = context;\n    this.canUseDOM = canUseDOM || false;\n    if (!canUseDOM) {\n      context.helmet = server_default({\n        baseTag: [],\n        bodyAttributes: {},\n        encodeSpecialCharacters: true,\n        htmlAttributes: {},\n        linkTags: [],\n        metaTags: [],\n        noscriptTags: [],\n        scriptTags: [],\n        styleTags: [],\n        title: \"\",\n        titleAttributes: {}\n      });\n    }\n  }\n};\n\n// src/Provider.tsx\nvar defaultValue = {};\nvar Context = React2.createContext(defaultValue);\nvar HelmetProvider = class _HelmetProvider extends Component {\n  static canUseDOM = isDocument;\n  helmetData;\n  constructor(props) {\n    super(props);\n    this.helmetData = new HelmetData(this.props.context || {}, _HelmetProvider.canUseDOM);\n  }\n  render() {\n    return /* @__PURE__ */ React2.createElement(Context.Provider, { value: this.helmetData.value }, this.props.children);\n  }\n};\n\n// src/Dispatcher.tsx\nimport { Component as Component2 } from \"react\";\nimport shallowEqual from \"shallowequal\";\n\n// src/client.ts\nvar updateTags = (type, tags) => {\n  const headElement = document.head || document.querySelector(\"head\" /* HEAD */);\n  const tagNodes = headElement.querySelectorAll(`${type}[${HELMET_ATTRIBUTE}]`);\n  const oldTags = [].slice.call(tagNodes);\n  const newTags = [];\n  let indexToDelete;\n  if (tags && tags.length) {\n    tags.forEach((tag) => {\n      const newElement = document.createElement(type);\n      for (const attribute in tag) {\n        if (Object.prototype.hasOwnProperty.call(tag, attribute)) {\n          if (attribute === \"innerHTML\" /* INNER_HTML */) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === \"cssText\" /* CSS_TEXT */) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            const attr = attribute;\n            const value = typeof tag[attr] === \"undefined\" ? \"\" : tag[attr];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n      newElement.setAttribute(HELMET_ATTRIBUTE, \"true\");\n      if (oldTags.some((existingTag, index) => {\n        indexToDelete = index;\n        return newElement.isEqualNode(existingTag);\n      })) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n  oldTags.forEach((tag) => tag.parentNode?.removeChild(tag));\n  newTags.forEach((tag) => headElement.appendChild(tag));\n  return {\n    oldTags,\n    newTags\n  };\n};\nvar updateAttributes = (tagName, attributes) => {\n  const elementTag = document.getElementsByTagName(tagName)[0];\n  if (!elementTag) {\n    return;\n  }\n  const helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n  const helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n  const attributesToRemove = [...helmetAttributes];\n  const attributeKeys = Object.keys(attributes);\n  for (const attribute of attributeKeys) {\n    const value = attributes[attribute] || \"\";\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n    const indexToSave = attributesToRemove.indexOf(attribute);\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n  for (let i = attributesToRemove.length - 1; i >= 0; i -= 1) {\n    elementTag.removeAttribute(attributesToRemove[i]);\n  }\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(HELMET_ATTRIBUTE);\n  } else if (elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n    elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n  }\n};\nvar updateTitle = (title, attributes) => {\n  if (typeof title !== \"undefined\" && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n  updateAttributes(\"title\" /* TITLE */, attributes);\n};\nvar commitTagChanges = (newState, cb) => {\n  const {\n    baseTag,\n    bodyAttributes,\n    htmlAttributes,\n    linkTags,\n    metaTags,\n    noscriptTags,\n    onChangeClientState,\n    scriptTags,\n    styleTags,\n    title,\n    titleAttributes\n  } = newState;\n  updateAttributes(\"body\" /* BODY */, bodyAttributes);\n  updateAttributes(\"html\" /* HTML */, htmlAttributes);\n  updateTitle(title, titleAttributes);\n  const tagUpdates = {\n    baseTag: updateTags(\"base\" /* BASE */, baseTag),\n    linkTags: updateTags(\"link\" /* LINK */, linkTags),\n    metaTags: updateTags(\"meta\" /* META */, metaTags),\n    noscriptTags: updateTags(\"noscript\" /* NOSCRIPT */, noscriptTags),\n    scriptTags: updateTags(\"script\" /* SCRIPT */, scriptTags),\n    styleTags: updateTags(\"style\" /* STYLE */, styleTags)\n  };\n  const addedTags = {};\n  const removedTags = {};\n  Object.keys(tagUpdates).forEach((tagType) => {\n    const { newTags, oldTags } = tagUpdates[tagType];\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n  if (cb) {\n    cb();\n  }\n  onChangeClientState(newState, addedTags, removedTags);\n};\nvar _helmetCallback = null;\nvar handleStateChangeOnClient = (newState) => {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(() => {\n      commitTagChanges(newState, () => {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\nvar client_default = handleStateChangeOnClient;\n\n// src/Dispatcher.tsx\nvar HelmetDispatcher = class extends Component2 {\n  rendered = false;\n  shouldComponentUpdate(nextProps) {\n    return !shallowEqual(nextProps, this.props);\n  }\n  componentDidUpdate() {\n    this.emitChange();\n  }\n  componentWillUnmount() {\n    const { helmetInstances } = this.props.context;\n    helmetInstances.remove(this);\n    this.emitChange();\n  }\n  emitChange() {\n    const { helmetInstances, setHelmet } = this.props.context;\n    let serverState = null;\n    const state = reducePropsToState(\n      helmetInstances.get().map((instance) => {\n        const props = { ...instance.props };\n        delete props.context;\n        return props;\n      })\n    );\n    if (HelmetProvider.canUseDOM) {\n      client_default(state);\n    } else if (server_default) {\n      serverState = server_default(state);\n    }\n    setHelmet(serverState);\n  }\n  // componentWillMount will be deprecated\n  // for SSR, initialize on first render\n  // constructor is also unsafe in StrictMode\n  init() {\n    if (this.rendered) {\n      return;\n    }\n    this.rendered = true;\n    const { helmetInstances } = this.props.context;\n    helmetInstances.add(this);\n    this.emitChange();\n  }\n  render() {\n    this.init();\n    return null;\n  }\n};\n\n// src/index.tsx\nvar Helmet = class extends Component3 {\n  static defaultProps = {\n    defer: true,\n    encodeSpecialCharacters: true,\n    prioritizeSeoTags: false\n  };\n  shouldComponentUpdate(nextProps) {\n    return !fastCompare(without(this.props, \"helmetData\"), without(nextProps, \"helmetData\"));\n  }\n  mapNestedChildrenToProps(child, nestedChildren) {\n    if (!nestedChildren) {\n      return null;\n    }\n    switch (child.type) {\n      case \"script\" /* SCRIPT */:\n      case \"noscript\" /* NOSCRIPT */:\n        return {\n          innerHTML: nestedChildren\n        };\n      case \"style\" /* STYLE */:\n        return {\n          cssText: nestedChildren\n        };\n      default:\n        throw new Error(\n          `<${child.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`\n        );\n    }\n  }\n  flattenArrayTypeChildren(child, arrayTypeChildren, newChildProps, nestedChildren) {\n    return {\n      ...arrayTypeChildren,\n      [child.type]: [\n        ...arrayTypeChildren[child.type] || [],\n        {\n          ...newChildProps,\n          ...this.mapNestedChildrenToProps(child, nestedChildren)\n        }\n      ]\n    };\n  }\n  mapObjectTypeChildren(child, newProps, newChildProps, nestedChildren) {\n    switch (child.type) {\n      case \"title\" /* TITLE */:\n        return {\n          ...newProps,\n          [child.type]: nestedChildren,\n          titleAttributes: { ...newChildProps }\n        };\n      case \"body\" /* BODY */:\n        return {\n          ...newProps,\n          bodyAttributes: { ...newChildProps }\n        };\n      case \"html\" /* HTML */:\n        return {\n          ...newProps,\n          htmlAttributes: { ...newChildProps }\n        };\n      default:\n        return {\n          ...newProps,\n          [child.type]: { ...newChildProps }\n        };\n    }\n  }\n  mapArrayTypeChildrenToProps(arrayTypeChildren, newProps) {\n    let newFlattenedProps = { ...newProps };\n    Object.keys(arrayTypeChildren).forEach((arrayChildName) => {\n      newFlattenedProps = {\n        ...newFlattenedProps,\n        [arrayChildName]: arrayTypeChildren[arrayChildName]\n      };\n    });\n    return newFlattenedProps;\n  }\n  warnOnInvalidChildren(child, nestedChildren) {\n    invariant(\n      VALID_TAG_NAMES.some((name) => child.type === name),\n      typeof child.type === \"function\" ? `You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.` : `Only elements types ${VALID_TAG_NAMES.join(\n        \", \"\n      )} are allowed. Helmet does not support rendering <${child.type}> elements. Refer to our API for more information.`\n    );\n    invariant(\n      !nestedChildren || typeof nestedChildren === \"string\" || Array.isArray(nestedChildren) && !nestedChildren.some((nestedChild) => typeof nestedChild !== \"string\"),\n      `Helmet expects a string as a child of <${child.type}>. Did you forget to wrap your children in braces? ( <${child.type}>{\\`\\`}</${child.type}> ) Refer to our API for more information.`\n    );\n    return true;\n  }\n  mapChildrenToProps(children, newProps) {\n    let arrayTypeChildren = {};\n    React3.Children.forEach(children, (child) => {\n      if (!child || !child.props) {\n        return;\n      }\n      const { children: nestedChildren, ...childProps } = child.props;\n      const newChildProps = Object.keys(childProps).reduce((obj, key) => {\n        obj[HTML_TAG_MAP[key] || key] = childProps[key];\n        return obj;\n      }, {});\n      let { type } = child;\n      if (typeof type === \"symbol\") {\n        type = type.toString();\n      } else {\n        this.warnOnInvalidChildren(child, nestedChildren);\n      }\n      switch (type) {\n        case \"Symbol(react.fragment)\" /* FRAGMENT */:\n          newProps = this.mapChildrenToProps(nestedChildren, newProps);\n          break;\n        case \"link\" /* LINK */:\n        case \"meta\" /* META */:\n        case \"noscript\" /* NOSCRIPT */:\n        case \"script\" /* SCRIPT */:\n        case \"style\" /* STYLE */:\n          arrayTypeChildren = this.flattenArrayTypeChildren(\n            child,\n            arrayTypeChildren,\n            newChildProps,\n            nestedChildren\n          );\n          break;\n        default:\n          newProps = this.mapObjectTypeChildren(child, newProps, newChildProps, nestedChildren);\n          break;\n      }\n    });\n    return this.mapArrayTypeChildrenToProps(arrayTypeChildren, newProps);\n  }\n  render() {\n    const { children, ...props } = this.props;\n    let newProps = { ...props };\n    let { helmetData } = props;\n    if (children) {\n      newProps = this.mapChildrenToProps(children, newProps);\n    }\n    if (helmetData && !(helmetData instanceof HelmetData)) {\n      const data = helmetData;\n      helmetData = new HelmetData(data.context, true);\n      delete newProps.helmetData;\n    }\n    return helmetData ? /* @__PURE__ */ React3.createElement(HelmetDispatcher, { ...newProps, context: helmetData.value }) : /* @__PURE__ */ React3.createElement(Context.Consumer, null, (context) => /* @__PURE__ */ React3.createElement(HelmetDispatcher, { ...newProps, context }));\n  }\n};\nexport {\n  Helmet,\n  HelmetData,\n  HelmetProvider\n};\n","// Environment configuration\nexport const config = {\n  app: {\n    name: import.meta.env.VITE_APP_NAME || 'IVolex',\n    version: import.meta.env.VITE_APP_VERSION || '0.0.1',\n    debugMode: import.meta.env.VITE_DEBUG_MODE === 'true',\n  },\n  api: {\n    baseUrl: import.meta.env.VITE_API_BASE_URL || '/api',\n  },\n  features: {\n    analytics: import.meta.env.VITE_ENABLE_ANALYTICS === 'true',\n  },\n  dev: {\n    logLevel: import.meta.env.VITE_LOG_LEVEL || 'info',\n  },\n}\n\n// App constants\nexport const APP_CONSTANTS = {\n  BREAKPOINTS: {\n    sm: 640,\n    md: 768,\n    lg: 1024,\n    xl: 1280,\n    '2xl': 1536,\n  },\n  CATEGORIES: ['bags', 'belts', 'wallets', 'footwear'],\n  CURRENCY: 'USD',\n  CURRENCY_SYMBOL: '$',\n}\n\n// Navigation routes\nexport const ROUTES = {\n  HOME: '/',\n  SHOP: '/shop',\n  CATEGORY: '/category',\n  PRODUCT: '/product',\n  CART: '/cart',\n  CHECKOUT: '/checkout',\n}\n","import { Helmet, HelmetProvider } from 'react-helmet-async'\r\nimport { config } from '../config'\r\n\r\nexport function SEOProvider({ children }) {\r\n  return <HelmetProvider>{children}</HelmetProvider>\r\n}\r\n\r\nexport function SEO({\r\n  title,\r\n  description,\r\n  keywords,\r\n  image,\r\n  url,\r\n  type = 'website',\r\n  noindex = false,\r\n  canonical,\r\n  alternateLanguages,\r\n  structuredData,\r\n}) {\r\n  const siteName = config.app.name\r\n  const fullTitle = title ? `${title} | ${siteName}` : siteName\r\n  const finalUrl = url || (typeof window !== 'undefined' ? window.location.href : '')\r\n  const defaultDescription = 'Premium leather goods crafted with attention to detail. Shop our collection of leather bags, belts, wallets, and footwear.'\r\n  const finalDescription = description || defaultDescription\r\n  \r\n  const defaultImage = '/images/og-image.jpg'\r\n  const finalImage = image || defaultImage\r\n  const fullImageUrl = finalImage.startsWith('http') \r\n    ? finalImage \r\n    : `${typeof window !== 'undefined' ? window.location.origin : ''}${finalImage}`\r\n\r\n  const defaultKeywords = [\r\n    'leather goods',\r\n    'leather bags',\r\n    'leather belts', \r\n    'leather wallets',\r\n    'leather footwear',\r\n    'premium leather',\r\n    'handcrafted leather',\r\n    'luxury accessories'\r\n  ]\r\n  const finalKeywords = keywords ? [...keywords, ...defaultKeywords] : defaultKeywords\r\n\r\n  return (\r\n    <Helmet>\r\n      {/* Basic Meta Tags */}\r\n      <title>{fullTitle}</title>\r\n      <meta name=\"description\" content={finalDescription} />\r\n      <meta name=\"keywords\" content={finalKeywords.join(', ')} />\r\n      \r\n      {/* Canonical URL */}\r\n      {canonical && <link rel=\"canonical\" href={canonical} />}\r\n      \r\n      {/* Robots */}\r\n      <meta name=\"robots\" content={noindex ? 'noindex,nofollow' : 'index,follow'} />\r\n      \r\n      {/* Open Graph */}\r\n      <meta property=\"og:type\" content={type} />\r\n      <meta property=\"og:title\" content={fullTitle} />\r\n      <meta property=\"og:description\" content={finalDescription} />\r\n      <meta property=\"og:image\" content={fullImageUrl} />\r\n      <meta property=\"og:url\" content={finalUrl} />\r\n      <meta property=\"og:site_name\" content={siteName} />\r\n      \r\n      {/* Twitter Card */}\r\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\r\n      <meta name=\"twitter:title\" content={fullTitle} />\r\n      <meta name=\"twitter:description\" content={finalDescription} />\r\n      <meta name=\"twitter:image\" content={fullImageUrl} />\r\n      \r\n      {/* Additional SEO Meta */}\r\n      <meta name=\"author\" content={siteName} />\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n      <meta httpEquiv=\"Content-Language\" content=\"en\" />\r\n      \r\n      {/* Alternate Languages */}\r\n      {alternateLanguages && alternateLanguages.map(lang => (\r\n        <link\r\n          key={lang.hreflang}\r\n          rel=\"alternate\"\r\n          hrefLang={lang.hreflang}\r\n          href={lang.href}\r\n        />\r\n      ))}\r\n      \r\n      {/* Structured Data */}\r\n      {structuredData && (\r\n        <script type=\"application/ld+json\">\r\n          {JSON.stringify(structuredData)}\r\n        </script>\r\n      )}\r\n    </Helmet>\r\n  )\r\n}\r\n\r\n// Predefined structured data generators\r\nexport const generateOrganizationSchema = () => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"Organization\",\r\n  \"name\": \"IVolex\",\r\n  \"description\": \"Premium leather goods crafted with attention to detail\",\r\n  \"url\": typeof window !== 'undefined' ? window.location.origin : '',\r\n  \"logo\": `${typeof window !== 'undefined' ? window.location.origin : ''}/images/logo.png`,\r\n  \"contactPoint\": {\r\n    \"@type\": \"ContactPoint\",\r\n    \"telephone\": \"+1-555-123-4567\",\r\n    \"contactType\": \"customer service\",\r\n    \"email\": \"support@ivolex.com\"\r\n  },\r\n  \"sameAs\": [\r\n    \"https://facebook.com/ivolex\",\r\n    \"https://instagram.com/ivolex\", \r\n    \"https://twitter.com/ivolex\"\r\n  ]\r\n})\r\n\r\nexport const generateProductSchema = (product) => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"Product\",\r\n  \"name\": product.name,\r\n  \"description\": product.short || product.description,\r\n  \"image\": `${typeof window !== 'undefined' ? window.location.origin : ''}${product.image}`,\r\n  \"brand\": {\r\n    \"@type\": \"Brand\",\r\n    \"name\": \"IVolex\"\r\n  },\r\n  \"offers\": {\r\n    \"@type\": \"Offer\",\r\n    \"price\": product.price,\r\n    \"priceCurrency\": \"USD\",\r\n    \"availability\": \"https://schema.org/InStock\"\r\n  },\r\n  \"aggregateRating\": product.rating ? {\r\n    \"@type\": \"AggregateRating\",\r\n    \"ratingValue\": product.rating,\r\n    \"ratingCount\": 100, // This would come from your actual review data\r\n    \"bestRating\": 5,\r\n    \"worstRating\": 1\r\n  } : undefined\r\n})\r\n\r\nexport const generateBreadcrumbSchema = (breadcrumbs) => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"BreadcrumbList\",\r\n  \"itemListElement\": breadcrumbs.map((crumb, index) => ({\r\n    \"@type\": \"ListItem\",\r\n    \"position\": index + 1,\r\n    \"name\": crumb.name,\r\n    \"item\": crumb.url\r\n  }))\r\n})","import FloatingNavbar from './components/FloatingNavbar.jsx'\nimport Footer from './sections/Footer.jsx'\nimport { LocationProvider } from './contexts/LocationContext.jsx'\nimport { CartProvider } from './contexts/CartContext.jsx'\nimport { AuthProvider } from './contexts/AuthContext.jsx'\nimport { OrderProvider } from './contexts/OrderContext.jsx'\nimport { NotificationProvider } from './contexts/NotificationContext.jsx'\nimport { AuditProvider } from './contexts/AuditContext.jsx'\nimport { InventoryProvider } from './contexts/InventoryContext.jsx'\nimport { ShippingProvider } from './contexts/ShippingContext.jsx'\nimport { SegmentProvider } from './contexts/SegmentContext.jsx'\nimport { ThemeProvider } from '../contexts/ThemeContext.jsx'\nimport { I18nProvider } from './contexts/I18nContext.jsx'\nimport { SecurityProvider, RateLimitProvider, SecurityValidator } from '../components/SecurityProvider.jsx'\nimport { RecommendationProvider } from './contexts/RecommendationContext.jsx'\nimport SkipToContent from './components/SkipToContent.jsx'\nimport ErrorBoundary from './components/ErrorBoundary.jsx'\nimport ToastProvider from './components/ToastProvider'\nimport { BrowserRouter, Routes, Route } from 'react-router-dom'\nimport { Suspense, lazy } from 'react'\nimport { usePerformance } from '../hooks/usePerformance'\nimport { SEOProvider } from '../components/SEO'\n\n// Lazy load route components for better performance\nconst Home = lazy(() => import('../pages/screens/Home'))\nconst Category = lazy(() => import('../pages/screens/Category'))\nconst Shop = lazy(() => import('../pages/screens/Shop'))\nconst Product = lazy(() => import('../pages/screens/Product'))\nconst Cart = lazy(() => import('../pages/screens/Cart'))\nconst Checkout = lazy(() => import('../pages/screens/Checkout'))\nconst Customize = lazy(() => import('../pages/screens/Customize'))\nconst About = lazy(() => import('../pages/screens/About'))\nconst Contact = lazy(() => import('../pages/screens/Contact'))\nconst Login = lazy(() => import('../pages/screens/Login'))\nconst Register = lazy(() => import('../pages/screens/Register'))\nconst Profile = lazy(() => import('../pages/screens/Profile'))\nconst OrderConfirmation = lazy(() => import('../pages/screens/OrderConfirmation'))\nconst MyAccount = lazy(() => import('../pages/screens/Account'))\nconst RequestTracking = lazy(() => import('../pages/screens/Tracking'))\nconst TrackingPage = lazy(() => import('../pages/screens/TrackingPage'))\nconst AdminPanel = lazy(() => import('../pages/screens/Admin/AdminPanel'))\nconst NotFound = lazy(() => import('../pages/screens/NotFound'))\n\n// Loading component\nfunction LoadingSpinner() {\n  return (\n    <div className=\"flex items-center justify-center min-h-[50vh]\">\n      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600\"></div>\n      <span className=\"ml-3 text-stone-600 dark:text-stone-400\">Loading...</span>\n    </div>\n  )\n}\n\nexport default function App() {\n  // Monitor performance in development\n  usePerformance()\n\n  return (\n    <SecurityProvider>\n      <RateLimitProvider>\n        <I18nProvider>\n          <RecommendationProvider>\n            <SegmentProvider>\n            <ThemeProvider>\n            <SEOProvider>\n              <LocationProvider>\n                <AuthProvider>\n                  <NotificationProvider>\n                    <AuditProvider>\n                      <InventoryProvider>\n                        <ShippingProvider>\n                          <OrderProvider>\n                            <CartProvider>\n                  <BrowserRouter>\n                    <SecurityValidator>\n                      <div className=\"min-h-screen bg-segment-texture transition-all duration-500\">\n                        <SkipToContent />\n                        <FloatingNavbar />\n                        <main id=\"main\" className=\"pt-32\">\n                          <ErrorBoundary>\n                            <Suspense fallback={<LoadingSpinner />}>\n                              <Routes>\n                                <Route path=\"/\" element={<Home />} />\n                                <Route path=\"/leather\" element={<Home />} />\n                                <Route path=\"/electronics\" element={<Home />} />\n                                <Route path=\"/furniture\" element={<Home />} />\n                                <Route path=\"/shop\" element={<Shop />} />\n                                <Route path=\"/category/:category\" element={<Category />} />\n                                <Route path=\"/product/:id\" element={<Product />} />\n                                <Route path=\"/cart\" element={<Cart />} />\n                                <Route path=\"/checkout\" element={<Checkout />} />\n                                <Route path=\"/customize\" element={<Customize />} />\n                                <Route path=\"/about\" element={<About />} />\n                                <Route path=\"/contact\" element={<Contact />} />\n                                <Route path=\"/login\" element={<Login />} />\n                                <Route path=\"/register\" element={<Register />} />\n                                <Route path=\"/profile\" element={<Profile />} />\n                                <Route path=\"/account/*\" element={<MyAccount />} />\n                                <Route path=\"/track/:requestId\" element={<RequestTracking />} />\n                                <Route path=\"/track-shipment\" element={<TrackingPage />} />\n                                <Route path=\"/order-confirmation\" element={<OrderConfirmation />} />\n                                <Route path=\"/admin/*\" element={<AdminPanel />} />\n                                {/* 404 Catch-all route - must be last */}\n                                <Route path=\"*\" element={<NotFound />} />\n                              </Routes>\n                            </Suspense>\n                          </ErrorBoundary>\n                        </main>\n                        <Footer />\n                        <ToastProvider />\n                      </div>\n                    </SecurityValidator>\n                  </BrowserRouter>\n                            </CartProvider>\n                          </OrderProvider>\n                        </ShippingProvider>\n                      </InventoryProvider>\n                    </AuditProvider>\n                  </NotificationProvider>\n                </AuthProvider>\n              </LocationProvider>\n            </SEOProvider>\n            </ThemeProvider>\n            </SegmentProvider>\n          </RecommendationProvider>\n        </I18nProvider>\n      </RateLimitProvider>\n    </SecurityProvider>\n  )\n}","import { useEffect, useState } from 'react'\r\n\r\nexport function usePerformance() {\r\n  const [metrics, setMetrics] = useState({\r\n    fcp: null, // First Contentful Paint\r\n    lcp: null, // Largest Contentful Paint\r\n    fid: null, // First Input Delay\r\n    cls: null, // Cumulative Layout Shift\r\n    ttfb: null, // Time to First Byte\r\n  })\r\n\r\n  useEffect(() => {\r\n    // Only run in browser environment\r\n    if (typeof window === 'undefined') return\r\n\r\n    // Measure Time to First Byte\r\n    const navigation = performance.getEntriesByType('navigation')[0]\r\n    if (navigation) {\r\n      setMetrics(prev => ({\r\n        ...prev,\r\n        ttfb: navigation.responseStart - navigation.requestStart,\r\n      }))\r\n    }\r\n\r\n    // Web Vitals using PerformanceObserver\r\n    if ('PerformanceObserver' in window) {\r\n      // First Contentful Paint\r\n      const fcpObserver = new PerformanceObserver(list => {\r\n        const entries = list.getEntries()\r\n        const fcp = entries.find(entry => entry.name === 'first-contentful-paint')\r\n        if (fcp) {\r\n          setMetrics(prev => ({ ...prev, fcp: fcp.startTime }))\r\n        }\r\n      })\r\n\r\n      // Largest Contentful Paint\r\n      const lcpObserver = new PerformanceObserver(list => {\r\n        const entries = list.getEntries()\r\n        const lastEntry = entries[entries.length - 1]\r\n        setMetrics(prev => ({ ...prev, lcp: lastEntry.startTime }))\r\n      })\r\n\r\n      // First Input Delay\r\n      const fidObserver = new PerformanceObserver(list => {\r\n        const entries = list.getEntries()\r\n        const firstEntry = entries[0]\r\n        setMetrics(prev => ({ \r\n          ...prev, \r\n          fid: firstEntry.processingStart - firstEntry.startTime \r\n        }))\r\n      })\r\n\r\n      // Cumulative Layout Shift\r\n      const clsObserver = new PerformanceObserver(list => {\r\n        let clsValue = 0\r\n        const entries = list.getEntries()\r\n        \r\n        for (const entry of entries) {\r\n          if (!entry.hadRecentInput) {\r\n            clsValue += entry.value\r\n          }\r\n        }\r\n        \r\n        setMetrics(prev => ({ ...prev, cls: clsValue }))\r\n      })\r\n\r\n      try {\r\n        fcpObserver.observe({ entryTypes: ['paint'] })\r\n        lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] })\r\n        fidObserver.observe({ entryTypes: ['first-input'] })\r\n        clsObserver.observe({ entryTypes: ['layout-shift'] })\r\n      } catch (error) {\r\n        console.warn('Performance Observer not supported:', error)\r\n      }\r\n\r\n      return () => {\r\n        fcpObserver.disconnect()\r\n        lcpObserver.disconnect()\r\n        fidObserver.disconnect()\r\n        clsObserver.disconnect()\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Log performance metrics in development\r\n  useEffect(() => {\r\n    if (import.meta.env?.DEV && Object.values(metrics).some(Boolean)) {\r\n      console.group('🚀 Performance Metrics')\r\n      console.log('First Contentful Paint (FCP):', metrics.fcp?.toFixed(2), 'ms')\r\n      console.log('Largest Contentful Paint (LCP):', metrics.lcp?.toFixed(2), 'ms')\r\n      console.log('First Input Delay (FID):', metrics.fid?.toFixed(2), 'ms')\r\n      console.log('Cumulative Layout Shift (CLS):', metrics.cls?.toFixed(4))\r\n      console.log('Time to First Byte (TTFB):', metrics.ttfb?.toFixed(2), 'ms')\r\n      console.groupEnd()\r\n    }\r\n  }, [metrics])\r\n\r\n  return metrics\r\n}\r\n\r\nexport function useResourceTiming() {\r\n  const [resources, setResources] = useState([])\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n\r\n    const observer = new PerformanceObserver(list => {\r\n      const entries = list.getEntries()\r\n      const resourceData = entries.map(entry => ({\r\n        name: entry.name,\r\n        type: entry.initiatorType,\r\n        size: entry.transferSize,\r\n        duration: entry.duration,\r\n        startTime: entry.startTime,\r\n      }))\r\n      \r\n      setResources(prev => [...prev, ...resourceData])\r\n    })\r\n\r\n    try {\r\n      observer.observe({ entryTypes: ['resource'] })\r\n    } catch (error) {\r\n      console.warn('Resource timing not supported:', error)\r\n    }\r\n\r\n    return () => observer.disconnect()\r\n  }, [])\r\n\r\n  return resources\r\n}\r\n\r\nexport function useMemoryUsage() {\r\n  const [memory, setMemory] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || !performance.memory) return\r\n\r\n    const updateMemory = () => {\r\n      setMemory({\r\n        used: performance.memory.usedJSHeapSize,\r\n        total: performance.memory.totalJSHeapSize,\r\n        limit: performance.memory.jsHeapSizeLimit,\r\n      })\r\n    }\r\n\r\n    updateMemory()\r\n    const interval = setInterval(updateMemory, 5000) // Update every 5 seconds\r\n\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  return memory\r\n}","import React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport App from './ui/App.jsx'\nimport './styles.css'\n\nconst root = createRoot(document.getElementById('root'))\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n)\n"],"file":"assets/index-AVblc3ol.js"}