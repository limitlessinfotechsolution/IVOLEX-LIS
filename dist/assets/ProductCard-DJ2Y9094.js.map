{"version":3,"file":"ProductCard-DJ2Y9094.js","sources":["../../src/components/common/Badge/Badge.jsx","../../src/components/product/ProductCard/ProductCard.jsx"],"sourcesContent":["export default function Badge({ children, tone = 'brand', className = '' }) {\n  const tones = {\n    brand: 'bg-brand-100 text-brand-700',\n    neutral: 'bg-stone-100 text-stone-700',\n    gold: 'bg-amber-100 text-amber-800',\n    success: 'bg-emerald-100 text-emerald-700',\n  }\n  return (\n    <span\n      className={`inline-block text-xs px-2 py-1 rounded-full ${tones[tone]} ${className}`}\n    >\n      {children}\n    </span>\n  )\n}\n","import { motion } from 'framer-motion'\nimport { ShoppingCart, Heart } from 'lucide-react'\nimport Stars from '../../common/Stars/Stars'\nimport Badge from '../../common/Badge'\nimport { useLocation } from '../../../contexts/LocationContext.jsx'\nimport { useCart } from '../../../contexts/CartContext.jsx'\nimport { useAuth } from '../../../contexts/AuthContext.jsx'\nimport { useNavigate } from 'react-router-dom'\n\nexport default function ProductCard({ product }) {\n  const { effectiveCurrency } = useLocation()\n  const { add } = useCart()\n  const { user, isAuthenticated } = useAuth()\n  const navigate = useNavigate()\n\n  // Convert price supporting both string like \"SAR 450\" and number 149\n  const formatPrice = price => {\n    if (typeof price === 'number') {\n      // simple formatting without conversion\n      return `${effectiveCurrency} ${price.toFixed(2)}`\n    }\n    if (typeof price === 'string') {\n      const numericPrice = parseFloat(price.replace(/[^\\d.]/g, ''))\n      return `${effectiveCurrency} ${Number.isFinite(numericPrice) ? numericPrice.toFixed(0) : price}`\n    }\n    return `${effectiveCurrency} ${price}`\n  }\n\n  const onCardClick = () => {\n    if (product.id) navigate(`/product/${product.id}`)\n  }\n\n  const checkAuthAndProceed = () => {\n    if (!isAuthenticated || !user) {\n      // Redirect to auth page instead of showing toast\n      navigate('/auth')\n      return false\n    }\n    return true\n  }\n\n  const handleAddToCart = e => {\n    e.stopPropagation()\n    if (checkAuthAndProceed()) {\n      add(safeProduct, 1)\n    }\n  }\n\n  const handleAddToWishlist = e => {\n    e.stopPropagation()\n    if (checkAuthAndProceed()) {\n      // For now, we'll just add to wishlist\n      // In a full implementation, this would add to actual wishlist\n    }\n  }\n\n  const safeProduct = {\n    id: product.id,\n    name: product.name || product.title,\n    image: product.image || product.img,\n    price:\n      typeof product.price === 'string'\n        ? parseFloat(product.price.replace(/[^\\d.]/g, ''))\n        : product.price,\n  }\n\n  return (\n    <motion.div\n      className=\"relative overflow-hidden rounded-2xl bg-transparent shadow-soft cursor-pointer group w-full min-w-0\"\n      whileHover={{ scale: 1.05 }}\n      transition={{ duration: 0.3 }}\n      onClick={onCardClick}\n      onKeyDown={e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault()\n          onCardClick()\n        }\n      }}\n      role=\"button\"\n      tabIndex={0}\n      aria-label={`View details for ${safeProduct.name}`}\n    >\n      {/* Circular Image Frame */}\n      <div className=\"relative p-4 w-full min-w-0\">\n        <div className=\"relative w-full aspect-square rounded-full overflow-hidden bg-stone-100\">\n          <img\n            src={safeProduct.image}\n            alt={safeProduct.name}\n            className=\"w-full h-full object-cover\"\n          />\n          {product.tag && (\n            <div className=\"absolute top-2 left-2\">\n              <Badge tone=\"gold\">{product.tag}</Badge>\n            </div>\n          )}\n        </div>\n\n        {/* Action Buttons - Fade in on hover */}\n        <motion.div\n          className=\"absolute inset-0 flex items-center justify-center bg-black/20 rounded-full\"\n          initial={{ opacity: 0 }}\n          whileHover={{ opacity: 1 }}\n          transition={{ duration: 0.3 }}\n        >\n          <div className=\"flex gap-2\">\n            <motion.button\n              className=\"p-3 bg-white rounded-full shadow-lg hover:bg-stone-50\"\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              aria-label=\"Add to Cart\"\n              onClick={handleAddToCart}\n            >\n              <ShoppingCart size={20} className=\"text-stone-700\" />\n            </motion.button>\n            <motion.button\n              className=\"p-3 bg-white rounded-full shadow-lg hover:bg-stone-50\"\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              aria-label=\"Add to Wishlist\"\n              onClick={handleAddToWishlist}\n            >\n              <Heart size={20} className=\"text-stone-700\" />\n            </motion.button>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Product Info */}\n      <div className=\"p-4 space-y-2 w-full min-w-0\">\n        <h3 className=\"font-medium text-stone-900 line-clamp-2 w-full min-w-0\">\n          {safeProduct.name}\n        </h3>\n        <Stars value={product.rating || 5} />\n        <p className=\"text-brand-700 font-semibold\">\n          {formatPrice(product.price)}\n        </p>\n      </div>\n\n      {/* Glow effect on hover */}\n      <motion.div\n        className=\"absolute inset-0 rounded-2xl bg-gradient-to-r from-brand-500/10 to-transparent pointer-events-none\"\n        initial={{ opacity: 0 }}\n        whileHover={{ opacity: 1 }}\n        transition={{ duration: 0.3 }}\n      />\n    </motion.div>\n  )\n}"],"names":["Badge","children","tone","className","jsx","brand","neutral","gold","success","ProductCard","product","effectiveCurrency","useLocation","add","useCart","user","isAuthenticated","useAuth","navigate","useNavigate","onCardClick","id","checkAuthAndProceed","safeProduct","name","title","image","img","price","parseFloat","replace","jsxs","motion","div","whileHover","scale","transition","duration","onClick","onKeyDown","e","key","preventDefault","role","tabIndex","src","alt","tag","initial","opacity","button","whileTap","stopPropagation","ShoppingCart","size","Heart","Stars","value","rating","toFixed","numericPrice","Number","isFinite","formatPrice"],"mappings":"oMAAA,SAAwBA,GAAMC,SAAEA,EAAAC,KAAUA,EAAO,QAAAC,UAASA,EAAY,KAOpE,OACEC,EAAAA,IAAC,OAAA,CACCD,UAAW,+CARD,CACZE,MAAO,8BACPC,QAAS,8BACTC,KAAM,8BACNC,QAAS,mCAIyDN,MAASC,IAExEF,YAGP,CCLA,SAAwBQ,GAAYC,QAAEA,IACpC,MAAMC,kBAAEA,GAAsBC,KACxBC,IAAEA,GAAQC,KACVC,KAAEA,EAAAC,gBAAMA,GAAoBC,IAC5BC,EAAWC,IAeXC,EAAc,KACdV,EAAQW,IAAIH,EAAS,YAAYR,EAAQW,OAGzCC,EAAsB,OACrBN,IAAoBD,KAEvBG,EAAS,UACF,GAoBLK,EAAc,CAClBF,GAAIX,EAAQW,GACZG,KAAMd,EAAQc,MAAQd,EAAQe,MAC9BC,MAAOhB,EAAQgB,OAAShB,EAAQiB,IAChCC,MAC2B,iBAAlBlB,EAAQkB,MACXC,WAAWnB,EAAQkB,MAAME,QAAQ,UAAW,KAC5CpB,EAAQkB,OAGhB,OACEG,EAAAA,KAACC,EAAOC,IAAP,CACC9B,UAAU,sGACV+B,WAAY,CAAEC,MAAO,MACrBC,WAAY,CAAEC,SAAU,IACxBC,QAASlB,EACTmB,UAAWC,IACK,UAAVA,EAAEC,KAA6B,MAAVD,EAAEC,MACzBD,EAAEE,iBACFtB,MAGJuB,KAAK,SACLC,SAAU,EACV,aAAY,oBAAoBrB,EAAYC,OAG5CvB,SAAA,GAAA8B,KAAC,MAAA,CAAI5B,UAAU,8BACbF,SAAA,GAAA8B,KAAC,MAAA,CAAI5B,UAAU,0EACbF,SAAA,CAAAG,EAAAA,IAAC,MAAA,CACCyC,IAAKtB,EAAYG,MACjBoB,IAAKvB,EAAYC,KACjBrB,UAAU,+BAEXO,EAAQqC,KACP3C,EAAAA,IAAC,MAAA,CAAID,UAAU,wBACbF,SAAAG,EAAAA,IAACJ,EAAA,CAAME,KAAK,OAAQD,SAAAS,EAAQqC,WAMlC3C,EAAAA,IAAC4B,EAAOC,IAAP,CACC9B,UAAU,6EACV6C,QAAS,CAAEC,QAAS,GACpBf,WAAY,CAAEe,QAAS,GACvBb,WAAY,CAAEC,SAAU,IAExBpC,SAAA8B,EAAAA,KAAC,MAAA,CAAI5B,UAAU,aACbF,SAAA,CAAAG,EAAAA,IAAC4B,EAAOkB,OAAP,CACC/C,UAAU,wDACV+B,WAAY,CAAEC,MAAO,KACrBgB,SAAU,CAAEhB,MAAO,KACnB,aAAW,cACXG,QArEYE,IACtBA,EAAEY,kBACE9B,KACFT,EAAIU,EAAa,IAoETtB,WAAAG,IAACiD,EAAA,CAAaC,KAAM,GAAInD,UAAU,qBAEpCC,EAAAA,IAAC4B,EAAOkB,OAAP,CACC/C,UAAU,wDACV+B,WAAY,CAAEC,MAAO,KACrBgB,SAAU,CAAEhB,MAAO,KACnB,aAAW,kBACXG,QAvEgBE,IAC1BA,EAAEY,kBACE9B,KAuEMrB,WAAAG,IAACmD,EAAA,CAAMD,KAAM,GAAInD,UAAU,+BAOnC4B,KAAC,MAAA,CAAI5B,UAAU,+BACbF,SAAA,CAAAG,EAAAA,IAAC,KAAA,CAAGD,UAAU,yDACXF,SAAAsB,EAAYC,OAEfpB,EAAAA,IAACoD,EAAA,CAAMC,MAAO/C,EAAQgD,QAAU,UAC/B,IAAA,CAAEvD,UAAU,+BACVF,SAtHW,CAAA2B,IAClB,GAAqB,iBAAVA,EAET,MAAO,GAAGjB,KAAqBiB,EAAM+B,QAAQ,KAE/C,GAAqB,iBAAV/B,EAAoB,CAC7B,MAAMgC,EAAe/B,WAAWD,EAAME,QAAQ,UAAW,KACzD,MAAO,GAAGnB,KAAqBkD,OAAOC,SAASF,GAAgBA,EAAaD,QAAQ,GAAK/B,GAC3F,CACA,MAAO,GAAGjB,KAAqBiB,KA6GxBmC,CAAYrD,EAAQkB,YAKzBxB,EAAAA,IAAC4B,EAAOC,IAAP,CACC9B,UAAU,qGACV6C,QAAS,CAAEC,QAAS,GACpBf,WAAY,CAAEe,QAAS,GACvBb,WAAY,CAAEC,SAAU,QAIhC"}